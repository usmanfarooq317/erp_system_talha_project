{"ast":null,"code":"var _jsxFileName = \"/home/usman/Desktop/erp_system_talha_project/frontend/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$(),\n  _s7 = $RefreshSig$(),\n  _s8 = $RefreshSig$(),\n  _s9 = $RefreshSig$(),\n  _s0 = $RefreshSig$(),\n  _s1 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst STR = {\n  en: {\n    addProduct: 'Add Product',\n    addCustomer: 'Add Customer',\n    paidNow: 'Paid Now',\n    remaining: 'Remaining',\n    previousPending: 'Previous Pending',\n    savePrint: 'Save & Print',\n    products: 'Products',\n    customers: 'Customers',\n    purchases: 'Purchases',\n    sales: 'Sales',\n    reports: 'Reports',\n    debits: 'Debits',\n    settings: 'Settings',\n    login: 'Welcome Back',\n    username: 'Username',\n    password: 'Password',\n    loginBtn: 'Login',\n    vendorName: 'Vendor Name',\n    modeOfPayment: 'Mode of Payment',\n    cash: 'Cash',\n    card: 'Card',\n    cheque: 'Cheque',\n    online: 'Online',\n    availableproducts: 'Available Products',\n    recycleBin: 'Recycle Bin'\n  },\n  ur: {\n    addProduct: 'مصنوع شامل کریں',\n    addCustomer: 'کسٹمر شامل کریں',\n    paidNow: 'ادائیگی',\n    remaining: 'بقیہ',\n    previousPending: 'پچھلا بقایا',\n    savePrint: 'محفوظ کریں اور پرنٹ کریں',\n    products: 'پراڈکٹس',\n    customers: 'کسٹمرز',\n    purchases: 'خریداری',\n    sales: 'فروخت',\n    reports: 'رپورٹس',\n    debits: 'ادائیگیاں',\n    settings: 'سیٹنگز',\n    login: 'لاگ ان کریں',\n    username: 'یوزر',\n    password: 'پاس ورڈ',\n    loginBtn: 'لاگ ان',\n    vendorName: 'سپلائر کا نام',\n    modeOfPayment: 'ادائیگی کا طریقہ',\n    cash: 'نقد',\n    card: 'کارڈ',\n    cheque: 'چیک',\n    online: 'آن لائن',\n    availableproducts: 'دستیاب مصنوعات',\n    recycleBin: 'ری سائیکل بن',\n    login: 'خوش آمدید'\n  }\n};\nfunction App() {\n  _s();\n  const [lang, setLang] = useState(localStorage.getItem('erp_lang') || 'en');\n  const [route, setRoute] = useState('dashboard');\n  const [user, setUser] = useState(null);\n  const [logo, setLogo] = useState(localStorage.getItem('erp_logo') || '');\n  function t(k) {\n    return STR[lang][k] || k;\n  }\n  useEffect(() => {\n    if (user) setRoute('dashboard');\n  }, [user]);\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(Login, {\n      onSuccess: u => {\n        setUser(u);\n      },\n      logo: logo,\n      t: t,\n      setLang: setLang,\n      lang: lang\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this);\n  }\n  const titleMap = {\n    dashboard: 'Dashboard',\n    products: t('products'),\n    sales: t('sales'),\n    purchases: t('purchases'),\n    reports: t('reports'),\n    debits: t('debits'),\n    settings: t('settings'),\n    RecycleBin: t('Recycle Bin')\n  };\n  const currentTitle = titleMap[route] || 'Recycle Bin';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen flex bg-slate-100 text-slate-900\",\n    children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n      className: \"w-64 bg-slate-950 text-slate-50 flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-4 py-5 flex items-center gap-3 border-b border-slate-800\",\n        children: [logo ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: logo,\n          alt: \"DP\",\n          className: \"h-12 w-12 rounded-full object-cover ring-2 ring-cyan-400 shadow-md\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-12 w-12 rounded-full bg-slate-800 flex items-center justify-center text-sm font-semibold\",\n          children: \"Recycle Bin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-semibold text-white\",\n            children: \"Ethehad Traders\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-cyan-400\",\n            children: \"ET & Co\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"flex-1 px-2 py-4 space-y-1\",\n        children: [['dashboard', 'Dashboard'], ['products', t('products')], ['sales', t('sales')], ['purchases', t('purchases')], ['reports', t('reports')], ['debits', t('debits')], ['settings', t('settings')], ['recycleBin', t('Recycle Bin')]].map(([value, label]) => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setRoute(value),\n          className: `w-full flex items-center px-3 py-2 rounded-lg text-sm text-left transition\n                ${route === value ? 'bg-gradient-to-r from-cyan-500/20 via-sky-500/10 to-transparent text-white border-l-4 border-cyan-400' : 'text-slate-300 hover:bg-slate-800/60'}`,\n          children: label\n        }, value, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-4 py-4 border-t border-slate-800 text-xs text-slate-400 flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: user === null || user === void 0 ? void 0 : user.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            value: lang,\n            onChange: e => {\n              const l = e.target.value;\n              setLang(l);\n              localStorage.setItem('erp_lang', l);\n            },\n            className: \"bg-slate-900 border border-slate-700 rounded px-1 py-0.5 text-xs\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"en\",\n              children: \"EN\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"ur\",\n              children: \"UR\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setUser(null);\n              setRoute('login');\n            },\n            className: \"text-red-400 hover:text-red-300\",\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex-1 relative overflow-hidden\",\n      children: [logo && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        alt: \"background\",\n        className: \"pointer-events-none select-none absolute inset-0 w-full h-full object-cover opacity-10\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative h-full p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6 bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl px-6 py-4\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-lg font-semibold text-slate-800\",\n            children: currentTitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative z-10\",\n          children: [route === 'dashboard' && /*#__PURE__*/_jsxDEV(Dashboard, {\n            t: t\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 39\n          }, this), route === 'products' && /*#__PURE__*/_jsxDEV(Products, {\n            t: t\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 38\n          }, this), route === 'sales' && /*#__PURE__*/_jsxDEV(Sales, {\n            t: t\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 35\n          }, this), route === 'purchases' && /*#__PURE__*/_jsxDEV(Purchases, {\n            t: t\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 39\n          }, this), route === 'reports' && /*#__PURE__*/_jsxDEV(Reports, {\n            t: t\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 37\n          }, this), route === 'debits' && /*#__PURE__*/_jsxDEV(Debits, {\n            t: t\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 36\n          }, this), route === 'recycleBin' && /*#__PURE__*/_jsxDEV(RecycleBin, {\n            t: t\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 40\n          }, this), route === 'settings' && /*#__PURE__*/_jsxDEV(Settings, {\n            t: t,\n            onLogoChange: l => {\n              setLogo(l);\n              localStorage.setItem('erp_logo', l);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 38\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"pCscleOUXZH+FLiBFRAlc9IXO3g=\");\n_c = App;\nfunction Header({\n  setRoute,\n  setUser,\n  logo,\n  setLogo,\n  lang,\n  setLang,\n  t\n}) {\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    className: \"bg-white shadow mb-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-6xl mx-auto px-2 sm:px-4 md:px-6 py-3 flex flex-col md:flex-row md:items-center md:justify-between gap-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-3\",\n        children: [logo ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: logo,\n          alt: \"logo\",\n          className: \"h-10 w-10 object-contain\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-10 w-10 bg-sky-100 rounded flex items-center justify-center text-sky-600\",\n          children: \"Logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-lg md:text-xl font-semibold text-sky-600\",\n          children: \"ERP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"flex flex-wrap items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-3 py-1 rounded-md hover:bg-sky-50 transition text-xs sm:text-sm\",\n          onClick: () => setRoute('dashboard'),\n          children: t('Dashboard')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-3 py-1 rounded-md hover:bg-sky-50 transition text-xs sm:text-sm\",\n          onClick: () => setRoute('products'),\n          children: t('products')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-3 py-1 rounded-md hover:bg-sky-50 transition text-xs sm:text-sm\",\n          onClick: () => setRoute('sales'),\n          children: t('sales')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-3 py-1 rounded-md hover:bg-sky-50 transition text-xs sm:text-sm\",\n          onClick: () => setRoute('purchases'),\n          children: t('purchases')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-3 py-1 rounded-md hover:bg-sky-50 transition text-xs sm:text-sm\",\n          onClick: () => setRoute('reports'),\n          children: t('reports')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-3 py-1 rounded-md hover:bg-sky-50 transition text-xs sm:text-sm\",\n          onClick: () => setRoute('debits'),\n          children: t('debits')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-3 py-1 rounded-md hover:bg-sky-50 transition text-xs sm:text-sm\",\n          onClick: () => setRoute('settings'),\n          children: t('settings')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: lang,\n          onChange: e => {\n            setLang(e.target.value);\n            localStorage.setItem('erp_lang', e.target.value);\n          },\n          className: \"border rounded px-2 py-1 text-xs sm:text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"en\",\n            children: \"EN\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"ur\",\n            children: \"UR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"px-3 py-1 rounded-md bg-sky-600 text-white hover:bg-sky-700 transition text-xs sm:text-sm\",\n          onClick: () => {\n            setUser(null);\n            localStorage.removeItem('erp_lang');\n          },\n          children: t('login')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 5\n  }, this);\n}\n//fuction login\n_c2 = Header;\nfunction Login({\n  onSuccess,\n  logo,\n  t,\n  setLang,\n  lang\n}) {\n  _s2();\n  const [u, setU] = useState('admin');\n  const [p, setP] = useState('admin');\n  const [err, setErr] = useState('');\n  async function submit(e) {\n    e.preventDefault();\n    try {\n      const res = await fetch('http://localhost:4000/api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: u,\n          password: p\n        })\n      });\n      if (!res.ok) throw new Error('login failed');\n      const j = await res.json();\n      onSuccess(j.user);\n    } catch (err) {\n      setErr('Wrong Password or Username');\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-center py-12\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full max-w-md bg-white rounded-xl shadow-md p-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center mb-4\",\n        children: logo ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: logo,\n          className: \"h-24 w-24 object-contain\",\n          alt: \"logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 58\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-24 w-24 bg-sky-100 rounded-full flex items-center justify-center text-sky-600\",\n          children: \"Logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 126\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-center text-xl font-semibold text-gray-700 mb-4\",\n        children: t('login')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: submit,\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: t('username'),\n          className: \"w-full px-4 py-2 border rounded-md focus:outline-sky-300\",\n          value: u,\n          onChange: e => setU(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: t('password'),\n          className: \"w-full px-4 py-2 border rounded-md focus:outline-sky-300\",\n          value: p,\n          onChange: e => setP(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2 items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            value: lang,\n            onChange: e => {\n              setLang(e.target.value);\n              localStorage.setItem('erp_lang', e.target.value);\n            },\n            className: \"border p-1 rounded\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"en\",\n              children: \"EN\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"ur\",\n              children: \"UR\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"w-full py-2 bg-sky-600 text-white rounded-md hover:bg-sky-700 transition\",\n            children: t('loginBtn')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this), err && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-500 mt-3\",\n        children: err\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 318,\n    columnNumber: 5\n  }, this);\n}\n\n/* Dashboard */\n_s2(Login, \"cRRPyx4NDEbvEcjbMmSDHjuGfLE=\");\n_c3 = Login;\nfunction Dashboard({\n  t\n}) {\n  _s3();\n  const [activeTab, setActiveTab] = useState(\"customers\"); // 'customers' | 'stock'\n  const [sales, setSales] = useState([]);\n  const [selectedCustomerName, setSelectedCustomerName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState(\"\");\n  const logoUrl = localStorage.getItem(\"erp_logo\") || \"\";\n\n  // Stock-related state\n  const [stock, setStock] = useState([]);\n  const [movements, setMovements] = useState([]);\n  const [stockLoading, setStockLoading] = useState(false);\n  const [stockErr, setStockErr] = useState(\"\");\n\n  // Initial load\n  useEffect(() => {\n    loadSales();\n    loadStockData();\n  }, []);\n\n  // ---------------- SALES LOADING ----------------\n  async function loadSales() {\n    try {\n      setLoading(true);\n      setErr(\"\");\n      const res = await fetch(\"http://localhost:4000/api/sales\");\n      const j = await res.json();\n      if (!j.ok) {\n        setErr(j.message || \"Failed to load sales\");\n        return;\n      }\n      setSales(j.sales || []);\n    } catch (e) {\n      console.error(e);\n      setErr(\"Failed to load sales\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // --------------- STOCK LOADING (from purchases + sales) ---------------\n  async function loadStockData() {\n    try {\n      setStockLoading(true);\n      setStockErr(\"\");\n      const [pRes, sRes] = await Promise.all([fetch(\"http://localhost:4000/api/purchases\"), fetch(\"http://localhost:4000/api/sales\")]);\n      const [pJson, sJson] = await Promise.all([pRes.json(), sRes.json()]);\n      if (!pJson.ok) throw new Error(pJson.message || \"Failed to load purchases\");\n      if (!sJson.ok) throw new Error(sJson.message || \"Failed to load sales\");\n      const purchases = pJson.purchases || [];\n      const salesData = sJson.sales || [];\n      const mvts = [];\n\n      // Purchases → increase stock\n      purchases.forEach(p => {\n        (p.products || p.lines || []).forEach(line => {\n          mvts.push({\n            date: p.date,\n            type: \"Purchase\",\n            productName: line.productName || \"\",\n            bagWeight: Number(line.weight || 0),\n            bagsDelta: Number(line.qty || line.quantity || 0)\n          });\n        });\n      });\n\n      // Sales → decrease stock\n      salesData.forEach(s => {\n        (s.products || s.lines || []).forEach(line => {\n          mvts.push({\n            date: s.date,\n            type: \"Sale\",\n            productName: line.productName || \"\",\n            bagWeight: Number(line.weight || 0),\n            bagsDelta: Number(line.quantity || line.qty || 0)\n          });\n        });\n      });\n      setMovements(mvts);\n      setStock(mvts); // optional, if you use `stock` elsewhere\n    } catch (e) {\n      console.error(e);\n      setStockErr(e.message || \"Failed to load stock data\");\n    } finally {\n      setStockLoading(false);\n    }\n  }\n\n  // OLD stock loader hitting /api/stock, /api/stock/movements (keep if you really need it)\n  async function loadStock() {\n    try {\n      setStockLoading(true);\n      setStockErr(\"\");\n      const [resStock, resMov] = await Promise.all([fetch(\"http://localhost:4000/api/stock\"), fetch(\"http://localhost:4000/api/stock/movements\")]);\n      const jStock = await resStock.json();\n      const jMov = await resMov.json();\n      if (!jStock.ok) throw new Error(jStock.message || \"Failed stock\");\n      if (!jMov.ok) throw new Error(jMov.message || \"Failed movements\");\n      setStock(jStock.stock || []);\n      setMovements(jMov.movements || []);\n    } catch (e) {\n      console.error(e);\n      setStockErr(\"Failed to load stock info\");\n    } finally {\n      setStockLoading(false);\n    }\n  }\n\n  // ---------------- CUSTOMER GROUPING (latest pending only) ----------------\n  const customerGroup = new Map();\n  (sales || []).forEach(s => {\n    const name = s.customerName || \"Unknown\";\n    if (!customerGroup.has(name)) {\n      customerGroup.set(name, {\n        customerName: name,\n        invoices: [],\n        totalGrand: 0,\n        totalPaid: 0\n      });\n    }\n    const entry = customerGroup.get(name);\n    entry.invoices.push(s);\n    entry.totalGrand += Number(s.grandTotal || 0);\n    entry.totalPaid += Number(s.paidNow || 0);\n  });\n  const customersWithPending = Array.from(customerGroup.values()).map(entry => {\n    // sort by date to find LAST invoice\n    const sortedInvoices = [...entry.invoices].sort((a, b) => new Date(a.date || 0) - new Date(b.date || 0));\n    const last = sortedInvoices[sortedInvoices.length - 1];\n    const latestPending = Number((last === null || last === void 0 ? void 0 : last.pending) || 0);\n    return {\n      ...entry,\n      invoices: sortedInvoices,\n      totalPending: latestPending // only latest remaining counts\n    };\n  }).filter(entry => entry.totalPending > 0).sort((a, b) => b.totalPending - a.totalPending);\n  const selectedCustomer = customersWithPending.find(c => c.customerName === selectedCustomerName) || null;\n\n  // === STOCK SUMMARY (per product + bag weight) ===\n  const stockSummaryMap = new Map();\n  (movements || []).forEach(mv => {\n    const name = mv.productName || '';\n    const bagWt = Number(mv.bagWeight || mv.bagWt || 0);\n    if (!name || !bagWt) return;\n    const key = `${name}||${bagWt}`;\n    if (!stockSummaryMap.has(key)) {\n      stockSummaryMap.set(key, {\n        productName: name,\n        bagWeight: bagWt,\n        purchased: 0,\n        sold: 0\n      });\n    }\n    const row = stockSummaryMap.get(key);\n    const qty = Number(mv.bagsDelta || mv.qty || mv.bags || 0);\n    if (mv.type === 'Purchase') {\n      row.purchased += Math.abs(qty);\n    } else if (mv.type === 'Sale') {\n      row.sold += Math.abs(qty);\n    }\n  });\n\n  // rows by product + bag weight\n  const stockSummaryRows = Array.from(stockSummaryMap.values()).map(r => ({\n    ...r,\n    available: r.purchased - r.sold\n  })).sort((a, b) => a.productName.localeCompare(b.productName) || a.bagWeight - b.bagWeight);\n  const maxStockValue = stockSummaryRows.length === 0 ? 1 : Math.max(...stockSummaryRows.map(r => Math.max(r.purchased, r.sold, r.available)), 1);\n\n  // === AGGREGATE BY PRODUCT (ignore bag weight) ===\n  const productTotalsMap = new Map();\n  stockSummaryRows.forEach(r => {\n    if (!productTotalsMap.has(r.productName)) {\n      productTotalsMap.set(r.productName, {\n        productName: r.productName,\n        purchased: 0,\n        sold: 0,\n        available: 0\n      });\n    }\n    const entry = productTotalsMap.get(r.productName);\n    entry.purchased += r.purchased;\n    entry.sold += r.sold;\n    entry.available += r.available;\n  });\n  const productTotals = Array.from(productTotalsMap.values()).sort((a, b) => b.available - a.available);\n  const maxProductValue = productTotals.length === 0 ? 1 : Math.max(...productTotals.map(p => Math.max(p.purchased, p.sold, p.available)), 1);\n  const totalAvailableBags = productTotals.reduce((sum, p) => sum + Math.max(p.available, 0), 0);\n  const totalProductsInStock = productTotals.filter(p => p.available > 0).length;\n\n  // simple low-stock rule: available > 0 and <= 20 bags\n  const lowStockCount = productTotals.filter(p => p.available > 0 && p.available <= 20).length;\n\n  // show only top N in the big bars (to avoid mess)\n  const topProductsForBars = productTotals.slice(0, 8);\n  // ================= STOCK SUMMARY (per product + bag weight) =================   \n\n  // ---------------- PRINT / DELETE HELPERS ----------------\n  function printInvoiceForRecord(record) {\n    if (!record) return;\n    const dateTime = record.date ? new Date(record.date).toLocaleString() : new Date().toLocaleString();\n    const items = record.products || record.lines || [];\n    const customerTotal = Number(record.customerTotal || 0);\n    const previousPending = Number(record.previousPending || 0);\n    const grandTotal = Number(record.grandTotal || 0);\n    const paidNow = Number(record.paidNow || 0);\n    const remaining = Number(record.pending || 0);\n    const html = `\n      <html><body>\n      <img src='${logoUrl}' style='display:block;margin:0 auto;width:180px;opacity:0.9' />\n      <h2 style='text-align:center'>Invoice</h2>\n      <div>Customer: ${record.customerName || ''}</div>\n      <div>Date &amp; Time: ${dateTime}</div>\n      <table border='1' style='width:100%;border-collapse:collapse'>\n        <tr>\n          <th>#</th>\n          <th>Product</th>\n          <th>Qty</th>\n          <th>Weight</th>\n          <th>Price</th>\n          <th>Line Total</th>\n        </tr>\n        ${items.map((it, i) => `\n          <tr>\n            <td>${i + 1}</td>\n            <td>${it.productName || ''}</td>\n            <td>${it.quantity || it.qty || 0}</td>\n            <td>${it.weight || 0}</td>\n            <td>${it.pricePerKg || it.price || 0}</td>\n            <td>${Number(it.lineTotal || Number(it.quantity || it.qty || 0) * Number(it.pricePerKg || it.price || 0)).toFixed(2)}</td>\n          </tr>`).join('')}\n      </table>\n      <h3>Customer Total: ${customerTotal.toFixed(2)}</h3>\n      <div>Previous Pending: ${previousPending.toFixed(2)}</div>\n      <div>Grand Total: ${grandTotal.toFixed(2)}</div>\n      <div>Paid: ${paidNow.toFixed(2)}</div>\n      <div>Remaining: ${remaining.toFixed(2)}</div>\n      </body></html>\n    `;\n    const w = window.open(\"\", \"_blank\");\n    w.document.write(html);\n    w.document.close();\n    setTimeout(() => w.print(), 300);\n  }\n  async function deleteSaleFromDashboard(id) {\n    if (!window.confirm(\"Delete this sale?\")) return;\n    try {\n      const res = await fetch(`http://localhost:4000/api/sales/${id}`, {\n        method: \"DELETE\"\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || \"Failed to delete sale\");\n        return;\n      }\n      setSales(prev => prev.filter(s => s.id !== id));\n    } catch (e) {\n      console.error(e);\n      alert(\"Error deleting sale\");\n    }\n  }\n\n  // ---------------- JSX ----------------\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-semibold mb-4\",\n      children: \"Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 694,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex mb-4 gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setActiveTab(\"customers\"),\n        className: \"px-4 py-2 rounded text-sm \" + (activeTab === \"customers\" ? \"bg-sky-600 text-white\" : \"bg-white text-sky-700 border\"),\n        children: \"Customer Records\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 698,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setActiveTab(\"stock\"),\n        className: \"px-4 py-2 rounded text-sm \" + (activeTab === \"stock\" ? \"bg-sky-600 text-white\" : \"bg-white text-sky-700 border\"),\n        children: \"Stocks Updates\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 709,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          if (activeTab === \"customers\") {\n            loadSales();\n          } else if (activeTab === \"stock\") {\n            loadStockData(); // use stockData version\n          }\n        },\n        className: \"ml-auto px-3 py-2 text-xs bg-gray-100 border rounded hover:bg-gray-200\",\n        children: \"Refresh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 722,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 697,\n      columnNumber: 7\n    }, this), activeTab === \"customers\" && loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm text-gray-500 mb-2\",\n      children: \"Loading sales\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 738,\n      columnNumber: 9\n    }, this), activeTab === \"customers\" && err && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm text-red-600 mb-2\",\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 741,\n      columnNumber: 9\n    }, this), activeTab === \"stock\" && stockLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm text-gray-500 mb-2\",\n      children: \"Loading stock\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 745,\n      columnNumber: 9\n    }, this), activeTab === \"stock\" && stockErr && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm text-red-600 mb-2\",\n      children: stockErr\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 748,\n      columnNumber: 9\n    }, this), activeTab === \"customers\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-3 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded shadow lg:col-span-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold mb-2 text-sm\",\n          children: \"Customers with Remaining Amount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 756,\n          columnNumber: 13\n        }, this), customersWithPending.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-gray-500\",\n          children: \"No customers with pending amounts.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 761,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"w-full text-xs\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-100\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"p-2 text-left\",\n                children: \"Customer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 768,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"p-2 text-right\",\n                children: \"Pending\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 769,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 767,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 766,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: customersWithPending.map(c => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"border-t cursor-pointer \" + (c.customerName === selectedCustomerName ? \"bg-sky-50\" : \"\"),\n              onClick: () => setSelectedCustomerName(c.customerName),\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2\",\n                children: c.customerName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 784,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2 text-right\",\n                children: c.totalPending.toFixed(2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 785,\n                columnNumber: 23\n              }, this)]\n            }, c.customerName, true, {\n              fileName: _jsxFileName,\n              lineNumber: 774,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 772,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 765,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 755,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded shadow lg:col-span-2\",\n        children: !selectedCustomer ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: \"Select a customer on the left to see full record of their purchases, paid amounts, and remaining balance.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 798,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap justify-between mb-3 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-semibold\",\n                children: selectedCustomer.customerName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 807,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-gray-500 text-xs\",\n                children: [\"Total Pending:\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: selectedCustomer.totalPending.toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 812,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 810,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 806,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-right space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Total Grand:\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: selectedCustomer.totalGrand.toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 820,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 818,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Total Paid:\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: selectedCustomer.totalPaid.toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 826,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 824,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 817,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 805,\n            columnNumber: 17\n          }, this), selectedCustomer.invoices.map(inv => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border rounded mb-3 p-3 text-xs\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap justify-between mb-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-semibold\",\n                  children: \"Date: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 841,\n                  columnNumber: 25\n                }, this), inv.date]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 840,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-semibold\",\n                  children: \"Grand: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 845,\n                  columnNumber: 25\n                }, this), inv.grandTotal, \" \\xA0 | \\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-semibold\",\n                  children: \"Paid: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 847,\n                  columnNumber: 25\n                }, this), inv.paidNow, \" \\xA0 | \\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-semibold\",\n                  children: \"Remaining: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 849,\n                  columnNumber: 25\n                }, this), inv.pending]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 844,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 839,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"w-full text-[11px] border mt-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                className: \"bg-gray-100\",\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border px-1 py-0.5\",\n                    children: \"#\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 858,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border px-1 py-0.5\",\n                    children: \"Product\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 859,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border px-1 py-0.5\",\n                    children: \"Qty\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 860,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border px-1 py-0.5\",\n                    children: \"Weight\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 861,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border px-1 py-0.5\",\n                    children: \"Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 862,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"border px-1 py-0.5\",\n                    children: \"Line Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 863,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 857,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 856,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: (inv.products || inv.lines || []).map((p, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border px-1 py-0.5\",\n                    children: idx + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 869,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border px-1 py-0.5\",\n                    children: p.productName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 870,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border px-1 py-0.5\",\n                    children: p.quantity || p.qty\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 873,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border px-1 py-0.5\",\n                    children: p.weight\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 876,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border px-1 py-0.5\",\n                    children: p.pricePerKg || p.price\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 879,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"border px-1 py-0.5\",\n                    children: p.lineTotal\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 882,\n                    columnNumber: 29\n                  }, this)]\n                }, idx, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 868,\n                  columnNumber: 27\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 866,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 855,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 flex justify-end gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => printInvoiceForRecord(inv),\n                className: \"px-2 py-1 bg-indigo-600 text-white rounded\",\n                children: \"Print Invoice\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 892,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => deleteSaleFromDashboard(inv.id),\n                className: \"px-2 py-1 bg-red-600 text-white rounded\",\n                children: \"\\uD83D\\uDDD1 Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 898,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 891,\n              columnNumber: 21\n            }, this)]\n          }, inv.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 835,\n            columnNumber: 19\n          }, this))]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 796,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 753,\n      columnNumber: 9\n    }, this), activeTab === 'stock' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-4 rounded shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold text-base\",\n          children: \"Stock Updates\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 917,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: loadStockData,\n          className: \"ml-auto px-3 py-1 text-xs border rounded hover:bg-gray-50\",\n          children: \"Refresh\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 918,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 916,\n        columnNumber: 11\n      }, this), stockLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xs text-gray-500 mb-2\",\n        children: \"Loading stock\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 928,\n        columnNumber: 13\n      }, this), stockErr && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xs text-red-600 mb-2\",\n        children: stockErr\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 931,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-3 mb-6 text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border rounded-lg px-3 py-2 bg-sky-50\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-[11px] text-sky-700 uppercase\",\n            children: \"Total Products in Stock\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 937,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xl font-semibold\",\n            children: totalProductsInStock\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 940,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 936,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border rounded-lg px-3 py-2 bg-emerald-50\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-[11px] text-emerald-700 uppercase\",\n            children: \"Total Available Bags\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 945,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xl font-semibold\",\n            children: totalAvailableBags\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 948,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 944,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border rounded-lg px-3 py-2 bg-amber-50\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-[11px] text-amber-700 uppercase\",\n            children: \"Low Stock Items (\\u2264 20 bags)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 953,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xl font-semibold\",\n            children: lowStockCount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 956,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 952,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 935,\n        columnNumber: 11\n      }, this), stockSummaryRows.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xs text-gray-500\",\n        children: \"No stock calculated yet. Add some purchases / sales first.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 963,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 lg:grid-cols-2 gap-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-sm mb-2\",\n              children: \"Available Stock (by product & bag weight)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 972,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"w-full text-xs mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                className: \"bg-gray-100\",\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"p-2 text-left\",\n                    children: \"Product\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 978,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"p-2 text-right\",\n                    children: \"Bag Wt\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 979,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"p-2 text-right\",\n                    children: \"Purchased\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 980,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"p-2 text-right\",\n                    children: \"Sold\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 981,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"p-2 text-right\",\n                    children: \"Available\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 982,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 977,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 976,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: stockSummaryRows.map(r => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  className: \"border-t\",\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"p-2\",\n                    children: r.productName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 991,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"p-2 text-right\",\n                    children: r.bagWeight\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 992,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"p-2 text-right\",\n                    children: r.purchased\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 993,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"p-2 text-right\",\n                    children: r.sold\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 994,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: 'p-2 text-right ' + (r.available < 0 ? 'text-red-600 font-semibold' : ''),\n                    children: r.available\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 995,\n                    columnNumber: 27\n                  }, this)]\n                }, `${r.productName}-${r.bagWeight}`, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 987,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 985,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 975,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 971,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-sm mb-2\",\n              children: \"Stock Overview by Product (bags)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1013,\n              columnNumber: 19\n            }, this), topProductsForBars.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500\",\n              children: \"No products with stock yet.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1018,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: topProductsForBars.map(p => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-[11px] mb-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: p.productName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1026,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"Available: \", p.available]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1027,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1025,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"h-3 bg-gray-100 rounded overflow-hidden flex\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      width: p.purchased / maxProductValue * 100 + '%'\n                    },\n                    className: \"bg-blue-500\",\n                    title: `Purchased: ${p.purchased}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1032,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      width: p.sold / maxProductValue * 100 + '%'\n                    },\n                    className: \"bg-red-400\",\n                    title: `Sold: ${p.sold}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1041,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      width: Math.max(p.available, 0) / maxProductValue * 100 + '%'\n                    },\n                    className: \"bg-green-500\",\n                    title: `Available: ${p.available}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1050,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1030,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between text-[10px] text-gray-500 mt-0.5\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"Purchased: \", p.purchased]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1063,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"Sold: \", p.sold]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1064,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"Available: \", p.available]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1065,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1062,\n                  columnNumber: 27\n                }, this)]\n              }, `prod-bar-${p.productName}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1024,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1022,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-3 text-[10px] text-gray-500 mt-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"w-3 h-3 bg-blue-500 inline-block rounded-sm\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1075,\n                  columnNumber: 23\n                }, this), ' ', \"Purchased\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1074,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"w-3 h-3 bg-red-400 inline-block rounded-sm\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1079,\n                  columnNumber: 23\n                }, this), ' ', \"Sold\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1078,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"w-3 h-3 bg-green-500 inline-block rounded-sm\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1083,\n                  columnNumber: 23\n                }, this), ' ', \"Available\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1082,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1073,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1012,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 969,\n          columnNumber: 15\n        }, this)\n      }, void 0, false)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 914,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 693,\n    columnNumber: 5\n  }, this);\n}\n\n/* Products */\n_s3(Dashboard, \"B/HgnyQfkNdZ+FnHwBBXPOq655Q=\");\n_c4 = Dashboard;\nfunction Products({\n  t\n}) {\n  _s4();\n  const [name, setName] = useState('');\n  const [quantity, setQuantity] = useState(1);\n  const [list, setList] = useState([]);\n  useEffect(() => {\n    fetch('http://localhost:4000/5api/products').then(r => r.json()).then(j => setList(j.products || [])).catch(() => {});\n  }, []);\n  async function add() {\n    if (!name) return alert('Enter product name');\n    const res = await fetch('http://localhost:4000/api/products', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name,\n        quantity\n      })\n    });\n    const j = await res.json();\n    if (j.ok) {\n      setList(prev => [...prev, j.prod]);\n      setName('');\n      setQuantity(1);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-semibold mb-4\",\n      children: t('products')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-4 rounded shadow mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-3 gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Product name\",\n          value: name,\n          onChange: e => setName(e.target.value),\n          className: \"border p-2 rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          value: quantity,\n          onChange: e => setQuantity(Number(e.target.value)),\n          className: \"border p-2 rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: add,\n          className: \"bg-sky-600 text-white px-4 rounded hover:bg-sky-700 transition\",\n          children: t('addProduct')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1108,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-4 rounded shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"font-semibold mb-2\",\n        children: \"Available Products\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"w-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1116,\n              columnNumber: 46\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1116,\n              columnNumber: 57\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Qty\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1116,\n              columnNumber: 70\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1116,\n            columnNumber: 42\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1116,\n          columnNumber: 35\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: list.map(p => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2\",\n              children: p.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1116,\n              columnNumber: 131\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: p.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1116,\n              columnNumber: 162\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: p.quantity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1116,\n              columnNumber: 179\n            }, this)]\n          }, p.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1116,\n            columnNumber: 116\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1116,\n          columnNumber: 95\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1116,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1114,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1105,\n    columnNumber: 5\n  }, this);\n}\n_s4(Products, \"u24eUYqyCwMDG4Em+ogP0yKqQyY=\");\n_c5 = Products;\nfunction Sales({\n  t\n}) {\n  _s5();\n  const [customers, setCustomers] = useState([]);\n  const [productsList, setProductsList] = useState([]);\n  const [selectedCustomerId, setSelectedCustomerId] = useState('');\n  const [customerName, setCustomerName] = useState('');\n  const [previousPending, setPreviousPending] = useState(0);\n  const [items, setItems] = useState([{\n    productName: '',\n    quantity: 1,\n    weight: 0,\n    pricePerKg: 0\n  }]);\n  const [paidNow, setPaidNow] = useState(0);\n  const [calc, setCalc] = useState(null);\n  const [salesRecords, setSalesRecords] = useState([]);\n  const [editingIndex, setEditingIndex] = useState(null);\n  const [editingId, setEditingId] = useState(null);\n  useEffect(() => {\n    fetch('http://localhost:4000/api/customers').then(r => r.json()).then(j => setCustomers(j.customers || [])).catch(() => {});\n    fetch('http://localhost:4000/api/products').then(r => r.json()).then(j => setProductsList(j.products || [])).catch(() => {});\n\n    // load existing sales for list + delete\n    fetch('http://localhost:4000/api/sales').then(r => r.json()).then(j => {\n      if (j.ok) setSalesRecords(j.sales || []);\n    }).catch(() => {});\n  }, []);\n  function addCustomer() {\n    const name = prompt('Customer name');\n    if (!name) return;\n    const location = prompt('Location') || '';\n    const prev = Number(prompt('Previous Pending') || 0);\n    fetch('http://localhost:4000/api/customers', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name,\n        location,\n        previousPending: prev\n      })\n    }).then(r => r.json()).then(j => {\n      if (j.ok) {\n        setCustomers(prevList => [...prevList, j.customer]);\n        alert('Customer added');\n      }\n    });\n  }\n  function addItem() {\n    setItems(prev => [...prev, {\n      productName: '',\n      quantity: 1,\n      weight: 0,\n      pricePerKg: 0\n    }]);\n  }\n  function updateItem(i, key, value) {\n    const copy = [...items];\n    copy[i][key] = value;\n    setItems(copy);\n  }\n  function onSelectCustomer(id) {\n    setSelectedCustomerId(id);\n    if (!id) {\n      setPreviousPending(0);\n      setCustomerName('');\n      return;\n    }\n    const c = customers.find(x => x.id === Number(id));\n    if (c) {\n      setCustomerName(c.name);\n      setPreviousPending(c.previousPending || 0);\n    }\n  }\n  async function calculate() {\n    const res = await fetch('http://localhost:4000/api/calculate-invoice', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        products: items,\n        previousPending\n      })\n    });\n    const j = await res.json();\n    setCalc(j);\n    // paidNow + remaining are always derived below, so when you hit Calculate\n    // it recomputes customerTotal -> grandTotal -> remaining\n  }\n  // ---- totals / derived values ----\n  const customerTotal = calc && typeof calc.customerTotal !== 'undefined' ? Number(calc.customerTotal || 0) : items.reduce((s, it) => s + Number(it.quantity || 0) * Number(it.pricePerKg || 0), 0);\n  const grandTotal = +(customerTotal + Number(previousPending || 0)).toFixed(2);\n  const remaining = +(grandTotal - Number(paidNow || 0)).toFixed(2);\n  const logoUrl = localStorage.getItem('erp_logo') || '';\n  function printGate() {\n    const html = `\n      <html><body>\n      <img src='${logoUrl}' style='display:block;margin:0 auto;width:220px;opacity:0.9' />\n      <h2 style='text-align:center'>Gate Pass</h2>\n      <div>Customer: ${customerName}</div>\n      <div>Time: ${new Date().toLocaleString()}</div>\n      <table border='1' style='width:100%;border-collapse:collapse'>\n        <tr>\n          <th>#</th>\n          <th>Product</th>\n          <th>Weight</th>\n          <th>Qty</th>\n        </tr>\n        ${items.map((it, i) => `<tr>\n            <td>${i + 1}</td>\n            <td>${it.productName}</td>\n            <td>${it.quantity}</td>\n            <td>${it.weight}</td>\n          </tr>`).join('')}\n      </table>\n      </body></html>`;\n    const w = window.open('', '_blank');\n    w.document.write(html);\n    w.document.close();\n    setTimeout(() => w.print(), 300);\n  }\n  function printInvoice(record) {\n    const dateTime = record && record.date ? new Date(record.date).toLocaleString() : new Date().toLocaleString();\n    const html = `\n      <html><body>\n      <img src='${logoUrl}' style='display:block;margin:0 auto;width:180px;opacity:0.9' />\n      <h2 style='text-align:center'>Invoice</h2>\n      <div>Customer: ${customerName}</div>\n      <div>Date &amp; Time: ${dateTime}</div>\n      <table border='1' style='width:100%;border-collapse:collapse'>\n        <tr>\n          <th>#</th>\n          <th>Product</th>\n          <th>Qty</th>\n          <th>Weight</th>\n          <th>Price</th>\n          <th>Line Total</th>\n        </tr>\n        ${items.map((it, i) => `\n          <tr>\n            <td>${i + 1}</td>\n            <td>${it.productName}</td>\n            <td>${it.quantity}</td>\n            <td>${it.weight}</td>\n            <td>${it.pricePerKg}</td>\n            <td>${(Number(it.quantity || 0) * Number(it.pricePerKg || 0)).toFixed(2)}</td>\n          </tr>`).join('')}\n      </table>\n      <h3>Customer Total: ${customerTotal.toFixed(2)}</h3>\n      <div>Previous Pending: ${Number(previousPending || 0).toFixed(2)}</div>\n      <div>Grand Total: ${grandTotal.toFixed(2)}</div>\n      <div>Paid: ${Number(paidNow || 0).toFixed(2)}</div>\n      <div>Remaining: ${remaining.toFixed(2)}</div>\n      </body></html>\n    `;\n    const w = window.open('', '_blank');\n    w.document.write(html);\n    w.document.close();\n    setTimeout(() => w.print(), 300);\n  }\n  async function saveAndPrint() {\n    const res = await fetch('http://localhost:4000/api/save-sale', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        customerId: selectedCustomerId,\n        customerName,\n        previousPending,\n        products: items,\n        paidNow\n      })\n    });\n    const j = await res.json();\n    if (j.ok) {\n      alert('Saved. Remaining added to customer previous pending: ' + j.record.pending);\n      setSalesRecords(prev => [...prev, j.record]);\n      fetch('http://localhost:4000/api/customers').then(r => r.json()).then(j2 => setCustomers(j2.customers || [])).catch(() => {});\n      printInvoice(j.record); // only invoice window, not whole page\n    }\n  }\n  async function deleteSale(id) {\n    if (!window.confirm('Delete this sale?')) return;\n    const res = await fetch(`http://localhost:4000/api/sales/${id}`, {\n      method: 'DELETE'\n    });\n    const j = await res.json();\n    if (j.ok) {\n      setSalesRecords(prev => prev.filter(s => s.id !== id));\n    } else {\n      alert('Failed to delete sale');\n    }\n  }\n\n  /* Sales Edit Function */ /* Sales Edit Function */\n\n  /* Sales Edit Function */\n  function editSales(index) {\n    const s = salesRecords[index];\n    if (!s) return;\n\n    // Customer info\n    setSelectedCustomerId(s.customerId || \"\");\n    setCustomerName(s.customerName || \"\");\n    setPreviousPending(Number(s.previousPending || 0));\n    setPaidNow(Number(s.paidNow || 0));\n\n    // Items restore\n    const restoredItems = (s.products || s.lines || []).map(item => {\n      var _ref, _item$quantity, _item$weight, _ref2, _item$pricePerKg;\n      return {\n        productName: item.productName || \"\",\n        quantity: Number((_ref = (_item$quantity = item.quantity) !== null && _item$quantity !== void 0 ? _item$quantity : item.qty) !== null && _ref !== void 0 ? _ref : 0),\n        weight: Number((_item$weight = item.weight) !== null && _item$weight !== void 0 ? _item$weight : 0),\n        pricePerKg: Number((_ref2 = (_item$pricePerKg = item.pricePerKg) !== null && _item$pricePerKg !== void 0 ? _item$pricePerKg : item.price) !== null && _ref2 !== void 0 ? _ref2 : 0)\n      };\n    });\n    setItems(restoredItems.length ? restoredItems : [{\n      productName: \"\",\n      quantity: 1,\n      weight: 0,\n      pricePerKg: 0\n    }]);\n    setEditingIndex(index);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-semibold mb-4\",\n      children: \"Sales / Invoice\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1384,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white/80 p-4 rounded shadow mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"border p-2 rounded\",\n          value: selectedCustomerId,\n          onChange: e => onSelectCustomer(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Select Customer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1393,\n            columnNumber: 13\n          }, this), customers.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: c.id,\n            children: [c.name, \" - \", c.location]\n          }, c.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1395,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1388,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Customer Name\",\n          value: customerName,\n          onChange: e => setCustomerName(e.target.value),\n          className: \"border p-2 rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1400,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          placeholder: \"Previous Pending\",\n          value: previousPending,\n          onChange: e => setPreviousPending(Number(e.target.value)),\n          className: \"border p-2 rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1406,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1387,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: addCustomer,\n          className: \"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm\",\n          children: t('addCustomer')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1415,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1414,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1386,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white/80 p-4 rounded shadow mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"w-full text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          className: \"bg-sky-100\",\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-left\",\n              children: \"#\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1429,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-left\",\n              children: \"Product\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1430,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-right\",\n              children: \"Qty\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1431,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-right\",\n              children: \"Weight\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1432,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-right\",\n              children: \"Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1433,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-right\",\n              children: \"Line Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1434,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1428,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1427,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: items.map((it, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"border-t\",\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2\",\n              children: i + 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1440,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"border p-1 rounded w-full\",\n                value: it.productName,\n                onChange: e => updateItem(i, 'productName', e.target.value),\n                list: \"products-list\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1442,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1441,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2 text-right\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"border p-1 rounded w-20 text-right\",\n                type: \"number\",\n                value: it.quantity,\n                onChange: e => updateItem(i, 'quantity', Number(e.target.value))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1452,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1451,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2 text-right\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"border p-1 rounded w-24 text-right\",\n                type: \"number\",\n                value: it.weight,\n                onChange: e => updateItem(i, 'weight', Number(e.target.value))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1462,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1461,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2 text-right\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"border p-1 rounded w-24 text-right\",\n                type: \"number\",\n                value: it.pricePerKg,\n                onChange: e => updateItem(i, 'pricePerKg', Number(e.target.value))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1472,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1471,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2 text-right\",\n              children: (Number(it.quantity || 0) * Number(it.pricePerKg || 0)).toFixed(2)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1481,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1439,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1437,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1426,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"datalist\", {\n        id: \"products-list\",\n        children: productsList.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: p.name\n        }, p.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1495,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1493,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap items-center gap-3 mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: addItem,\n          className: \"px-3 py-1 bg-white border rounded hover:shadow transition text-sm\",\n          children: \"\\u2795 Add Item\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1500,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: calculate,\n          className: \"px-3 py-1 bg-sky-600 text-white rounded hover:bg-sky-700 transition text-sm\",\n          children: \"Calculate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1506,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ml-auto flex flex-wrap items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"text-sm\",\n            children: \"Paid Now\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1514,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: paidNow,\n            onChange: e => setPaidNow(Number(e.target.value)),\n            className: \"border p-1 rounded w-28 text-right\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1515,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: saveAndPrint,\n            className: \"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition text-sm\",\n            children: t('savePrint')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1521,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1513,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: printGate,\n          className: \"px-3 py-1 bg-slate-700 text-white rounded hover:bg-slate-800 transition text-sm\",\n          children: \"Gate Pass\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1529,\n          columnNumber: 1\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1499,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 p-3 bg-gray-50 rounded text-sm space-y-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Customer Total:\", ' ', /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: customerTotal.toFixed(2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1542,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1540,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Customer Total:\", ' ', /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: customerTotal.toFixed(2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1545,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1543,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Previous Pending:\", ' ', /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: Number(previousPending || 0).toFixed(2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1549,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1547,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Grand Total:\", ' ', /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: grandTotal.toFixed(2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1553,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1551,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Paid Now:\", ' ', /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: Number(paidNow || 0).toFixed(2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1557,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1555,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Remaining:\", ' ', /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: remaining.toFixed(2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1561,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1559,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1539,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1425,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white/80 p-4 rounded shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"font-semibold mb-2 text-sm\",\n        children: \"Saved Invoices\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1568,\n        columnNumber: 9\n      }, this), salesRecords.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xs text-gray-500\",\n        children: \"No invoices saved yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1570,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"w-full text-xs\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          className: \"bg-gray-100\",\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-left\",\n              children: \"#\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1575,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-left\",\n              children: \"Customer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1576,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-left\",\n              children: \"Date/Time\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1577,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-right\",\n              children: \"Grand Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1578,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-right\",\n              children: \"Paid\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1579,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-right\",\n              children: \"Remaining\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1580,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-center\",\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1581,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1574,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1573,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: salesRecords.map((s, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"border-t\",\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2\",\n              children: idx + 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1587,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2\",\n              children: s.customerName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1588,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2\",\n              children: s.date\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1589,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2 text-right\",\n              children: s.grandTotal\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1590,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2 text-right\",\n              children: s.paidNow\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1591,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2 text-right\",\n              children: s.pending\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1592,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2 text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => editSales(idx),\n                className: \"px-2 py-1 text-xs bg-sky-600 text-white rounded mr-1\",\n                children: \"Action\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1594,\n                columnNumber: 3\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => deleteSale(s.id),\n                className: \"px-2 py-1 text-xs bg-red-600 text-white rounded\",\n                children: \"\\uD83D\\uDDD1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1601,\n                columnNumber: 3\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1593,\n              columnNumber: 19\n            }, this)]\n          }, s.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1586,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1584,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1572,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1567,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1383,\n    columnNumber: 5\n  }, this);\n}\n/* ================= Vendor Purchase Management (standalone) ================= */\n_s5(Sales, \"4YsIwCbKTnznMroZWGSJXuveK1c=\");\n_c6 = Sales;\nfunction VendorPurchaseManagement({\n  t\n}) {\n  _s6();\n  const [vendorsSummary, setVendorsSummary] = useState([]); // [{vendorName, totalPending, totalGrand, totalPaid, purchases: []}]\n  const [selectedVendorName, setSelectedVendorName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState(\"\");\n\n  // Load all pending purchases from backend\n  useEffect(() => {\n    loadVendorPurchases();\n  }, []);\n  async function loadVendorPurchases() {\n    try {\n      setLoading(true);\n      setErr(\"\");\n      const res = await fetch(\"http://localhost:4000/api/purchases-with-pending\");\n      const j = await res.json();\n      if (!j.ok) {\n        throw new Error(j.message || \"Failed to load vendor purchases\");\n      }\n      const list = j.purchases || [];\n\n      // Group by vendorName\n      const map = new Map();\n      list.forEach(p => {\n        const name = p.vendorName || \"Unknown\";\n        if (!map.has(name)) {\n          map.set(name, {\n            vendorName: name,\n            totalPending: 0,\n            totalGrand: 0,\n            totalPaid: 0,\n            purchases: []\n          });\n        }\n        const g = map.get(name);\n        g.totalPending += Number(p.pending || 0);\n        g.totalGrand += Number(p.grandTotal || 0);\n        g.totalPaid += Number(p.paidNow || 0);\n        g.purchases.push(p);\n      });\n      const groups = Array.from(map.values()).sort((a, b) => b.totalPending - a.totalPending);\n      setVendorsSummary(groups);\n\n      // auto-select first vendor if none selected\n      if (!selectedVendorName && groups.length > 0) {\n        setSelectedVendorName(groups[0].vendorName);\n      }\n    } catch (e) {\n      console.error(e);\n      setErr(e.message || \"Failed to load vendor purchases\");\n    } finally {\n      setLoading(false);\n    }\n  }\n  async function handleDeletePurchase(purchase) {\n    if (!purchase) return;\n    if (!window.confirm(\"Delete this purchase record?\")) return;\n    try {\n      const res = await fetch(`http://localhost:4000/api/purchases/${purchase.id}`, {\n        method: \"DELETE\"\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || \"Purchase not found!\");\n        return;\n      }\n\n      // Reload summary from backend so stale records disappear\n      await loadVendorPurchases();\n    } catch (e) {\n      console.error(e);\n      alert(\"Error deleting purchase\");\n    }\n  }\n  const selectedVendorSummary = vendorsSummary.find(v => v.vendorName === selectedVendorName) || null;\n  const totalPendingAll = vendorsSummary.reduce((sum, v) => sum + v.totalPending, 0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-4 rounded shadow mt-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"font-semibold text-sm flex-1\",\n        children: \"Vendor Purchase Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1714,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: loadVendorPurchases,\n        className: \"px-2 py-1 text-xs border rounded\",\n        children: \"Refresh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1717,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1713,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xs text-gray-500 mb-2\",\n      children: \"Loading vendor purchases\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1726,\n      columnNumber: 9\n    }, this), err && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xs text-red-600 mb-2\",\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1728,\n      columnNumber: 15\n    }, this), vendorsSummary.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xs text-gray-500\",\n      children: \"No purchases yet. Once you save purchases, you will see vendor-wise summary here.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1731,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-3 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-1 border rounded p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"font-semibold mb-2 text-xs\",\n          children: \"Vendors (total purchase & pending)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1739,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"w-full text-[11px]\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-100\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"p-1 text-left\",\n                children: \"Vendor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1745,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"p-1 text-right\",\n                children: \"Pending\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1746,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1744,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1743,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: vendorsSummary.map(v => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"border-t cursor-pointer \" + (v.vendorName === selectedVendorName ? \"bg-sky-50\" : \"\"),\n              onClick: () => setSelectedVendorName(v.vendorName),\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-1\",\n                children: v.vendorName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1761,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-1 text-right\",\n                children: v.totalPending.toFixed(2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1762,\n                columnNumber: 21\n              }, this)]\n            }, v.vendorName, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1751,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1749,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1742,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 text-xs text-gray-600\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Total Pending: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1771,\n            columnNumber: 15\n          }, this), totalPendingAll.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1770,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1738,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-2 border rounded p-3\",\n        children: !selectedVendorSummary ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-gray-500\",\n          children: \"Select a vendor on the left to see full record of your purchases, paid amounts, and remaining balance for that vendor.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1779,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap justify-between mb-3 text-xs\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-semibold\",\n                children: selectedVendorSummary.vendorName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1788,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-gray-500\",\n                children: [\"Total Pending:\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: selectedVendorSummary.totalPending.toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1793,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1791,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1787,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-right space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Total Grand:\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: selectedVendorSummary.totalGrand.toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1801,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1799,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Total Paid:\", \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: selectedVendorSummary.totalPaid.toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1807,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1805,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1798,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1786,\n            columnNumber: 17\n          }, this), selectedVendorSummary.purchases.map(p => {\n            const items = p.products || [];\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border rounded mb-3 p-2 text-[11px]\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-wrap justify-between mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold\",\n                    children: \"Date: \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1824,\n                    columnNumber: 27\n                  }, this), p.date ? new Date(p.date).toLocaleString() : \"-\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1823,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold\",\n                    children: \"Grand: \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1830,\n                    columnNumber: 27\n                  }, this), p.grandTotal, \" \\xA0|\\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold\",\n                    children: \"Paid: \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1832,\n                    columnNumber: 27\n                  }, this), p.paidNow, \" \\xA0|\\xA0\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-semibold\",\n                    children: [\"Remaining:\", \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1834,\n                    columnNumber: 27\n                  }, this), p.pending]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1829,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1822,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"w-full text-[11px] border mt-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  className: \"bg-gray-100\",\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"border px-1 py-0.5\",\n                      children: \"#\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1845,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"border px-1 py-0.5\",\n                      children: \"Product\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1846,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"border px-1 py-0.5\",\n                      children: \"Qty\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1847,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"border px-1 py-0.5\",\n                      children: \"Weight\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1848,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"border px-1 py-0.5\",\n                      children: \"Price\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1849,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"border px-1 py-0.5\",\n                      children: \"Line Total\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1850,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1844,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1843,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: items.map((it, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border px-1 py-0.5\",\n                      children: idx + 1\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1856,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border px-1 py-0.5\",\n                      children: it.productName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1859,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border px-1 py-0.5\",\n                      children: it.qty || it.quantity\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1862,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border px-1 py-0.5\",\n                      children: it.weight\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1865,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border px-1 py-0.5\",\n                      children: it.pricePerKg || it.price\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1868,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"border px-1 py-0.5\",\n                      children: it.lineTotal\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1871,\n                      columnNumber: 31\n                    }, this)]\n                  }, idx, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1855,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1853,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1842,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-2 flex justify-end gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => alert(\"Edit in form: we can wire this to Purchases later.\"),\n                  className: \"px-2 py-1 bg-sky-600 text-white rounded\",\n                  children: \"Edit in Form\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1881,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleDeletePurchase(p),\n                  className: \"px-2 py-1 bg-red-600 text-white rounded\",\n                  children: \"\\uD83D\\uDDD1 Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1891,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1880,\n                columnNumber: 23\n              }, this)]\n            }, p.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1818,\n              columnNumber: 21\n            }, this);\n          })]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1777,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1736,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1712,\n    columnNumber: 5\n  }, this);\n}\n\n/* Purchases */\n_s6(VendorPurchaseManagement, \"cVXa2hJG5b+rtPz51Xq2U7V5hYM=\");\n_c7 = VendorPurchaseManagement;\nfunction Purchases({\n  t\n}) {\n  _s7();\n  const [vendorName, setVendorName] = useState('');\n  const [rows, setRows] = useState([{\n    productName: '',\n    qty: 1,\n    weight: 0,\n    pricePerKg: 0\n  }]);\n  const [paidNow, setPaidNow] = useState(0);\n  const [mode, setMode] = useState('cash');\n  const [records, setRecords] = useState([]);\n  const [editingIndex, setEditingIndex] = useState(null);\n  const [editingId, setEditingId] = useState(null);\n  const [filterDate, setFilterDate] = useState(''); // <-- NEW: date filter\n  const [selectedVendorName, setSelectedVendorName] = useState('');\n\n  // Build a map: vendorName -> aggregated info + list of their purchases\n  const vendorMap = new Map();\n  (records || []).forEach(r => {\n    const name = r.vendorName || 'Unknown';\n    if (!vendorMap.has(name)) {\n      vendorMap.set(name, {\n        vendorName: name,\n        totalGrand: 0,\n        totalPaid: 0,\n        totalPending: 0,\n        purchases: []\n      });\n    }\n    const entry = vendorMap.get(name);\n    entry.totalGrand += Number(r.grandTotal || 0);\n    entry.totalPaid += Number(r.paidNow || 0);\n    entry.totalPending += Number(r.pending || 0);\n    entry.purchases.push(r);\n  });\n\n  // Sorted list of vendors (by pending desc)\n  const vendorsSummary = Array.from(vendorMap.values()).sort((a, b) => b.totalPending - a.totalPending);\n  const selectedVendorSummary = vendorsSummary.find(v => v.vendorName === selectedVendorName) || null;\n\n  // ===== Persistent storage of purchases in localStorage =====\n\n  // 🔹 1) Load from localStorage on mount\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem('erp_purchases');\n      if (!raw) return;\n      const parsed = JSON.parse(raw);\n      if (Array.isArray(parsed)) {\n        setRecords(parsed);\n      }\n    } catch (e) {\n      console.error('Failed to load purchases from localStorage', e);\n    }\n  }, []);\n\n  // 🔹 2) Save to localStorage whenever records change\n  useEffect(() => {\n    try {\n      localStorage.setItem('erp_purchases', JSON.stringify(records));\n    } catch (e) {\n      console.error('Failed to save purchases to localStorage', e);\n    }\n  }, [records]);\n  function addRow() {\n    setRows(prev => [...prev, {\n      productName: '',\n      qty: 1,\n      weight: 0,\n      pricePerKg: 0\n    }]);\n  }\n  function updateRow(i, key, value) {\n    const a = [...rows];\n    a[i][key] = value;\n    setRows(a);\n  }\n  const total = rows.reduce((s, r) => s + Number(r.qty || 0) * Number(r.pricePerKg || 0), 0);\n  const remaining = +(total - Number(paidNow || 0)).toFixed(2);\n  async function savePurchase() {\n    // normalize payload from form\n    const payloadProducts = rows.map(r => ({\n      productName: r.productName,\n      qty: Number(r.qty || 0),\n      weight: Number(r.weight || 0),\n      pricePerKg: Number(r.pricePerKg || 0)\n    }));\n    const payload = {\n      vendorName,\n      products: payloadProducts,\n      paidNow,\n      modeOfPayment: mode\n    };\n    try {\n      let j;\n      if (editingIndex !== null && editingId) {\n        // UPDATE existing purchase\n        const res = await fetch(`http://localhost:4000/api/purchases/${editingId}`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(payload)\n        });\n        j = await res.json();\n        if (!j.ok) {\n          alert(j.message || 'Failed to update purchase');\n          return;\n        }\n        const updated = j.record;\n        setRecords(prev => prev.map(p => p.id === updated.id ? updated : p));\n        alert('Purchase updated');\n      } else {\n        // CREATE new purchase\n        const res = await fetch('http://localhost:4000/api/save-purchase', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(payload)\n        });\n        j = await res.json();\n        if (!j.ok) {\n          alert(j.message || 'Failed to save purchase');\n          return;\n        }\n        setRecords(prev => [...prev, j.record]);\n        alert('Purchase saved');\n      }\n\n      // reset editing + form\n      setEditingIndex(null);\n      setEditingId(null);\n      setVendorName('');\n      setPaidNow(0);\n      setMode('cash');\n      setRows([{\n        productName: '',\n        qty: 1,\n        weight: 0,\n        pricePerKg: 0\n      }]);\n    } catch (e) {\n      console.error(e);\n      alert('Error saving purchase');\n    }\n  }\n  function editPurchase(index) {\n    const r = records[index];\n    if (!r) return;\n\n    // Fill form with this purchase\n    setVendorName(r.vendorName || '');\n    setPaidNow(Number(r.paidNow || 0));\n    setMode(r.modeOfPayment || 'cash');\n    const restoredRows = (r.products || []).map(p => ({\n      productName: p.productName,\n      qty: p.qty || p.quantity || 0,\n      weight: p.weight || 0,\n      pricePerKg: p.pricePerKg || p.price || 0\n    }));\n    setRows(restoredRows.length ? restoredRows : [{\n      productName: '',\n      qty: 1,\n      weight: 0,\n      pricePerKg: 0\n    }]);\n\n    // 🔹 these two lines are the important part:\n    setEditingIndex(index);\n    setEditingId(r.id);\n  }\n  async function deletePurchase(index) {\n    const r = records[index];\n    if (!r || !r.id) return;\n    if (!window.confirm('Delete this purchase?')) return;\n    try {\n      const res = await fetch(`http://localhost:4000/api/purchases/${r.id}`, {\n        method: 'DELETE'\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to delete purchase');\n        return;\n      }\n      setRecords(prev => prev.filter(x => x.id !== r.id));\n      alert('Purchase deleted');\n    } catch (e) {\n      console.error(e);\n      alert('Error deleting purchase');\n    }\n  }\n\n  // --- Filtered records by date (yyyy-mm-dd) ---\n  const displayedRecords = filterDate ? records.filter(r => {\n    if (!r.date) return false;\n    // r.date usually ISO string: \"2025-11-15T10:30:00.000Z\"\n    return r.date.slice(0, 10) === filterDate;\n  }) : records;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-semibold mb-4\",\n      children: t('purchases')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2136,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-4 rounded shadow mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: t('vendorName'),\n        value: vendorName,\n        onChange: e => setVendorName(e.target.value),\n        className: \"border p-2 w-full mb-3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"w-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          className: \"bg-sky-100\",\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"#\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2151,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Product\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2152,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Qty\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2153,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Weight\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2154,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2155,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2156,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2150,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: rows.map((r, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"border-t\",\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2\",\n              children: i + 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2162,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"border p-1\",\n                value: r.productName,\n                onChange: e => updateRow(i, 'productName', e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2164,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2163,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"border p-1 w-20\",\n                type: \"number\",\n                value: r.qty,\n                onChange: e => updateRow(i, 'qty', Number(e.target.value))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2173,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2172,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"border p-1 w-24\",\n                type: \"number\",\n                value: r.weight,\n                onChange: e => updateRow(i, 'weight', Number(e.target.value))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2183,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2182,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"border p-1 w-28\",\n                type: \"number\",\n                value: r.pricePerKg,\n                onChange: e => updateRow(i, 'pricePerKg', Number(e.target.value))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2193,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2192,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2\",\n              children: (Number(r.qty || 0) * Number(r.pricePerKg || 0)).toFixed(2)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2202,\n              columnNumber: 17\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2161,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2159,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2 mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: addRow,\n          className: \"px-3 py-1 border rounded hover:shadow transition\",\n          children: \"\\u2795 Add Item\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: mode,\n          onChange: e => setMode(e.target.value),\n          className: \"border p-1 rounded\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"cash\",\n            children: t('cash')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2228,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"card\",\n            children: t('card')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2229,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"cheque\",\n            children: t('cheque')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2230,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"online\",\n            children: t('online')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2231,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2223,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ml-auto flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Amount Paid\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2235,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            value: paidNow,\n            onChange: e => setPaidNow(Number(e.target.value)),\n            className: \"border p-1 w-28\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2236,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-3 py-2 bg-gray-50 rounded\",\n            children: [\"Remaining:\", ' ', /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: remaining.toFixed(2)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2244,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2242,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: savePurchase,\n            className: \"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition\",\n            children: editingIndex !== null ? 'Update Purchase' : 'Save Purchase'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2246,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2234,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2215,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(VendorPurchaseManagement, {\n      t: t\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2257,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2135,\n    columnNumber: 5\n  }, this);\n}\n_s7(Purchases, \"fMl8SgxCbkpG/ux7c6RXas9IwLg=\");\n_c8 = Purchases;\nasync function loadPurchases() {\n  try {\n    const res = await fetch('http://localhost:4000/api/purchases');\n    const j = await res.json();\n    if (!j.ok) {\n      console.error(j.message || 'Failed to load purchases');\n      return;\n    }\n    setRecords(j.purchases || []);\n  } catch (e) {\n    console.error('Error loading purchases', e);\n  }\n}\n\n/* Reports / Debits placeholders */\nfunction Reports({\n  t\n}) {\n  _s8();\n  const [date, setDate] = useState(() => new Date().toISOString().slice(0, 10));\n  const [report, setReport] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState('');\n  async function loadReport(e) {\n    if (e && e.preventDefault) e.preventDefault();\n    if (!date) {\n      alert('Select a date');\n      return;\n    }\n    setLoading(true);\n    setErr('');\n    setReport(null);\n    try {\n      const res = await fetch(`http://localhost:4000/api/reports/day?date=${date}`);\n      const j = await res.json();\n      if (!j.ok) throw new Error(j.message || 'Failed to load report');\n      setReport(j);\n    } catch (e) {\n      console.error(e);\n      setErr('Failed to load report');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // Optional: auto-load for today on first open\n  // useEffect(() => { loadReport(); }, []);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-semibold mb-4\",\n      children: \"Reports\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2311,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-4 rounded shadow mb-4\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: loadReport,\n        className: \"flex flex-wrap items-end gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium mb-1\",\n            children: \"Select Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2317,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: date,\n            onChange: e => setDate(e.target.value),\n            className: \"border p-2 rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2318,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"px-4 py-2 bg-sky-600 text-white rounded hover:bg-sky-700 transition\",\n          children: loading ? 'Loading…' : 'Load Report'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2325,\n          columnNumber: 11\n        }, this), err && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-red-600 text-sm ml-2\",\n          children: err\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2331,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2315,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2314,\n      columnNumber: 7\n    }, this), !report && !loading && !err && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm text-gray-600\",\n      children: \"Select a date and click \\\"Load Report\\\" to view details.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2337,\n      columnNumber: 9\n    }, this), report && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white p-4 rounded shadow\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500\",\n            children: \"Total Sales\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2346,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xl font-semibold\",\n            children: Number(report.totalSales || 0).toFixed(2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2347,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2345,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white p-4 rounded shadow\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500\",\n            children: \"Amount Received\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2352,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xl font-semibold\",\n            children: Number(report.totalReceived || 0).toFixed(2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2353,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2351,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white p-4 rounded shadow\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500\",\n            children: \"Number of Bills\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2358,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xl font-semibold\",\n            children: (report.invoices || []).length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2359,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2357,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2344,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded shadow mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold mb-2\",\n          children: [\"Products Sold on \", report.date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2367,\n          columnNumber: 13\n        }, this), (report.productsSummary || []).length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: \"No products sold on this date.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2369,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"w-full text-sm border\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-100\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"border px-2 py-1 text-left\",\n                children: \"Product\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2374,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"border px-2 py-1 text-right\",\n                children: \"Total Qty\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2375,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"border px-2 py-1 text-right\",\n                children: \"Total Weight\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2376,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2373,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2372,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: report.productsSummary.map((p, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"border px-2 py-1\",\n                children: p.productName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2382,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"border px-2 py-1 text-right\",\n                children: p.totalQty\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2383,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"border px-2 py-1 text-right\",\n                children: p.totalWeight\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2384,\n                columnNumber: 23\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2381,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2379,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2371,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2366,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded shadow\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold mb-2\",\n          children: \"Bills / Invoices\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2394,\n          columnNumber: 13\n        }, this), (report.invoices || []).length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: \"No invoices on this date.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2396,\n          columnNumber: 15\n        }, this), (report.invoices || []).map(inv => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"border rounded mb-4 p-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap justify-between text-sm mb-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: \"Customer: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2402,\n                columnNumber: 21\n              }, this), inv.customerName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2401,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: \"Time: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2406,\n                columnNumber: 21\n              }, this), inv.date]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2405,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2400,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap gap-4 text-sm mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Grand Total: \", inv.grandTotal]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2411,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Paid: \", inv.paidNow]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2412,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Pending:  \", inv.pending]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2413,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2410,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"w-full text-xs border\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-gray-100\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"border px-1 py-0.5\",\n                  children: \"#\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2418,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"border px-1 py-0.5\",\n                  children: \"Product\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2419,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"border px-1 py-0.5\",\n                  children: \"Qty\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2420,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"border px-1 py-0.5\",\n                  children: \"Weight\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2421,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"border px-1 py-0.5\",\n                  children: \"Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2422,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"border px-1 py-0.5\",\n                  children: \"Line Total\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2423,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2417,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2416,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: (inv.products || inv.lines || []).map((p, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"border px-1 py-0.5\",\n                  children: idx + 1\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2429,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"border px-1 py-0.5\",\n                  children: p.productName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2430,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"border px-1 py-0.5\",\n                  children: p.quantity || p.qty\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2431,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"border px-1 py-0.5\",\n                  children: p.weight\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2432,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"border px-1 py-0.5\",\n                  children: p.pricePerKg || p.price\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2433,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"border px-1 py-0.5\",\n                  children: p.lineTotal\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2434,\n                  columnNumber: 25\n                }, this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2428,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2426,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2415,\n            columnNumber: 17\n          }, this)]\n        }, inv.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2399,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2393,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2310,\n    columnNumber: 5\n  }, this);\n}\n/*Debits*/\n_s8(Reports, \"ImpzpXrxzFU9LqLJ6vgctTLu2Q4=\");\n_c9 = Reports;\nfunction Debits({\n  t\n}) {\n  _s9();\n  var _vendors$find$remaini, _vendors$find;\n  const [vendors, setVendors] = useState([]);\n  const [selectedVendorId, setSelectedVendorId] = useState('');\n\n  // Add / edit vendor form\n  const [vendorName, setVendorName] = useState('');\n  const [vendorPlace, setVendorPlace] = useState('');\n  const [vendorCompany, setVendorCompany] = useState('');\n  const [editingVendorId, setEditingVendorId] = useState(null);\n\n  // Ledger & transaction form\n  const [ledger, setLedger] = useState([]);\n  const [txType, setTxType] = useState('received'); // 'received' | 'paid' | 'goods'\n  const [txAmount, setTxAmount] = useState(0);\n  const [txMethod, setTxMethod] = useState('');\n  const [txBillRef, setTxBillRef] = useState('');\n  const [txDate, setTxDate] = useState('');\n  const [editingTxId, setEditingTxId] = useState(null);\n\n  // Purchases with pending (Purchased Vendor section)\n  const [purchaseDebits, setPurchaseDebits] = useState([]);\n  const [loadingPurchases, setLoadingPurchases] = useState(false);\n  useEffect(() => {\n    loadVendors();\n    loadPurchaseDebits();\n  }, []);\n  async function loadVendors() {\n    try {\n      const res = await fetch('http://localhost:4000/api/vendors');\n      const j = await res.json();\n      if (j.ok) setVendors(j.vendors || []);\n    } catch (e) {\n      console.error('Failed to load vendors', e);\n    }\n  }\n  async function loadLedger(vendorId) {\n    if (!vendorId) {\n      setLedger([]);\n      return;\n    }\n    try {\n      const res = await fetch(`http://localhost:4000/api/vendors/${vendorId}/ledger`);\n      const j = await res.json();\n      if (j.ok) {\n        setLedger(j.ledger || []);\n        // update vendors list with new remaining\n        setVendors(prev => prev.map(v => v.id === vendorId ? j.vendor : v));\n      }\n    } catch (e) {\n      console.error('Failed to load ledger', e);\n    }\n  }\n  async function loadPurchaseDebits() {\n    try {\n      setLoadingPurchases(true);\n      const res = await fetch('http://localhost:4000/api/purchases-with-pending');\n      const j = await res.json();\n      if (j.ok) setPurchaseDebits(j.purchases || []);\n    } catch (e) {\n      console.error('Failed to load purchase debits', e);\n    } finally {\n      setLoadingPurchases(false);\n    }\n  }\n  function onSelectVendor(id) {\n    setSelectedVendorId(id);\n    setEditingTxId(null);\n    resetTxForm();\n    if (id) loadLedger(id);else setLedger([]);\n  }\n\n  // --- Vendor form helpers ---\n  function startNewVendor() {\n    setVendorName('');\n    setVendorPlace('');\n    setVendorCompany('');\n    setEditingVendorId(null);\n  }\n  function startEditVendor(vendor) {\n    setVendorName(vendor.name || '');\n    setVendorPlace(vendor.place || '');\n    setVendorCompany(vendor.company || '');\n    setEditingVendorId(vendor.id);\n  }\n  async function saveVendor() {\n    if (!vendorName) {\n      alert('Vendor name is required');\n      return;\n    }\n    const payload = {\n      id: editingVendorId || undefined,\n      name: vendorName,\n      place: vendorPlace,\n      company: vendorCompany\n    };\n    try {\n      const res = await fetch('http://localhost:4000/api/vendors', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to save vendor');\n        return;\n      }\n      const v = j.vendor;\n      setVendors(prev => {\n        const idx = prev.findIndex(x => x.id === v.id);\n        if (idx === -1) return [...prev, v];\n        const copy = [...prev];\n        copy[idx] = v;\n        return copy;\n      });\n      setVendorName('');\n      setVendorPlace('');\n      setVendorCompany('');\n      setEditingVendorId(null);\n    } catch (e) {\n      console.error(e);\n      alert('Error saving vendor');\n    }\n  }\n  async function deleteVendor(vendor) {\n    if (!window.confirm(`Delete vendor \"${vendor.name}\" and all its debits?`)) return;\n    try {\n      const res = await fetch(`http://localhost:4000/api/vendors/${vendor.id}`, {\n        method: 'DELETE'\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to delete vendor');\n        return;\n      }\n      setVendors(prev => prev.filter(v => v.id !== vendor.id));\n      if (selectedVendorId === vendor.id) {\n        setSelectedVendorId('');\n        setLedger([]);\n      }\n    } catch (e) {\n      console.error(e);\n      alert('Error deleting vendor');\n    }\n  }\n  async function deletePurchaseDebit(p) {\n    if (!p || !p.id) return;\n    if (!window.confirm('Delete this pending purchase?')) return;\n    try {\n      const res = await fetch(`http://localhost:4000/api/purchases/${p.id}`, {\n        method: 'DELETE'\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to delete purchase');\n        return;\n      }\n\n      // remove from local pending list\n      setPurchaseDebits(prev => prev.filter(x => x.id !== p.id));\n      alert('Purchase deleted');\n    } catch (e) {\n      console.error(e);\n      alert('Error deleting purchase');\n    }\n  }\n\n  // --- Transaction form helpers ---\n  function resetTxForm() {\n    setTxType('received');\n    setTxAmount(0);\n    setTxMethod('');\n    setTxBillRef('');\n    setTxDate('');\n    setEditingTxId(null);\n  }\n  function startEditTx(tx) {\n    setTxType(tx.type);\n    setTxAmount(tx.amount);\n    setTxMethod(tx.method || '');\n    setTxBillRef(tx.billRef || '');\n    setTxDate(tx.date ? tx.date.slice(0, 10) : '');\n    setEditingTxId(tx.id);\n  }\n  async function saveTransaction() {\n    if (!selectedVendorId) {\n      alert('Select a vendor first');\n      return;\n    }\n    if (!txAmount || Number(txAmount) <= 0) {\n      alert('Amount must be greater than 0');\n      return;\n    }\n    const payload = {\n      type: txType,\n      // 'received' | 'paid' | 'goods'\n      amount: Number(txAmount),\n      method: txMethod,\n      billRef: txBillRef,\n      date: txDate ? new Date(txDate).toISOString() : undefined\n    };\n    try {\n      let url = `http://localhost:4000/api/vendors/${selectedVendorId}/transactions`;\n      let method = 'POST';\n      if (editingTxId) {\n        url += `/${editingTxId}`;\n        method = 'PUT';\n      }\n      const res = await fetch(url, {\n        method,\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to save transaction');\n        return;\n      }\n      setLedger(j.ledger || []);\n      setVendors(prev => prev.map(v => v.id === selectedVendorId ? j.vendor : v));\n      resetTxForm();\n    } catch (e) {\n      console.error(e);\n      alert('Error saving transaction');\n    }\n  }\n  async function deleteTransaction(tx) {\n    if (!selectedVendorId) return;\n    if (!window.confirm('Delete this transaction?')) return;\n    try {\n      const res = await fetch(`http://localhost:4000/api/vendors/${selectedVendorId}/transactions/${tx.id}`, {\n        method: 'DELETE'\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to delete');\n        return;\n      }\n      setLedger(j.ledger || []);\n      setVendors(prev => prev.map(v => v.id === selectedVendorId ? j.vendor : v));\n    } catch (e) {\n      console.error(e);\n      alert('Error deleting transaction');\n    }\n  }\n\n  // --- Edit/Delete purchase debits (Pending purchases) ---\n  async function editPurchaseDebit(p) {\n    if (!p || !p.id) return;\n\n    // Ask how much is paid now (or you can design a better UI later)\n    const newPaidStr = prompt('Enter new paid amount for this purchase:', String(p.paidNow || 0));\n    if (newPaidStr === null) return; // cancelled\n    const newPaid = Number(newPaidStr);\n    if (isNaN(newPaid)) {\n      alert('Invalid amount');\n      return;\n    }\n    const payload = {\n      vendorName: p.vendorName,\n      products: p.products || [],\n      paidNow: newPaid,\n      modeOfPayment: p.modeOfPayment\n    };\n    try {\n      const res = await fetch(`http://localhost:4000/api/purchases/${p.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to update purchase');\n        return;\n      }\n      const updated = j.record;\n\n      // Update local pending list\n      setPurchaseDebits(prev => {\n        const arr = prev.map(x => x.id === updated.id ? updated : x)\n        // if pending <= 0, remove from \"pending\" list\n        .filter(x => Number(x.pending || 0) > 0);\n        return arr;\n      });\n      alert('Purchase updated');\n    } catch (e) {\n      console.error(e);\n      alert('Error updating purchase');\n    }\n  }\n  async function deletePurchase(index) {\n    const rec = records[index];\n    if (!rec) return;\n    if (!window.confirm('Delete this purchase?')) return;\n    try {\n      // tell backend to delete it\n      const res = await fetch(`http://localhost:4000/api/purchases/${rec.id}`, {\n        method: 'DELETE'\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to delete purchase');\n        return;\n      }\n\n      // remove from local list\n      setRecords(prev => prev.filter(r => r.id !== rec.id));\n\n      // if you’re editing this one, reset edit state\n      setEditingIndex(null);\n      alert('Purchase deleted');\n    } catch (e) {\n      console.error(e);\n      alert('Error deleting purchase');\n    }\n  }\n\n  // --- Ledger summary ---\n  const totalReceived = ledger.filter(tx => tx.type === 'received').reduce((s, tx) => s + Number(tx.amount || 0), 0);\n  const totalPaid = ledger.filter(tx => tx.type === 'paid').reduce((s, tx) => s + Number(tx.amount || 0), 0);\n  const totalGoods = ledger.filter(tx => tx.type === 'goods').reduce((s, tx) => s + Number(tx.amount || 0), 0);\n  const remaining = (_vendors$find$remaini = (_vendors$find = vendors.find(v => v.id === selectedVendorId)) === null || _vendors$find === void 0 ? void 0 : _vendors$find.remaining) !== null && _vendors$find$remaini !== void 0 ? _vendors$find$remaini : 0;\n  const selectedVendor = vendors.find(v => v.id === selectedVendorId) || null;\n\n  // Purchases filtered by selected vendor (if any)\n  const filteredPurchases = selectedVendor ? purchaseDebits.filter(p => (p.vendorName || '').toLowerCase() === (selectedVendor.name || '').toLowerCase()) : purchaseDebits;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-semibold mb-4\",\n      children: \"Debits\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2839,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-1 space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white p-4 rounded shadow\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold mb-3\",\n            children: \"Vendor Debit Management\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2846,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"border p-2 rounded w-full\",\n              placeholder: \"Vendor Name\",\n              value: vendorName,\n              onChange: e => setVendorName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2848,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"border p-2 rounded w-full\",\n              placeholder: \"Place / Location\",\n              value: vendorPlace,\n              onChange: e => setVendorPlace(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2854,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"border p-2 rounded w-full\",\n              placeholder: \"Company Name\",\n              value: vendorCompany,\n              onChange: e => setVendorCompany(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2860,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2 mt-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: saveVendor,\n                className: \"px-3 py-1 bg-teal-600 text-white rounded hover:bg-teal-700 text-sm\",\n                children: editingVendorId ? 'Update Vendor' : 'Save Vendor'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2867,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startNewVendor,\n                className: \"px-3 py-1 border rounded text-sm\",\n                children: \"New\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2873,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2866,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2847,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2845,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white p-4 rounded shadow max-h-[400px] overflow-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold mb-3\",\n            children: \"Vendors\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2884,\n            columnNumber: 13\n          }, this), vendors.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-gray-500\",\n            children: \"No vendors yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2886,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"w-full text-xs\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"bg-gray-100\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"p-2 text-left\",\n                  children: \"Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2891,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"p-2 text-right\",\n                  children: \"Remaining\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2892,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"p-2 text-center\",\n                  children: \"Action\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2893,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2890,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2889,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: vendors.map(v => /*#__PURE__*/_jsxDEV(\"tr\", {\n                className: 'border-t ' + (v.id === selectedVendorId ? 'bg-sky-50' : ''),\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"p-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => onSelectVendor(v.id),\n                    className: \"text-left text-xs hover:underline\",\n                    children: [v.name, v.company ? ` (${v.company})` : '']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2906,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2905,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"p-2 text-right\",\n                  children: Number(v.remaining || 0).toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2914,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"p-2 text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => startEditVendor(v),\n                    className: \"px-2 py-1 text-xs bg-sky-600 text-white rounded mr-1\",\n                    children: \"Edit\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2918,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => deleteVendor(v),\n                    className: \"px-2 py-1 text-xs bg-red-600 text-white rounded\",\n                    children: \"\\uD83D\\uDDD1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2924,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2917,\n                  columnNumber: 23\n                }, this)]\n              }, v.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2898,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2896,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2888,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2883,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2844,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-2 space-y-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white p-4 rounded shadow\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold mb-3\",\n            children: selectedVendorId ? 'Vendor Ledger' : 'Select a Vendor'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2942,\n            columnNumber: 13\n          }, this), selectedVendorId && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-sky-50 p-2 rounded\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: \"Total Received\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2951,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold\",\n                  children: totalReceived.toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2952,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2950,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-sky-50 p-2 rounded\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: \"Total Paid\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2957,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold\",\n                  children: totalPaid.toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2958,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2956,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-sky-50 p-2 rounded\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: \"Goods Purchased\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2963,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold\",\n                  children: totalGoods.toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2964,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2962,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-sky-50 p-2 rounded\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500\",\n                  children: \"Remaining\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2969,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold\",\n                  children: Number(remaining || 0).toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2970,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2968,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2949,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border rounded p-3 mb-4 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"font-semibold mb-2\",\n                children: editingTxId ? 'Edit Transaction' : 'Add Transaction'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2978,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 md:grid-cols-5 gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                  className: \"border p-2 rounded\",\n                  value: txType,\n                  onChange: e => setTxType(e.target.value),\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"received\",\n                    children: \"Received from Vendor\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2987,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"paid\",\n                    children: \"Paid to Vendor\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2988,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"goods\",\n                    children: \"Goods Purchased (vendor takes goods)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2989,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2982,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  className: \"border p-2 rounded\",\n                  placeholder: \"Amount\",\n                  value: txAmount,\n                  onChange: e => setTxAmount(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2993,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  className: \"border p-2 rounded\",\n                  value: txDate,\n                  onChange: e => setTxDate(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3000,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"border p-2 rounded\",\n                  placeholder: \"Payment Method\",\n                  value: txMethod,\n                  onChange: e => setTxMethod(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3006,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  className: \"border p-2 rounded\",\n                  placeholder: \"Remarks\",\n                  value: txBillRef,\n                  onChange: e => setTxBillRef(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3012,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2981,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex gap-2 mt-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: saveTransaction,\n                  className: \"px-3 py-1 bg-teal-600 text-white rounded text-sm\",\n                  children: editingTxId ? 'Update Transaction' : 'Save Transaction'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3020,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: resetTxForm,\n                  className: \"px-3 py-1 border rounded text-sm\",\n                  children: \"Clear\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3026,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3019,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2977,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"max-h-[380px] overflow-auto text-xs\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"w-full\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  className: \"bg-gray-100\",\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"p-2 text-left\",\n                      children: \"Date\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3040,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"p-2 text-left\",\n                      children: \"Type\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3041,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"p-2 text-right\",\n                      children: \"Amount\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3042,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"p-2 text-left\",\n                      children: \"Method\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3043,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"p-2 text-left\",\n                      children: \"Remarks\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3044,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"p-2 text-right\",\n                      children: \"Balance After\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3045,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"p-2 text-center\",\n                      children: \"Actions\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3046,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3039,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3038,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: [ledger.map(tx => /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: \"border-t\",\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: tx.date ? new Date(tx.date).toLocaleDateString() : '-'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3052,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2 capitalize\",\n                      children: tx.type\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3057,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2 text-right\",\n                      children: Number(tx.amount || 0).toFixed(2)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3058,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: tx.method\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3061,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2\",\n                      children: tx.billRef\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3062,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2 text-right\",\n                      children: Number(tx.balanceAfter || 0).toFixed(2)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3063,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"p-2 text-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => startEditTx(tx),\n                        className: \"px-2 py-1 text-xs bg-sky-600 text-white rounded mr-1\",\n                        children: \"Edit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3067,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => deleteTransaction(tx),\n                        className: \"px-2 py-1 text-xs bg-red-600 text-white rounded\",\n                        children: \"\\uD83D\\uDDD1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 3073,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3066,\n                      columnNumber: 27\n                    }, this)]\n                  }, tx.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3051,\n                    columnNumber: 25\n                  }, this)), ledger.length === 0 && /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: /*#__PURE__*/_jsxDEV(\"td\", {\n                      colSpan: 7,\n                      className: \"p-2 text-center text-gray-500\",\n                      children: \"No transactions yet.\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 3084,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3083,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3049,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3037,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3036,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true), !selectedVendorId && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-gray-500\",\n            children: \"Select a vendor on the left to view and manage their debits.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3099,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2941,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2940,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2842,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-4 rounded shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold\",\n          children: \"Purchased Vendor (Pending Purchases)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: loadPurchaseDebits,\n          className: \"ml-auto px-3 py-1 text-xs border rounded\",\n          children: loadingPurchases ? 'Refreshing…' : 'Refresh'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-xs text-gray-500 mb-2\",\n        children: [\"Showing all purchases where some amount is still pending.\", selectedVendor ? ` (Filtered by vendor: ${selectedVendor.name})` : ' (All vendors)']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"w-full text-xs\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          className: \"bg-gray-100\",\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-left\",\n              children: \"Vendor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3127,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-left\",\n              children: \"Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3128,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-left\",\n              children: \"Product\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3129,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-right\",\n              children: \"Qty\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3130,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-right\",\n              children: \"Grand Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3131,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-right\",\n              children: \"Paid\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3132,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-right\",\n              children: \"Remaining\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3133,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-left\",\n              children: \"Mode\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3134,\n              columnNumber: 7\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"p-2 text-center\",\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3135,\n              columnNumber: 7\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3126,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3125,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [filteredPurchases.map(p => {\n            const productsList = (p.products || []).map(x => x.productName).join(', ');\n            const totalQty = (p.products || []).reduce((s, x) => s + Number(x.qty || x.quantity || 0), 0);\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"border-t\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2\",\n                children: p.vendorName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3147,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2\",\n                children: p.date ? new Date(p.date).toLocaleDateString() : '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3148,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2\",\n                children: productsList || '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3151,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2 text-right\",\n                children: totalQty\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3152,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2 text-right\",\n                children: Number(p.grandTotal || 0).toFixed(2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3153,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2 text-right\",\n                children: Number(p.paidNow || 0).toFixed(2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3156,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2 text-right\",\n                children: Number(p.pending || 0).toFixed(2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3159,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2\",\n                children: p.modeOfPayment\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3162,\n                columnNumber: 11\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"p-2 text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => editPurchaseDebit(p),\n                  className: \"px-2 py-1 text-xs bg-sky-600 text-white rounded mr-1\",\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3164,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => deletePurchaseDebit(p),\n                  className: \"px-2 py-1 text-xs bg-red-600 text-white rounded\",\n                  children: \"\\uD83D\\uDDD1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3170,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3163,\n                columnNumber: 11\n              }, this)]\n            }, p.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3146,\n              columnNumber: 9\n            }, this);\n          }), filteredPurchases.length === 0 && /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"p-2 text-center text-gray-500\",\n              colSpan: 9,\n              children: \"No pending purchases found.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 3182,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3181,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3138,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3124,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2838,\n    columnNumber: 5\n  }, this);\n}\n_s9(Debits, \"lvukjGN0vac7D9bjeSB75hZmFnw=\");\n_c0 = Debits;\nfunction RecycleBin({\n  t\n}) {\n  _s0();\n  const [activeType, setActiveType] = useState('sales'); // 'sales' | 'purchases' | 'vendors' | 'customers'\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState('');\n  async function loadItems(type = activeType) {\n    try {\n      setLoading(true);\n      setErr('');\n      const res = await fetch(`http://localhost:4000/api/recycle-bin/${type}`);\n      const j = await res.json();\n      if (!j.ok) throw new Error(j.message || 'Failed to load recycle bin');\n      setItems(j.items || []);\n    } catch (e) {\n      console.error(e);\n      setErr(e.message || 'Failed to load recycle bin');\n    } finally {\n      setLoading(false);\n    }\n  }\n  useEffect(() => {\n    loadItems('sales');\n  }, []);\n  function changeType(type) {\n    setActiveType(type);\n    loadItems(type);\n  }\n  async function handleRestore(id) {\n    if (!window.confirm('Restore this record?')) return;\n    try {\n      const res = await fetch('http://localhost:4000/api/recycle-bin/restore', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          type: activeType,\n          id\n        })\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to restore');\n        return;\n      }\n      await loadItems();\n      alert('Restored successfully');\n    } catch (e) {\n      console.error(e);\n      alert('Error restoring item');\n    }\n  }\n  async function handleDelete(id) {\n    if (!window.confirm('Permanently delete this item?')) return;\n    try {\n      const res = await fetch(`http://localhost:4000/api/recycle-bin/${activeType}/${id}`, {\n        method: 'DELETE'\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to delete from recycle bin');\n        return;\n      }\n      await loadItems();\n    } catch (e) {\n      console.error(e);\n      alert('Error deleting item');\n    }\n  }\n  async function handleDeleteAll() {\n    if (!window.confirm(`Permanently delete ALL ${activeType} items from recycle bin?`)) return;\n    try {\n      const res = await fetch(`http://localhost:4000/api/recycle-bin/${activeType}`, {\n        method: 'DELETE'\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to delete all');\n        return;\n      }\n      await loadItems();\n    } catch (e) {\n      console.error(e);\n      alert('Error deleting all items');\n    }\n  }\n\n  // small helper to show a label per item\n  function renderMainLabel(item) {\n    if (activeType === 'sales') {\n      return `${item.customerName || 'Unknown'} — Grand: ${item.grandTotal} | Pending: ${item.pending}`;\n    }\n    if (activeType === 'purchases') {\n      return `${item.vendorName || 'Unknown'} — Grand: ${item.grandTotal} | Pending: ${item.pending}`;\n    }\n    if (activeType === 'vendors') {\n      return `${item.name || 'Vendor'} — Remaining: ${item.remaining || 0}`;\n    }\n    if (activeType === 'customers') {\n      return `${item.name || 'Customer'} — Pending: ${item.previousPending || 0}`;\n    }\n    return 'Item';\n  }\n  function formatDate(iso) {\n    if (!iso) return '';\n    try {\n      return new Date(iso).toLocaleString();\n    } catch {\n      return iso;\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-semibold mb-4\",\n      children: \"Recycle Bin\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3327,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2 mb-4\",\n      children: [['sales', 'purchases', 'vendors', 'customers'].map(type => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => changeType(type),\n        className: 'px-3 py-1 rounded text-sm ' + (activeType === type ? 'bg-sky-600 text-white' : 'bg-white text-sky-700 border'),\n        children: type.charAt(0).toUpperCase() + type.slice(1)\n      }, type, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3332,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => loadItems(),\n        className: \"ml-auto px-3 py-1 text-xs bg-gray-100 border rounded hover:bg-gray-200\",\n        children: \"Refresh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3346,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDeleteAll,\n        className: \"px-3 py-1 text-xs bg-red-100 text-red-700 border border-red-300 rounded hover:bg-red-200\",\n        children: \"Delete All Permanently\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3352,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3330,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm text-gray-500 mb-2\",\n      children: \"Loading recycle bin\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3361,\n      columnNumber: 9\n    }, this), err && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm text-red-600 mb-2\",\n      children: err\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3363,\n      columnNumber: 15\n    }, this), items.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-sm text-gray-500\",\n      children: [\"No deleted \", activeType, \" records in recycle bin.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3366,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded shadow divide-y\",\n      children: items.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-3 flex flex-wrap justify-between items-center text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-0.5\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-medium\",\n            children: renderMainLabel(item)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3377,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-500\",\n            children: [\"ID: \", item.id, ' ', item.date && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [\"| Date: \", formatDate(item.date)]\n            }, void 0, true), item.deletedAt && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [' ', \"| Deleted:\", ' ', formatDate(item.deletedAt)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 3378,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3376,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2 mt-1 sm:mt-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleRestore(item.id),\n            className: \"px-2 py-1 text-xs bg-emerald-600 text-white rounded\",\n            children: \"Restore\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3392,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(item.id),\n            className: \"px-2 py-1 text-xs bg-red-600 text-white rounded\",\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3398,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 3391,\n          columnNumber: 15\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 3372,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3370,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 3326,\n    columnNumber: 5\n  }, this);\n}\n\n/* Settings */\n_s0(RecycleBin, \"onojJ+/99yVsWHh6Rf9VwWxSPVU=\");\n_c1 = RecycleBin;\nfunction Settings({\n  t,\n  onLogoChange\n}) {\n  _s1();\n  const [logoData, setLogoData] = useState(localStorage.getItem('erp_logo') || '');\n  function upload(e) {\n    const f = e.target.files[0];\n    if (!f) return;\n    const reader = new FileReader();\n    reader.onload = ev => {\n      setLogoData(ev.target.result);\n      onLogoChange(ev.target.result);\n    };\n    reader.readAsDataURL(f);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-semibold mb-4\",\n      children: t('settings')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3420,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-4 rounded shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Upload Logo (PNG/JPG)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3422,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: upload,\n        className: \"mt-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3423,\n        columnNumber: 9\n      }, this), logoData && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: logoData,\n          className: \"h-28\",\n          alt: \"logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 3424,\n          columnNumber: 44\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 3424,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 3421,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 3419,\n    columnNumber: 5\n  }, this);\n}\n_s1(Settings, \"PfrNGnXhnOqILNkIHTgzYK94cXI=\");\n_c10 = Settings;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10;\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"Login\");\n$RefreshReg$(_c4, \"Dashboard\");\n$RefreshReg$(_c5, \"Products\");\n$RefreshReg$(_c6, \"Sales\");\n$RefreshReg$(_c7, \"VendorPurchaseManagement\");\n$RefreshReg$(_c8, \"Purchases\");\n$RefreshReg$(_c9, \"Reports\");\n$RefreshReg$(_c0, \"Debits\");\n$RefreshReg$(_c1, \"RecycleBin\");\n$RefreshReg$(_c10, \"Settings\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","STR","en","addProduct","addCustomer","paidNow","remaining","previousPending","savePrint","products","customers","purchases","sales","reports","debits","settings","login","username","password","loginBtn","vendorName","modeOfPayment","cash","card","cheque","online","availableproducts","recycleBin","ur","App","_s","lang","setLang","localStorage","getItem","route","setRoute","user","setUser","logo","setLogo","t","k","Login","onSuccess","u","fileName","_jsxFileName","lineNumber","columnNumber","titleMap","dashboard","RecycleBin","currentTitle","className","children","src","alt","map","value","label","onClick","onChange","e","l","target","setItem","Dashboard","Products","Sales","Purchases","Reports","Debits","Settings","onLogoChange","_c","Header","removeItem","_c2","_s2","setU","p","setP","err","setErr","submit","preventDefault","res","fetch","method","headers","body","JSON","stringify","ok","Error","j","json","onSubmit","placeholder","type","_c3","_s3","activeTab","setActiveTab","setSales","selectedCustomerName","setSelectedCustomerName","loading","setLoading","logoUrl","stock","setStock","movements","setMovements","stockLoading","setStockLoading","stockErr","setStockErr","loadSales","loadStockData","message","console","error","pRes","sRes","Promise","all","pJson","sJson","salesData","mvts","forEach","lines","line","push","date","productName","bagWeight","Number","weight","bagsDelta","qty","quantity","s","loadStock","resStock","resMov","jStock","jMov","customerGroup","Map","name","customerName","has","set","invoices","totalGrand","totalPaid","entry","get","grandTotal","customersWithPending","Array","from","values","sortedInvoices","sort","a","b","Date","last","length","latestPending","pending","totalPending","filter","selectedCustomer","find","c","stockSummaryMap","mv","bagWt","key","purchased","sold","row","bags","Math","abs","stockSummaryRows","r","available","localeCompare","maxStockValue","max","productTotalsMap","productTotals","maxProductValue","totalAvailableBags","reduce","sum","totalProductsInStock","lowStockCount","topProductsForBars","slice","printInvoiceForRecord","record","dateTime","toLocaleString","items","customerTotal","html","it","i","pricePerKg","price","lineTotal","toFixed","join","w","window","open","document","write","close","setTimeout","print","deleteSaleFromDashboard","id","confirm","alert","prev","inv","idx","style","width","title","_c4","_s4","setName","setQuantity","list","setList","then","catch","add","prod","_c5","_s5","setCustomers","productsList","setProductsList","selectedCustomerId","setSelectedCustomerId","setCustomerName","setPreviousPending","setItems","setPaidNow","calc","setCalc","salesRecords","setSalesRecords","editingIndex","setEditingIndex","editingId","setEditingId","prompt","location","prevList","customer","addItem","updateItem","copy","onSelectCustomer","x","calculate","printGate","printInvoice","saveAndPrint","customerId","j2","deleteSale","editSales","index","restoredItems","item","_ref","_item$quantity","_item$weight","_ref2","_item$pricePerKg","_c6","VendorPurchaseManagement","_s6","vendorsSummary","setVendorsSummary","selectedVendorName","setSelectedVendorName","loadVendorPurchases","g","groups","handleDeletePurchase","purchase","selectedVendorSummary","v","totalPendingAll","_c7","_s7","setVendorName","rows","setRows","mode","setMode","records","setRecords","filterDate","setFilterDate","vendorMap","raw","parsed","parse","isArray","addRow","updateRow","total","savePurchase","payloadProducts","payload","updated","editPurchase","restoredRows","deletePurchase","displayedRecords","_c8","loadPurchases","_s8","setDate","toISOString","report","setReport","loadReport","totalSales","totalReceived","productsSummary","totalQty","totalWeight","_c9","_s9","_vendors$find$remaini","_vendors$find","vendors","setVendors","selectedVendorId","setSelectedVendorId","vendorPlace","setVendorPlace","vendorCompany","setVendorCompany","editingVendorId","setEditingVendorId","ledger","setLedger","txType","setTxType","txAmount","setTxAmount","txMethod","setTxMethod","txBillRef","setTxBillRef","txDate","setTxDate","editingTxId","setEditingTxId","purchaseDebits","setPurchaseDebits","loadingPurchases","setLoadingPurchases","loadVendors","loadPurchaseDebits","loadLedger","vendorId","vendor","onSelectVendor","resetTxForm","startNewVendor","startEditVendor","place","company","saveVendor","undefined","findIndex","deleteVendor","deletePurchaseDebit","startEditTx","tx","amount","billRef","saveTransaction","url","deleteTransaction","editPurchaseDebit","newPaidStr","String","newPaid","isNaN","arr","rec","totalGoods","selectedVendor","filteredPurchases","toLowerCase","toLocaleDateString","balanceAfter","colSpan","_c0","_s0","activeType","setActiveType","loadItems","changeType","handleRestore","handleDelete","handleDeleteAll","renderMainLabel","formatDate","iso","charAt","toUpperCase","deletedAt","_c1","_s1","logoData","setLogoData","upload","f","files","reader","FileReader","onload","ev","result","readAsDataURL","accept","_c10","$RefreshReg$"],"sources":["/home/usman/Desktop/erp_system_talha_project/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst STR = {\n  en: {\n    addProduct: 'Add Product',\n    addCustomer: 'Add Customer',\n    paidNow: 'Paid Now',\n    remaining: 'Remaining',\n    previousPending: 'Previous Pending',\n    savePrint: 'Save & Print',\n    products: 'Products',\n    customers: 'Customers',\n    purchases: 'Purchases',\n    sales: 'Sales',\n    reports: 'Reports',\n    debits: 'Debits',\n    settings: 'Settings',\n    login: 'Welcome Back',\n    username: 'Username',\n    password: 'Password',\n    loginBtn: 'Login',\n    vendorName: 'Vendor Name',\n    modeOfPayment: 'Mode of Payment',\n    cash: 'Cash',\n    card: 'Card',\n    cheque: 'Cheque',\n    online: 'Online',\n    availableproducts : 'Available Products',\n    recycleBin: 'Recycle Bin',\n  },\n  ur: {\n    addProduct: 'مصنوع شامل کریں',\n    addCustomer: 'کسٹمر شامل کریں',\n    paidNow: 'ادائیگی',\n    remaining: 'بقیہ',\n    previousPending: 'پچھلا بقایا',\n    savePrint: 'محفوظ کریں اور پرنٹ کریں',\n    products: 'پراڈکٹس',\n    customers: 'کسٹمرز',\n    purchases: 'خریداری',\n    sales: 'فروخت',\n    reports: 'رپورٹس',\n    debits: 'ادائیگیاں',\n    settings: 'سیٹنگز',\n    login: 'لاگ ان کریں',\n    username: 'یوزر',\n    password: 'پاس ورڈ',\n    loginBtn: 'لاگ ان',\n    vendorName: 'سپلائر کا نام',\n    modeOfPayment: 'ادائیگی کا طریقہ',\n    cash: 'نقد',\n    card: 'کارڈ',\n    cheque: 'چیک',\n    online: 'آن لائن',\n    availableproducts : 'دستیاب مصنوعات',\n    recycleBin:'ری سائیکل بن',\n    login: 'خوش آمدید',\n  }\n};\nfunction App(){\n  const [lang, setLang] = useState(localStorage.getItem('erp_lang') || 'en');\n  const [route, setRoute] = useState('dashboard');\n  const [user, setUser] = useState(null);\n  const [logo, setLogo] = useState(localStorage.getItem('erp_logo') || '');\n\n  function t(k){ return STR[lang][k] || k; }\n\n  useEffect(()=>{ if(user) setRoute('dashboard'); }, [user]);\n\n  if(!user) {\n    return (\n      <Login\n        onSuccess={u=>{ setUser(u); }}\n        logo={logo}\n        t={t}\n        setLang={setLang}\n        lang={lang}\n      />\n    );\n  }\n\n  const titleMap = {\n    dashboard: 'Dashboard',\n    products: t('products'),\n    sales: t('sales'),\n    purchases: t('purchases'),\n    reports: t('reports'),\n    debits: t('debits'),\n    settings: t('settings'),\n    RecycleBin:t('Recycle Bin'),\n    \n  };\n  const currentTitle = titleMap[route] || 'Recycle Bin';\n\n  return (\n    <div className=\"min-h-screen flex bg-slate-100 text-slate-900\">\n      {/* LEFT PANEL / SIDEBAR */}\n      <aside className=\"w-64 bg-slate-950 text-slate-50 flex flex-col\">\n        {/* Top: DP + title */}\n        <div className=\"px-4 py-5 flex items-center gap-3 border-b border-slate-800\">\n          {logo ? (\n            <img\n              src={logo}\n              alt=\"DP\"\n              className=\"h-12 w-12 rounded-full object-cover ring-2 ring-cyan-400 shadow-md\"\n            />\n          ) : (\n            <div className=\"h-12 w-12 rounded-full bg-slate-800 flex items-center justify-center text-sm font-semibold\">\n              Recycle Bin\n            </div>\n          )}\n          <div>\n            <div className=\"font-semibold text-white\">Ethehad Traders</div>\n            <div className=\"text-xs text-cyan-400\">ET & Co</div>\n          </div>\n        </div>\n\n        {/* Menu */}\n        <nav className=\"flex-1 px-2 py-4 space-y-1\">\n          {[\n            ['dashboard', 'Dashboard'],\n            ['products', t('products')],\n            ['sales', t('sales')],\n            ['purchases', t('purchases')],\n            ['reports', t('reports')],\n            ['debits', t('debits')],\n            ['settings', t('settings')],\n            ['recycleBin', t('Recycle Bin')],\n          ].map(([value, label]) => (\n            <button\n              key={value}\n              onClick={() => setRoute(value)}\n              className={`w-full flex items-center px-3 py-2 rounded-lg text-sm text-left transition\n                ${\n                  route === value\n                    ? 'bg-gradient-to-r from-cyan-500/20 via-sky-500/10 to-transparent text-white border-l-4 border-cyan-400'\n                    : 'text-slate-300 hover:bg-slate-800/60'\n                }`}\n            >\n              {label}\n            </button>\n          ))}\n        </nav>\n\n        {/* Bottom: user + logout + language */}\n        <div className=\"px-4 py-4 border-t border-slate-800 text-xs text-slate-400 flex items-center justify-between\">\n          <span>{user?.username}</span>\n          <div className=\"flex items-center gap-2\">\n            <select\n              value={lang}\n              onChange={e=>{ const l=e.target.value; setLang(l); localStorage.setItem('erp_lang', l); }}\n              className=\"bg-slate-900 border border-slate-700 rounded px-1 py-0.5 text-xs\"\n            >\n              <option value=\"en\">EN</option>\n              <option value=\"ur\">UR</option>\n            </select>\n            <button\n              onClick={()=>{ setUser(null); setRoute('login'); }}\n              className=\"text-red-400 hover:text-red-300\"\n            >\n              Logout\n            </button>\n          </div>\n        </div>\n      </aside>\n\n      {/* MAIN AREA */}\n      <main className=\"flex-1 relative overflow-hidden\">\n        {/* Faded background DP / logo */}\n        {logo && (\n          <img\n            src={logo}\n            alt=\"background\"\n            className=\"pointer-events-none select-none absolute inset-0 w-full h-full object-cover opacity-10\"\n          />\n        )}\n\n        <div className=\"relative h-full p-6\">\n          {/* Glass top bar */}\n          <div className=\"mb-6 bg-white/80 backdrop-blur-xl shadow-lg rounded-2xl px-6 py-4\">\n            <h1 className=\"text-lg font-semibold text-slate-800\">\n              {currentTitle}\n            </h1>\n          </div>\n\n          {/* Page content */}\n          <div className=\"relative z-10\">\n            {route === 'dashboard' && <Dashboard t={t} />}\n            {route === 'products' && <Products t={t} />}\n            {route === 'sales' && <Sales t={t} />}\n            {route === 'purchases' && <Purchases t={t} />}\n            {route === 'reports' && <Reports t={t} />}\n            {route === 'debits' && <Debits t={t} />}\n            {route === 'recycleBin' && <RecycleBin t={t} />}\n            {route === 'settings' && <Settings t={t} onLogoChange={l=>{ setLogo(l); localStorage.setItem('erp_logo', l); }} />}\n            \n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\nfunction Header({ setRoute, setUser, logo, setLogo, lang, setLang, t }) {\n  return (\n    <header className=\"bg-white shadow mb-4\">\n      <div className=\"max-w-6xl mx-auto px-2 sm:px-4 md:px-6 py-3 flex flex-col md:flex-row md:items-center md:justify-between gap-3\">\n        {/* Left: logo + title */}\n        <div className=\"flex items-center gap-3\">\n          {logo ? (\n            <img\n              src={logo}\n              alt=\"logo\"\n              className=\"h-10 w-10 object-contain\"\n            />\n          ) : (\n            <div className=\"h-10 w-10 bg-sky-100 rounded flex items-center justify-center text-sky-600\">\n              Logo\n            </div>\n          )}\n          <h1 className=\"text-lg md:text-xl font-semibold text-sky-600\">\n            ERP\n          </h1>\n        </div>\n\n        {/* Right: nav */}\n        <nav className=\"flex flex-wrap items-center gap-2\">\n          <button\n            className=\"px-3 py-1 rounded-md hover:bg-sky-50 transition text-xs sm:text-sm\"\n            onClick={() => setRoute('dashboard')}\n          >\n            {t('Dashboard')}\n          </button>\n          <button\n            className=\"px-3 py-1 rounded-md hover:bg-sky-50 transition text-xs sm:text-sm\"\n            onClick={() => setRoute('products')}\n          >\n            {t('products')}\n          </button>\n          <button\n            className=\"px-3 py-1 rounded-md hover:bg-sky-50 transition text-xs sm:text-sm\"\n            onClick={() => setRoute('sales')}\n          >\n            {t('sales')}\n          </button>\n          <button\n            className=\"px-3 py-1 rounded-md hover:bg-sky-50 transition text-xs sm:text-sm\"\n            onClick={() => setRoute('purchases')}\n          >\n            {t('purchases')}\n          </button>\n          <button\n            className=\"px-3 py-1 rounded-md hover:bg-sky-50 transition text-xs sm:text-sm\"\n            onClick={() => setRoute('reports')}\n          >\n            {t('reports')}\n          </button>\n          <button\n            className=\"px-3 py-1 rounded-md hover:bg-sky-50 transition text-xs sm:text-sm\"\n            onClick={() => setRoute('debits')}\n          >\n            {t('debits')}\n          </button>\n          <button\n            className=\"px-3 py-1 rounded-md hover:bg-sky-50 transition text-xs sm:text-sm\"\n            onClick={() => setRoute('settings')}\n          >\n            {t('settings')}\n          </button>\n\n          <select\n            value={lang}\n            onChange={e => {\n              setLang(e.target.value);\n              localStorage.setItem('erp_lang', e.target.value);\n            }}\n            className=\"border rounded px-2 py-1 text-xs sm:text-sm\"\n          >\n            <option value=\"en\">EN</option>\n            <option value=\"ur\">UR</option>\n          </select>\n\n          <button\n            className=\"px-3 py-1 rounded-md bg-sky-600 text-white hover:bg-sky-700 transition text-xs sm:text-sm\"\n            onClick={() => {\n              setUser(null);\n              localStorage.removeItem('erp_lang');\n            }}\n          >\n            {t('login')}\n          </button>\n        </nav>\n      </div>\n    </header>\n  );\n}\n//fuction login\n\nfunction Login({ onSuccess, logo, t, setLang, lang }){\n  const [u, setU] = useState('admin');\n  const [p, setP] = useState('admin');\n  const [err, setErr] = useState('');\n  \n\n\n  async function submit(e){\n    e.preventDefault();\n    try{\n      const res = await fetch('http://localhost:4000/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({ username: u, password: p })});\n      if(!res.ok) throw new Error('login failed');\n      const j = await res.json();\n      onSuccess(j.user);\n    }catch(err){\n      setErr('Wrong Password or Username');\n    }\n  }\n\n  return (\n    <div className=\"flex items-center justify-center py-12\">\n      <div className=\"w-full max-w-md bg-white rounded-xl shadow-md p-8\">\n        <div className=\"flex justify-center mb-4\">{logo? <img src={logo} className=\"h-24 w-24 object-contain\" alt=\"logo\"/> : <div className=\"h-24 w-24 bg-sky-100 rounded-full flex items-center justify-center text-sky-600\">Logo</div>}</div>\n        <h2 className=\"text-center text-xl font-semibold text-gray-700 mb-4\">{t('login')}</h2>\n        <form onSubmit={submit} className=\"space-y-4\">\n          <input placeholder={t('username')} className=\"w-full px-4 py-2 border rounded-md focus:outline-sky-300\" value={u} onChange={e=>setU(e.target.value)} />\n          <input type=\"password\" placeholder={t('password')} className=\"w-full px-4 py-2 border rounded-md focus:outline-sky-300\" value={p} onChange={e=>setP(e.target.value)} />\n          <div className=\"flex gap-2 items-center\">\n            <select value={lang} onChange={e=>{ setLang(e.target.value); localStorage.setItem('erp_lang', e.target.value); }} className=\"border p-1 rounded\">\n              <option value=\"en\">EN</option>\n              <option value=\"ur\">UR</option>\n            </select>\n            <button className=\"w-full py-2 bg-sky-600 text-white rounded-md hover:bg-sky-700 transition\">{t('loginBtn')}</button>\n          </div>\n        </form>\n        {err && <p className=\"text-red-500 mt-3\">{err}</p>}\n      </div>\n    </div>\n  );\n}\n\n/* Dashboard */\n\nfunction Dashboard({ t }) {\n  const [activeTab, setActiveTab] = useState(\"customers\"); // 'customers' | 'stock'\n  const [sales, setSales] = useState([]);\n  const [selectedCustomerName, setSelectedCustomerName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState(\"\");\n  const logoUrl = localStorage.getItem(\"erp_logo\") || \"\";\n\n  // Stock-related state\n  const [stock, setStock] = useState([]);\n  const [movements, setMovements] = useState([]);\n  const [stockLoading, setStockLoading] = useState(false);\n  const [stockErr, setStockErr] = useState(\"\");\n\n  // Initial load\n  useEffect(() => {\n    loadSales();\n    loadStockData();\n  }, []);\n\n  // ---------------- SALES LOADING ----------------\n  async function loadSales() {\n    try {\n      setLoading(true);\n      setErr(\"\");\n      const res = await fetch(\"http://localhost:4000/api/sales\");\n      const j = await res.json();\n      if (!j.ok) {\n        setErr(j.message || \"Failed to load sales\");\n        return;\n      }\n      setSales(j.sales || []);\n    } catch (e) {\n      console.error(e);\n      setErr(\"Failed to load sales\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // --------------- STOCK LOADING (from purchases + sales) ---------------\n  async function loadStockData() {\n    try {\n      setStockLoading(true);\n      setStockErr(\"\");\n\n      const [pRes, sRes] = await Promise.all([\n        fetch(\"http://localhost:4000/api/purchases\"),\n        fetch(\"http://localhost:4000/api/sales\"),\n      ]);\n\n      const [pJson, sJson] = await Promise.all([pRes.json(), sRes.json()]);\n\n      if (!pJson.ok) throw new Error(pJson.message || \"Failed to load purchases\");\n      if (!sJson.ok) throw new Error(sJson.message || \"Failed to load sales\");\n\n      const purchases = pJson.purchases || [];\n      const salesData = sJson.sales || [];\n\n      const mvts = [];\n\n      // Purchases → increase stock\n      purchases.forEach((p) => {\n        (p.products || p.lines || []).forEach((line) => {\n          mvts.push({\n            date: p.date,\n            type: \"Purchase\",\n            productName: line.productName || \"\",\n            bagWeight: Number(line.weight || 0),\n            bagsDelta: Number(line.qty || line.quantity || 0),\n          });\n        });\n      });\n\n      // Sales → decrease stock\n      salesData.forEach((s) => {\n        (s.products || s.lines || []).forEach((line) => {\n          mvts.push({\n            date: s.date,\n            type: \"Sale\",\n            productName: line.productName || \"\",\n            bagWeight: Number(line.weight || 0),\n            bagsDelta: Number(line.quantity || line.qty || 0),\n          });\n        });\n      });\n\n      setMovements(mvts);\n      setStock(mvts); // optional, if you use `stock` elsewhere\n    } catch (e) {\n      console.error(e);\n      setStockErr(e.message || \"Failed to load stock data\");\n    } finally {\n      setStockLoading(false);\n    }\n  }\n\n  // OLD stock loader hitting /api/stock, /api/stock/movements (keep if you really need it)\n  async function loadStock() {\n    try {\n      setStockLoading(true);\n      setStockErr(\"\");\n\n      const [resStock, resMov] = await Promise.all([\n        fetch(\"http://localhost:4000/api/stock\"),\n        fetch(\"http://localhost:4000/api/stock/movements\"),\n      ]);\n\n      const jStock = await resStock.json();\n      const jMov = await resMov.json();\n\n      if (!jStock.ok) throw new Error(jStock.message || \"Failed stock\");\n      if (!jMov.ok) throw new Error(jMov.message || \"Failed movements\");\n\n      setStock(jStock.stock || []);\n      setMovements(jMov.movements || []);\n    } catch (e) {\n      console.error(e);\n      setStockErr(\"Failed to load stock info\");\n    } finally {\n      setStockLoading(false);\n    }\n  }\n\n  // ---------------- CUSTOMER GROUPING (latest pending only) ----------------\n  const customerGroup = new Map();\n\n  (sales || []).forEach((s) => {\n    const name = s.customerName || \"Unknown\";\n    if (!customerGroup.has(name)) {\n      customerGroup.set(name, {\n        customerName: name,\n        invoices: [],\n        totalGrand: 0,\n        totalPaid: 0,\n      });\n    }\n\n    const entry = customerGroup.get(name);\n    entry.invoices.push(s);\n    entry.totalGrand += Number(s.grandTotal || 0);\n    entry.totalPaid += Number(s.paidNow || 0);\n  });\n\n  const customersWithPending = Array.from(customerGroup.values())\n    .map((entry) => {\n      // sort by date to find LAST invoice\n      const sortedInvoices = [...entry.invoices].sort(\n        (a, b) => new Date(a.date || 0) - new Date(b.date || 0)\n      );\n      const last = sortedInvoices[sortedInvoices.length - 1];\n      const latestPending = Number(last?.pending || 0);\n\n      return {\n        ...entry,\n        invoices: sortedInvoices,\n        totalPending: latestPending, // only latest remaining counts\n      };\n    })\n    .filter((entry) => entry.totalPending > 0)\n    .sort((a, b) => b.totalPending - a.totalPending);\n\n  const selectedCustomer =\n    customersWithPending.find(\n      (c) => c.customerName === selectedCustomerName\n    ) || null;\n    \n\n    // === STOCK SUMMARY (per product + bag weight) ===\n  const stockSummaryMap = new Map();\n\n  (movements || []).forEach((mv) => {\n    const name = mv.productName || '';\n    const bagWt = Number(mv.bagWeight || mv.bagWt || 0);\n    if (!name || !bagWt) return;\n\n    const key = `${name}||${bagWt}`;\n    if (!stockSummaryMap.has(key)) {\n      stockSummaryMap.set(key, {\n        productName: name,\n        bagWeight: bagWt,\n        purchased: 0,\n        sold: 0,\n      });\n    }\n    const row = stockSummaryMap.get(key);\n\n    const qty = Number(mv.bagsDelta || mv.qty || mv.bags || 0);\n\n    if (mv.type === 'Purchase') {\n      row.purchased += Math.abs(qty);\n    } else if (mv.type === 'Sale') {\n      row.sold += Math.abs(qty);\n    }\n  });\n\n  // rows by product + bag weight\n  const stockSummaryRows = Array.from(stockSummaryMap.values())\n    .map((r) => ({\n      ...r,\n      available: r.purchased - r.sold,\n    }))\n    .sort(\n      (a, b) =>\n        a.productName.localeCompare(b.productName) ||\n        a.bagWeight - b.bagWeight\n    );\n\n  const maxStockValue =\n    stockSummaryRows.length === 0\n      ? 1\n      : Math.max(\n          ...stockSummaryRows.map((r) =>\n            Math.max(r.purchased, r.sold, r.available)\n          ),\n          1\n        );\n\n  // === AGGREGATE BY PRODUCT (ignore bag weight) ===\n  const productTotalsMap = new Map();\n  stockSummaryRows.forEach((r) => {\n    if (!productTotalsMap.has(r.productName)) {\n      productTotalsMap.set(r.productName, {\n        productName: r.productName,\n        purchased: 0,\n        sold: 0,\n        available: 0,\n      });\n    }\n    const entry = productTotalsMap.get(r.productName);\n    entry.purchased += r.purchased;\n    entry.sold += r.sold;\n    entry.available += r.available;\n  });\n\n  const productTotals = Array.from(productTotalsMap.values()).sort(\n    (a, b) => b.available - a.available\n  );\n\n  const maxProductValue =\n    productTotals.length === 0\n      ? 1\n      : Math.max(\n          ...productTotals.map((p) =>\n            Math.max(p.purchased, p.sold, p.available)\n          ),\n          1\n        );\n\n  const totalAvailableBags = productTotals.reduce(\n    (sum, p) => sum + Math.max(p.available, 0),\n    0\n  );\n\n  const totalProductsInStock = productTotals.filter(\n    (p) => p.available > 0\n  ).length;\n\n  // simple low-stock rule: available > 0 and <= 20 bags\n  const lowStockCount = productTotals.filter(\n    (p) => p.available > 0 && p.available <= 20\n  ).length;\n\n  // show only top N in the big bars (to avoid mess)\n  const topProductsForBars = productTotals.slice(0, 8);\n  // ================= STOCK SUMMARY (per product + bag weight) =================   \n\n  \n\n  // ---------------- PRINT / DELETE HELPERS ----------------\n  function printInvoiceForRecord(record) {\n    if (!record) return;\n\n    const dateTime = record.date\n      ? new Date(record.date).toLocaleString()\n      : new Date().toLocaleString();\n\n    const items = record.products || record.lines || [];\n    const customerTotal = Number(record.customerTotal || 0);\n    const previousPending = Number(record.previousPending || 0);\n    const grandTotal = Number(record.grandTotal || 0);\n    const paidNow = Number(record.paidNow || 0);\n    const remaining = Number(record.pending || 0);\n\n    const html = `\n      <html><body>\n      <img src='${logoUrl}' style='display:block;margin:0 auto;width:180px;opacity:0.9' />\n      <h2 style='text-align:center'>Invoice</h2>\n      <div>Customer: ${record.customerName || ''}</div>\n      <div>Date &amp; Time: ${dateTime}</div>\n      <table border='1' style='width:100%;border-collapse:collapse'>\n        <tr>\n          <th>#</th>\n          <th>Product</th>\n          <th>Qty</th>\n          <th>Weight</th>\n          <th>Price</th>\n          <th>Line Total</th>\n        </tr>\n        ${items\n          .map(\n            (it, i) => `\n          <tr>\n            <td>${i + 1}</td>\n            <td>${it.productName || ''}</td>\n            <td>${it.quantity || it.qty || 0}</td>\n            <td>${it.weight || 0}</td>\n            <td>${it.pricePerKg || it.price || 0}</td>\n            <td>${Number(\n              it.lineTotal ||\n                Number(it.quantity || it.qty || 0) *\n                  \n                  Number(it.pricePerKg || it.price || 0)\n            ).toFixed(2)}</td>\n          </tr>`\n          )\n          .join('')}\n      </table>\n      <h3>Customer Total: ${customerTotal.toFixed(2)}</h3>\n      <div>Previous Pending: ${previousPending.toFixed(2)}</div>\n      <div>Grand Total: ${grandTotal.toFixed(2)}</div>\n      <div>Paid: ${paidNow.toFixed(2)}</div>\n      <div>Remaining: ${remaining.toFixed(2)}</div>\n      </body></html>\n    `;\n\n    const w = window.open(\"\", \"_blank\");\n    w.document.write(html);\n    w.document.close();\n    setTimeout(() => w.print(), 300);\n  }\n\n  async function deleteSaleFromDashboard(id) {\n    if (!window.confirm(\"Delete this sale?\")) return;\n    try {\n      const res = await fetch(`http://localhost:4000/api/sales/${id}`, {\n        method: \"DELETE\",\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || \"Failed to delete sale\");\n        return;\n      }\n      setSales((prev) => prev.filter((s) => s.id !== id));\n    } catch (e) {\n      console.error(e);\n      alert(\"Error deleting sale\");\n    }\n  }\n\n  // ---------------- JSX ----------------\n  return (\n    <div>\n      <h2 className=\"text-2xl font-semibold mb-4\">Dashboard</h2>\n\n      {/* Tabs */}\n      <div className=\"flex mb-4 gap-2\">\n        <button\n          onClick={() => setActiveTab(\"customers\")}\n          className={\n            \"px-4 py-2 rounded text-sm \" +\n            (activeTab === \"customers\"\n              ? \"bg-sky-600 text-white\"\n              : \"bg-white text-sky-700 border\")\n          }\n        >\n          Customer Records\n        </button>\n        <button\n          onClick={() => setActiveTab(\"stock\")}\n          className={\n            \"px-4 py-2 rounded text-sm \" +\n            (activeTab === \"stock\"\n              ? \"bg-sky-600 text-white\"\n              : \"bg-white text-sky-700 border\")\n          }\n        >\n          Stocks Updates\n        </button>\n\n        {/* Top-right refresh – refreshes CURRENT tab only */}\n        <button\n          onClick={() => {\n            if (activeTab === \"customers\") {\n              loadSales();\n            } else if (activeTab === \"stock\") {\n              loadStockData(); // use stockData version\n            }\n          }}\n          className=\"ml-auto px-3 py-2 text-xs bg-gray-100 border rounded hover:bg-gray-200\"\n        >\n          Refresh\n        </button>\n      </div>\n\n      {/* Loading / Error per tab */}\n      {activeTab === \"customers\" && loading && (\n        <p className=\"text-sm text-gray-500 mb-2\">Loading sales…</p>\n      )}\n      {activeTab === \"customers\" && err && (\n        <p className=\"text-sm text-red-600 mb-2\">{err}</p>\n      )}\n\n      {activeTab === \"stock\" && stockLoading && (\n        <p className=\"text-sm text-gray-500 mb-2\">Loading stock…</p>\n      )}\n      {activeTab === \"stock\" && stockErr && (\n        <p className=\"text-sm text-red-600 mb-2\">{stockErr}</p>\n      )}\n\n      {/* ===================== Customer Records Tab ===================== */}\n      {activeTab === \"customers\" && (\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n          {/* Left: Customers with remaining */}\n          <div className=\"bg-white p-4 rounded shadow lg:col-span-1\">\n            <h3 className=\"font-semibold mb-2 text-sm\">\n              Customers with Remaining Amount\n            </h3>\n\n            {customersWithPending.length === 0 ? (\n              <p className=\"text-xs text-gray-500\">\n                No customers with pending amounts.\n              </p>\n            ) : (\n              <table className=\"w-full text-xs\">\n                <thead className=\"bg-gray-100\">\n                  <tr>\n                    <th className=\"p-2 text-left\">Customer</th>\n                    <th className=\"p-2 text-right\">Pending</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {customersWithPending.map((c) => (\n                    <tr\n                      key={c.customerName}\n                      className={\n                        \"border-t cursor-pointer \" +\n                        (c.customerName === selectedCustomerName\n                          ? \"bg-sky-50\"\n                          : \"\")\n                      }\n                      onClick={() => setSelectedCustomerName(c.customerName)}\n                    >\n                      <td className=\"p-2\">{c.customerName}</td>\n                      <td className=\"p-2 text-right\">\n                        {c.totalPending.toFixed(2)}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            )}\n          </div>\n\n          {/* Right: Selected customer details */}\n          <div className=\"bg-white p-4 rounded shadow lg:col-span-2\">\n            {!selectedCustomer ? (\n              <p className=\"text-sm text-gray-500\">\n                Select a customer on the left to see full record of their\n                purchases, paid amounts, and remaining balance.\n              </p>\n            ) : (\n              <>\n                {/* summary header */}\n                <div className=\"flex flex-wrap justify-between mb-3 text-sm\">\n                  <div>\n                    <div className=\"font-semibold\">\n                      {selectedCustomer.customerName}\n                    </div>\n                    <div className=\"text-gray-500 text-xs\">\n                      Total Pending:{\" \"}\n                      <strong>\n                        {selectedCustomer.totalPending.toFixed(2)}\n                      </strong>\n                    </div>\n                  </div>\n                  <div className=\"text-xs text-right space-y-1\">\n                    <div>\n                      Total Grand:{\" \"}\n                      <strong>\n                        {selectedCustomer.totalGrand.toFixed(2)}\n                      </strong>\n                    </div>\n                    <div>\n                      Total Paid:{\" \"}\n                      <strong>\n                        {selectedCustomer.totalPaid.toFixed(2)}\n                      </strong>\n                    </div>\n                  </div>\n                </div>\n\n                {/* invoices for this customer */}\n                {selectedCustomer.invoices.map((inv) => (\n                  <div\n                    key={inv.id}\n                    className=\"border rounded mb-3 p-3 text-xs\"\n                  >\n                    <div className=\"flex flex-wrap justify-between mb-1\">\n                      <div>\n                        <span className=\"font-semibold\">Date: </span>\n                        {inv.date}\n                      </div>\n                      <div>\n                        <span className=\"font-semibold\">Grand: </span>\n                        {inv.grandTotal} &nbsp; | &nbsp;\n                        <span className=\"font-semibold\">Paid: </span>\n                        {inv.paidNow} &nbsp; | &nbsp;\n                        <span className=\"font-semibold\">Remaining: </span>\n                        {inv.pending}\n                      </div>\n                    </div>\n\n                    {/* Products table */}\n                    <table className=\"w-full text-[11px] border mt-1\">\n                      <thead className=\"bg-gray-100\">\n                        <tr>\n                          <th className=\"border px-1 py-0.5\">#</th>\n                          <th className=\"border px-1 py-0.5\">Product</th>\n                          <th className=\"border px-1 py-0.5\">Qty</th>\n                          <th className=\"border px-1 py-0.5\">Weight</th>\n                          <th className=\"border px-1 py-0.5\">Price</th>\n                          <th className=\"border px-1 py-0.5\">Line Total</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {(inv.products || inv.lines || []).map((p, idx) => (\n                          <tr key={idx}>\n                            <td className=\"border px-1 py-0.5\">{idx + 1}</td>\n                            <td className=\"border px-1 py-0.5\">\n                              {p.productName}\n                            </td>\n                            <td className=\"border px-1 py-0.5\">\n                              {p.quantity || p.qty}\n                            </td>\n                            <td className=\"border px-1 py-0.5\">\n                              {p.weight}\n                            </td>\n                            <td className=\"border px-1 py-0.5\">\n                              {p.pricePerKg || p.price}\n                            </td>\n                            <td className=\"border px-1 py-0.5\">\n                              {p.lineTotal}\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n\n                    {/* Actions */}\n                    <div className=\"mt-2 flex justify-end gap-2\">\n                      <button\n                        onClick={() => printInvoiceForRecord(inv)}\n                        className=\"px-2 py-1 bg-indigo-600 text-white rounded\"\n                      >\n                        Print Invoice\n                      </button>\n                      <button\n                        onClick={() => deleteSaleFromDashboard(inv.id)}\n                        className=\"px-2 py-1 bg-red-600 text-white rounded\"\n                      >\n                        🗑 Delete\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </>\n            )}\n          </div>\n        </div>\n      )}\n            {/* ===================== Stock Updates Tab ===================== */}\n      {activeTab === 'stock' && (\n        <div className=\"bg-white p-4 rounded shadow\">\n          {/* Header + refresh */}\n          <div className=\"flex items-center mb-4\">\n            <h3 className=\"font-semibold text-base\">Stock Updates</h3>\n            <button\n              onClick={loadStockData}\n              className=\"ml-auto px-3 py-1 text-xs border rounded hover:bg-gray-50\"\n            >\n              Refresh\n            </button>\n          </div>\n\n          {/* Loading / error */}\n          {stockLoading && (\n            <p className=\"text-xs text-gray-500 mb-2\">Loading stock…</p>\n          )}\n          {stockErr && (\n            <p className=\"text-xs text-red-600 mb-2\">{stockErr}</p>\n          )}\n\n          {/* ===== KPI cards ===== */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3 mb-6 text-sm\">\n            <div className=\"border rounded-lg px-3 py-2 bg-sky-50\">\n              <div className=\"text-[11px] text-sky-700 uppercase\">\n                Total Products in Stock\n              </div>\n              <div className=\"text-xl font-semibold\">\n                {totalProductsInStock}\n              </div>\n            </div>\n            <div className=\"border rounded-lg px-3 py-2 bg-emerald-50\">\n              <div className=\"text-[11px] text-emerald-700 uppercase\">\n                Total Available Bags\n              </div>\n              <div className=\"text-xl font-semibold\">\n                {totalAvailableBags}\n              </div>\n            </div>\n            <div className=\"border rounded-lg px-3 py-2 bg-amber-50\">\n              <div className=\"text-[11px] text-amber-700 uppercase\">\n                Low Stock Items (&le; 20 bags)\n              </div>\n              <div className=\"text-xl font-semibold\">\n                {lowStockCount}\n              </div>\n            </div>\n          </div>\n\n          {stockSummaryRows.length === 0 ? (\n            <p className=\"text-xs text-gray-500\">\n              No stock calculated yet. Add some purchases / sales first.\n            </p>\n          ) : (\n            <>\n              {/* ===== Main layout: table + bars ===== */}\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                {/* Left: grouped table by product & bag weight */}\n                <div>\n                  <h4 className=\"font-semibold text-sm mb-2\">\n                    Available Stock (by product &amp; bag weight)\n                  </h4>\n                  <table className=\"w-full text-xs mb-4\">\n                    <thead className=\"bg-gray-100\">\n                      <tr>\n                        <th className=\"p-2 text-left\">Product</th>\n                        <th className=\"p-2 text-right\">Bag Wt</th>\n                        <th className=\"p-2 text-right\">Purchased</th>\n                        <th className=\"p-2 text-right\">Sold</th>\n                        <th className=\"p-2 text-right\">Available</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {stockSummaryRows.map((r) => (\n                        <tr\n                          key={`${r.productName}-${r.bagWeight}`}\n                          className=\"border-t\"\n                        >\n                          <td className=\"p-2\">{r.productName}</td>\n                          <td className=\"p-2 text-right\">{r.bagWeight}</td>\n                          <td className=\"p-2 text-right\">{r.purchased}</td>\n                          <td className=\"p-2 text-right\">{r.sold}</td>\n                          <td\n                            className={\n                              'p-2 text-right ' +\n                              (r.available < 0\n                                ? 'text-red-600 font-semibold'\n                                : '')\n                            }\n                          >\n                            {r.available}\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n\n                {/* Right: bar “charts” per product (aggregated) */}\n                <div>\n                  <h4 className=\"font-semibold text-sm mb-2\">\n                    Stock Overview by Product (bags)\n                  </h4>\n\n                  {topProductsForBars.length === 0 ? (\n                    <p className=\"text-xs text-gray-500\">\n                      No products with stock yet.\n                    </p>\n                  ) : (\n                    <div className=\"space-y-3\">\n                      {topProductsForBars.map((p) => (\n                        <div key={`prod-bar-${p.productName}`}>\n                          <div className=\"flex justify-between text-[11px] mb-1\">\n                            <span>{p.productName}</span>\n                            <span>Available: {p.available}</span>\n                          </div>\n\n                          <div className=\"h-3 bg-gray-100 rounded overflow-hidden flex\">\n                            {/* Purchased – blue */}\n                            <div\n                              style={{\n                                width:\n                                  (p.purchased / maxProductValue) * 100 + '%',\n                              }}\n                              className=\"bg-blue-500\"\n                              title={`Purchased: ${p.purchased}`}\n                            />\n                            {/* Sold – red */}\n                            <div\n                              style={{\n                                width:\n                                  (p.sold / maxProductValue) * 100 + '%',\n                              }}\n                              className=\"bg-red-400\"\n                              title={`Sold: ${p.sold}`}\n                            />\n                            {/* Available – green */}\n                            <div\n                              style={{\n                                width:\n                                  (Math.max(p.available, 0) /\n                                    maxProductValue) *\n                                    100 + '%',\n                              }}\n                              className=\"bg-green-500\"\n                              title={`Available: ${p.available}`}\n                            />\n                          </div>\n\n                          <div className=\"flex justify-between text-[10px] text-gray-500 mt-0.5\">\n                            <span>Purchased: {p.purchased}</span>\n                            <span>Sold: {p.sold}</span>\n                            <span>Available: {p.available}</span>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n\n                  {/* small legend */}\n                  <div className=\"flex gap-3 text-[10px] text-gray-500 mt-3\">\n                    <div className=\"flex items-center gap-1\">\n                      <span className=\"w-3 h-3 bg-blue-500 inline-block rounded-sm\" />{' '}\n                      Purchased\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <span className=\"w-3 h-3 bg-red-400 inline-block rounded-sm\" />{' '}\n                      Sold\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                      <span className=\"w-3 h-3 bg-green-500 inline-block rounded-sm\" />{' '}\n                      Available\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\n/* Products */\nfunction Products({ t }){\n  const [name, setName] = useState('');\n  const [quantity, setQuantity] = useState(1);\n  const [list, setList] = useState([]);\n  useEffect(()=>{ fetch('http://localhost:4000/5api/products').then(r=>r.json()).then(j=>setList(j.products||[])).catch(()=>{}); },[]);\n  async function add(){ if(!name) return alert('Enter product name'); const res = await fetch('http://localhost:4000/api/products',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({ name, quantity })}); const j = await res.json(); if(j.ok){ setList(prev=>[...prev, j.prod]); setName(''); setQuantity(1); } }\n  return (\n    <div>\n      <h2 className=\"text-2xl font-semibold mb-4\">{t('products')}</h2>\n      <div className=\"bg-white p-4 rounded shadow mb-4\">\n        <div className=\"grid grid-cols-3 gap-2\">\n          <input placeholder=\"Product name\" value={name} onChange={e=>setName(e.target.value)} className=\"border p-2 rounded\" />\n          <input type=\"number\" value={quantity} onChange={e=>setQuantity(Number(e.target.value))} className=\"border p-2 rounded\" />\n          <button onClick={add} className=\"bg-sky-600 text-white px-4 rounded hover:bg-sky-700 transition\">{t('addProduct')}</button>\n        </div>\n      </div>\n      <div className=\"bg-white p-4 rounded shadow\">\n        <h3 className=\"font-semibold mb-2\">Available Products</h3>\n        <table className=\"w-full\"><thead><tr><th>ID</th><th>Name</th><th>Qty</th></tr></thead><tbody>{list.map(p=>(<tr key={p.id}><td className=\"p-2\">{p.id}</td><td>{p.name}</td><td>{p.quantity}</td></tr>))}</tbody></table>\n      </div>\n    </div>\n  );\n}\n\n function Sales({ t }) {\n  const [customers, setCustomers] = useState([]);\n  const [productsList, setProductsList] = useState([]);\n  const [selectedCustomerId, setSelectedCustomerId] = useState('');\n  const [customerName, setCustomerName] = useState('');\n  const [previousPending, setPreviousPending] = useState(0);\n  const [items, setItems] = useState([\n    { productName: '', quantity: 1, weight: 0, pricePerKg: 0 },\n  ]);\n  const [paidNow, setPaidNow] = useState(0);\n  const [calc, setCalc] = useState(null);\n  const [salesRecords, setSalesRecords] = useState([]);\n  const [editingIndex, setEditingIndex] = useState(null);\n  const [editingId, setEditingId] = useState(null);\n  useEffect(() => {\n    fetch('http://localhost:4000/api/customers')\n      .then((r) => r.json())\n      .then((j) => setCustomers(j.customers || []))\n      .catch(() => {});\n\n    fetch('http://localhost:4000/api/products')\n      .then((r) => r.json())\n      .then((j) => setProductsList(j.products || []))\n      .catch(() => {});\n\n    // load existing sales for list + delete\n    fetch('http://localhost:4000/api/sales')\n      .then((r) => r.json())\n      .then((j) => {\n        if (j.ok) setSalesRecords(j.sales || []);\n      })\n      .catch(() => {});\n  }, []);\n\n  function addCustomer() {\n    const name = prompt('Customer name');\n    if (!name) return;\n    const location = prompt('Location') || '';\n    const prev = Number(prompt('Previous Pending') || 0);\n    fetch('http://localhost:4000/api/customers', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ name, location, previousPending: prev }),\n    })\n      .then((r) => r.json())\n      .then((j) => {\n        if (j.ok) {\n          setCustomers((prevList) => [...prevList, j.customer]);\n          alert('Customer added');\n        }\n      });\n  }\n\n  function addItem() {\n    setItems((prev) => [\n      ...prev,\n      { productName: '', quantity: 1, weight: 0, pricePerKg: 0 },\n    ]);\n  }\n\n  function updateItem(i, key, value) {\n    const copy = [...items];\n    copy[i][key] = value;\n    setItems(copy);\n  }\n\n  function onSelectCustomer(id) {\n    setSelectedCustomerId(id);\n    if (!id) {\n      setPreviousPending(0);\n      setCustomerName('');\n      return;\n    }\n    const c = customers.find((x) => x.id === Number(id));\n    if (c) {\n      setCustomerName(c.name);\n      setPreviousPending(c.previousPending || 0);\n    }\n  }\n  async function calculate() {\n    const res = await fetch('http://localhost:4000/api/calculate-invoice', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ products: items, previousPending }),\n    });\n    const j = await res.json();\n    setCalc(j);\n    // paidNow + remaining are always derived below, so when you hit Calculate\n    // it recomputes customerTotal -> grandTotal -> remaining\n  }\n  // ---- totals / derived values ----\n  const customerTotal =\n    calc && typeof calc.customerTotal !== 'undefined'\n      ? Number(calc.customerTotal || 0)\n      : items.reduce(\n          (s, it) =>\n            s +\n            Number(it.quantity || 0) *\n              \n              Number(it.pricePerKg || 0),\n          0\n        );\n\n  const grandTotal = +(customerTotal + Number(previousPending || 0)).toFixed(\n    2\n  );\n  const remaining = +(grandTotal - Number(paidNow || 0)).toFixed(2);\n  const logoUrl = localStorage.getItem('erp_logo') || '';\n    function printGate() {\n    const html = `\n      <html><body>\n      <img src='${logoUrl}' style='display:block;margin:0 auto;width:220px;opacity:0.9' />\n      <h2 style='text-align:center'>Gate Pass</h2>\n      <div>Customer: ${customerName}</div>\n      <div>Time: ${new Date().toLocaleString()}</div>\n      <table border='1' style='width:100%;border-collapse:collapse'>\n        <tr>\n          <th>#</th>\n          <th>Product</th>\n          <th>Weight</th>\n          <th>Qty</th>\n        </tr>\n        ${items.map((it, i) =>\n          `<tr>\n            <td>${i + 1}</td>\n            <td>${it.productName}</td>\n            <td>${it.quantity}</td>\n            <td>${it.weight}</td>\n          </tr>`\n        ).join('')}\n      </table>\n      </body></html>`;\n    const w = window.open('', '_blank');\n    w.document.write(html);\n    w.document.close();\n    setTimeout(() => w.print(), 300);\n  }\n\n  function printInvoice(record) {\n    const dateTime =\n      record && record.date\n        ? new Date(record.date).toLocaleString()\n        : new Date().toLocaleString();\n\n    const html = `\n      <html><body>\n      <img src='${logoUrl}' style='display:block;margin:0 auto;width:180px;opacity:0.9' />\n      <h2 style='text-align:center'>Invoice</h2>\n      <div>Customer: ${customerName}</div>\n      <div>Date &amp; Time: ${dateTime}</div>\n      <table border='1' style='width:100%;border-collapse:collapse'>\n        <tr>\n          <th>#</th>\n          <th>Product</th>\n          <th>Qty</th>\n          <th>Weight</th>\n          <th>Price</th>\n          <th>Line Total</th>\n        </tr>\n        ${items\n          .map(\n            (it, i) => `\n          <tr>\n            <td>${i + 1}</td>\n            <td>${it.productName}</td>\n            <td>${it.quantity}</td>\n            <td>${it.weight}</td>\n            <td>${it.pricePerKg}</td>\n            <td>${(\n              Number(it.quantity || 0) *\n              \n              Number(it.pricePerKg || 0)\n            ).toFixed(2)}</td>\n          </tr>`\n          )\n          .join('')}\n      </table>\n      <h3>Customer Total: ${customerTotal.toFixed(2)}</h3>\n      <div>Previous Pending: ${Number(previousPending || 0).toFixed(2)}</div>\n      <div>Grand Total: ${grandTotal.toFixed(2)}</div>\n      <div>Paid: ${Number(paidNow || 0).toFixed(2)}</div>\n      <div>Remaining: ${remaining.toFixed(2)}</div>\n      </body></html>\n    `;\n    const w = window.open('', '_blank');\n    w.document.write(html);\n    w.document.close();\n    setTimeout(() => w.print(), 300);\n  }\n\n  async function saveAndPrint() {\n    const res = await fetch('http://localhost:4000/api/save-sale', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        customerId: selectedCustomerId,\n        customerName,\n        previousPending,\n        products: items,\n        paidNow,\n      }),\n    });\n    const j = await res.json();\n    if (j.ok) {\n      alert(\n        'Saved. Remaining added to customer previous pending: ' +\n          j.record.pending\n      );\n      setSalesRecords((prev) => [...prev, j.record]);\n      fetch('http://localhost:4000/api/customers')\n        .then((r) => r.json())\n        .then((j2) => setCustomers(j2.customers || []))\n        .catch(() => {});\n      printInvoice(j.record); // only invoice window, not whole page\n    }\n  }\n\n  async function deleteSale(id) {\n    if (!window.confirm('Delete this sale?')) return;\n    const res = await fetch(`http://localhost:4000/api/sales/${id}`, {\n      method: 'DELETE',\n    });\n    const j = await res.json();\n    if (j.ok) {\n      setSalesRecords((prev) => prev.filter((s) => s.id !== id));\n    } else {\n      alert('Failed to delete sale');\n    }\n  }\n   \n  /* Sales Edit Function *//* Sales Edit Function */\n\n/* Sales Edit Function */\nfunction editSales(index) {\n  const s = salesRecords[index];\n  if (!s) return;\n\n  // Customer info\n  setSelectedCustomerId(s.customerId || \"\");\n  setCustomerName(s.customerName || \"\");\n  setPreviousPending(Number(s.previousPending || 0));\n  setPaidNow(Number(s.paidNow || 0));\n\n  // Items restore\n  const restoredItems = (s.products || s.lines || []).map((item) => ({\n    productName: item.productName || \"\",\n    quantity: Number(item.quantity ?? item.qty ?? 0),\n    weight: Number(item.weight ?? 0),\n    pricePerKg: Number(item.pricePerKg ?? item.price ?? 0),\n  }));\n\n  setItems(\n    restoredItems.length\n      ? restoredItems\n      : [{ productName: \"\", quantity: 1, weight: 0, pricePerKg: 0 }]\n  );\n\n  setEditingIndex(index);\n}\n\n  return (\n    <div>\n      <h2 className=\"text-2xl font-semibold mb-4\">Sales / Invoice</h2>\n      {/* Customer selection */}\n      <div className=\"bg-white/80 p-4 rounded shadow mb-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-2\">\n          <select\n            className=\"border p-2 rounded\"\n            value={selectedCustomerId}\n            onChange={(e) => onSelectCustomer(e.target.value)}\n          >\n            <option value=\"\">Select Customer</option>\n            {customers.map((c) => (\n              <option key={c.id} value={c.id}>\n                {c.name} - {c.location}\n              </option>\n            ))}\n          </select>\n          <input\n            placeholder=\"Customer Name\"\n            value={customerName}\n            onChange={(e) => setCustomerName(e.target.value)}\n            className=\"border p-2 rounded\"\n          />\n          <input\n            type=\"number\"\n            placeholder=\"Previous Pending\"\n            value={previousPending}\n            onChange={(e) => setPreviousPending(Number(e.target.value))}\n            className=\"border p-2 rounded\"\n          />\n        </div>\n        <div className=\"mt-3\">\n          <button\n            onClick={addCustomer}\n            className=\"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm\"\n          >\n            {t('addCustomer')}\n          </button>\n        </div>\n      </div>\n\n      {/* Items table */}\n      <div className=\"bg-white/80 p-4 rounded shadow mb-4\">\n        <table className=\"w-full text-sm\">\n          <thead className=\"bg-sky-100\">\n            <tr>\n              <th className=\"p-2 text-left\">#</th>\n              <th className=\"p-2 text-left\">Product</th>\n              <th className=\"p-2 text-right\">Qty</th>\n              <th className=\"p-2 text-right\">Weight</th>\n              <th className=\"p-2 text-right\">Price</th>\n              <th className=\"p-2 text-right\">Line Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((it, i) => (\n              <tr key={i} className=\"border-t\">\n                <td className=\"p-2\">{i + 1}</td>\n                <td className=\"p-2\">\n                  <input\n                    className=\"border p-1 rounded w-full\"\n                    value={it.productName}\n                    onChange={(e) =>\n                      updateItem(i, 'productName', e.target.value)\n                    }\n                    list=\"products-list\"\n                  />\n                </td>\n                <td className=\"p-2 text-right\">\n                  <input\n                    className=\"border p-1 rounded w-20 text-right\"\n                    type=\"number\"\n                    value={it.quantity}\n                    onChange={(e) =>\n                      updateItem(i, 'quantity', Number(e.target.value))\n                    }\n                  />\n                </td>\n                <td className=\"p-2 text-right\">\n                  <input\n                    className=\"border p-1 rounded w-24 text-right\"\n                    type=\"number\"\n                    value={it.weight}\n                    onChange={(e) =>\n                      updateItem(i, 'weight', Number(e.target.value))\n                    }\n                  />\n                </td>\n                <td className=\"p-2 text-right\">\n                  <input\n                    className=\"border p-1 rounded w-24 text-right\"\n                    type=\"number\"\n                    value={it.pricePerKg}\n                    onChange={(e) =>\n                      updateItem(i, 'pricePerKg', Number(e.target.value))\n                    }\n                  />\n                </td>\n                <td className=\"p-2 text-right\">\n                  {(\n                    Number(it.quantity || 0) *\n                   \n                    Number(it.pricePerKg || 0)\n                  ).toFixed(2)}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n\n        <datalist id=\"products-list\">\n          {productsList.map((p) => (\n            <option key={p.id} value={p.name} />\n          ))}\n        </datalist>\n\n        <div className=\"flex flex-wrap items-center gap-3 mt-4\">\n          <button\n            onClick={addItem}\n            className=\"px-3 py-1 bg-white border rounded hover:shadow transition text-sm\"\n          >\n            ➕ Add Item\n          </button>\n          <button\n            onClick={calculate}\n            className=\"px-3 py-1 bg-sky-600 text-white rounded hover:bg-sky-700 transition text-sm\"\n          >\n            Calculate\n          </button>\n          \n          <div className=\"ml-auto flex flex-wrap items-center gap-2\">\n            <label className=\"text-sm\">Paid Now</label>\n            <input\n              type=\"number\"\n              value={paidNow}\n              onChange={(e) => setPaidNow(Number(e.target.value))}\n              className=\"border p-1 rounded w-28 text-right\"\n            />\n            <button\n              onClick={saveAndPrint}\n              className=\"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition text-sm\"\n            >\n              {t('savePrint')}\n            </button>\n          </div>\n          \n<button\n            onClick={printGate}\n            className=\"px-3 py-1 bg-slate-700 text-white rounded hover:bg-slate-800 transition text-sm\"\n          >\n            Gate Pass\n          </button>\n        </div>\n        \n\n        {/* Summary */}\n        <div className=\"mt-4 p-3 bg-gray-50 rounded text-sm space-y-1\">\n          <div>\n            Customer Total:{' '}\n            <strong>{customerTotal.toFixed(2)}</strong>\n          </div><div>\n            Customer Total:{' '}\n            <strong>{customerTotal.toFixed(2)}</strong>\n          </div>\n          <div>\n            Previous Pending:{' '}\n            <strong>{Number(previousPending || 0).toFixed(2)}</strong>\n          </div>\n          <div>\n            Grand Total:{' '}\n            <strong>{grandTotal.toFixed(2)}</strong>\n          </div>\n          <div>\n            Paid Now:{' '}\n            <strong>{Number(paidNow || 0).toFixed(2)}</strong>\n          </div>\n          <div>\n            Remaining:{' '}\n            <strong>{remaining.toFixed(2)}</strong>\n          </div>\n        </div>\n      </div>\n\n      {/* Saved sales list */}\n      <div className=\"bg-white/80 p-4 rounded shadow\">\n        <h3 className=\"font-semibold mb-2 text-sm\">Saved Invoices</h3>\n        {salesRecords.length === 0 ? (\n          <p className=\"text-xs text-gray-500\">No invoices saved yet.</p>\n        ) : (\n          <table className=\"w-full text-xs\">\n            <thead className=\"bg-gray-100\">\n              <tr>\n                <th className=\"p-2 text-left\">#</th>\n                <th className=\"p-2 text-left\">Customer</th>\n                <th className=\"p-2 text-left\">Date/Time</th>\n                <th className=\"p-2 text-right\">Grand Total</th>\n                <th className=\"p-2 text-right\">Paid</th>\n                <th className=\"p-2 text-right\">Remaining</th>\n                <th className=\"p-2 text-center\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {salesRecords.map((s, idx) => (\n                <tr key={s.id} className=\"border-t\">\n                  <td className=\"p-2\">{idx + 1}</td>\n                  <td className=\"p-2\">{s.customerName}</td>\n                  <td className=\"p-2\">{s.date}</td>\n                  <td className=\"p-2 text-right\">{s.grandTotal}</td>\n                  <td className=\"p-2 text-right\">{s.paidNow}</td>\n                  <td className=\"p-2 text-right\">{s.pending}</td>\n                  <td className=\"p-2 text-center\">\n  <button\n    onClick={() => editSales(idx)}\n    className=\"px-2 py-1 text-xs bg-sky-600 text-white rounded mr-1\"\n  >\n    Action\n  </button>\n\n  <button\n    onClick={() => deleteSale(s.id)}\n    className=\"px-2 py-1 text-xs bg-red-600 text-white rounded\"\n  >\n    🗑\n  </button>\n</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n    </div>\n  );\n}\n/* ================= Vendor Purchase Management (standalone) ================= */\nfunction VendorPurchaseManagement({ t }) {\n  const [vendorsSummary, setVendorsSummary] = useState([]); // [{vendorName, totalPending, totalGrand, totalPaid, purchases: []}]\n  const [selectedVendorName, setSelectedVendorName] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState(\"\");\n\n  // Load all pending purchases from backend\n  useEffect(() => {\n    loadVendorPurchases();\n  }, []);\n\n  async function loadVendorPurchases() {\n    try {\n      setLoading(true);\n      setErr(\"\");\n\n      const res = await fetch(\"http://localhost:4000/api/purchases-with-pending\");\n      const j = await res.json();\n      if (!j.ok) {\n        throw new Error(j.message || \"Failed to load vendor purchases\");\n      }\n\n      const list = j.purchases || [];\n\n      // Group by vendorName\n      const map = new Map();\n      list.forEach((p) => {\n        const name = p.vendorName || \"Unknown\";\n        if (!map.has(name)) {\n          map.set(name, {\n            vendorName: name,\n            totalPending: 0,\n            totalGrand: 0,\n            totalPaid: 0,\n            purchases: [],\n          });\n        }\n        const g = map.get(name);\n        g.totalPending += Number(p.pending || 0);\n        g.totalGrand += Number(p.grandTotal || 0);\n        g.totalPaid += Number(p.paidNow || 0);\n        g.purchases.push(p);\n      });\n\n      const groups = Array.from(map.values()).sort(\n        (a, b) => b.totalPending - a.totalPending\n      );\n\n      setVendorsSummary(groups);\n\n      // auto-select first vendor if none selected\n      if (!selectedVendorName && groups.length > 0) {\n        setSelectedVendorName(groups[0].vendorName);\n      }\n    } catch (e) {\n      console.error(e);\n      setErr(e.message || \"Failed to load vendor purchases\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function handleDeletePurchase(purchase) {\n    if (!purchase) return;\n    if (!window.confirm(\"Delete this purchase record?\")) return;\n\n    try {\n      const res = await fetch(\n        `http://localhost:4000/api/purchases/${purchase.id}`,\n        { method: \"DELETE\" }\n      );\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || \"Purchase not found!\");\n        return;\n      }\n\n      // Reload summary from backend so stale records disappear\n      await loadVendorPurchases();\n    } catch (e) {\n      console.error(e);\n      alert(\"Error deleting purchase\");\n    }\n  }\n\n  const selectedVendorSummary =\n    vendorsSummary.find((v) => v.vendorName === selectedVendorName) || null;\n\n  const totalPendingAll = vendorsSummary.reduce(\n    (sum, v) => sum + v.totalPending,\n    0\n  );\n\n  return (\n    <div className=\"bg-white p-4 rounded shadow mt-4\">\n      <div className=\"flex items-center mb-2\">\n        <h3 className=\"font-semibold text-sm flex-1\">\n          Vendor Purchase Management\n        </h3>\n        <button\n          onClick={loadVendorPurchases}\n          className=\"px-2 py-1 text-xs border rounded\"\n        >\n          Refresh\n        </button>\n      </div>\n\n      {loading && (\n        <p className=\"text-xs text-gray-500 mb-2\">Loading vendor purchases…</p>\n      )}\n      {err && <p className=\"text-xs text-red-600 mb-2\">{err}</p>}\n\n      {vendorsSummary.length === 0 ? (\n        <p className=\"text-xs text-gray-500\">\n          No purchases yet. Once you save purchases, you will see vendor-wise\n          summary here.\n        </p>\n      ) : (\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n          {/* LEFT: Vendor list with totals */}\n          <div className=\"lg:col-span-1 border rounded p-3\">\n            <h4 className=\"font-semibold mb-2 text-xs\">\n              Vendors (total purchase & pending)\n            </h4>\n            <table className=\"w-full text-[11px]\">\n              <thead className=\"bg-gray-100\">\n                <tr>\n                  <th className=\"p-1 text-left\">Vendor</th>\n                  <th className=\"p-1 text-right\">Pending</th>\n                </tr>\n              </thead>\n              <tbody>\n                {vendorsSummary.map((v) => (\n                  <tr\n                    key={v.vendorName}\n                    className={\n                      \"border-t cursor-pointer \" +\n                      (v.vendorName === selectedVendorName\n                        ? \"bg-sky-50\"\n                        : \"\")\n                    }\n                    onClick={() => setSelectedVendorName(v.vendorName)}\n                  >\n                    <td className=\"p-1\">{v.vendorName}</td>\n                    <td className=\"p-1 text-right\">\n                      {v.totalPending.toFixed(2)}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n\n            <div className=\"mt-3 text-xs text-gray-600\">\n              <strong>Total Pending: </strong>\n              {totalPendingAll.toFixed(2)}\n            </div>\n          </div>\n\n          {/* RIGHT: Selected vendor details */}\n          <div className=\"lg:col-span-2 border rounded p-3\">\n            {!selectedVendorSummary ? (\n              <p className=\"text-xs text-gray-500\">\n                Select a vendor on the left to see full record of your\n                purchases, paid amounts, and remaining balance for that vendor.\n              </p>\n            ) : (\n              <>\n                {/* Summary header */}\n                <div className=\"flex flex-wrap justify-between mb-3 text-xs\">\n                  <div>\n                    <div className=\"font-semibold\">\n                      {selectedVendorSummary.vendorName}\n                    </div>\n                    <div className=\"text-gray-500\">\n                      Total Pending:{\" \"}\n                      <strong>\n                        {selectedVendorSummary.totalPending.toFixed(2)}\n                      </strong>\n                    </div>\n                  </div>\n                  <div className=\"text-right space-y-1\">\n                    <div>\n                      Total Grand:{\" \"}\n                      <strong>\n                        {selectedVendorSummary.totalGrand.toFixed(2)}\n                      </strong>\n                    </div>\n                    <div>\n                      Total Paid:{\" \"}\n                      <strong>\n                        {selectedVendorSummary.totalPaid.toFixed(2)}\n                      </strong>\n                    </div>\n                  </div>\n                </div>\n\n                {/* All purchases for this vendor */}\n                {selectedVendorSummary.purchases.map((p) => {\n                  const items = p.products || [];\n                  return (\n                    <div\n                      key={p.id}\n                      className=\"border rounded mb-3 p-2 text-[11px]\"\n                    >\n                      <div className=\"flex flex-wrap justify-between mb-1\">\n                        <div>\n                          <span className=\"font-semibold\">Date: </span>\n                          {p.date\n                            ? new Date(p.date).toLocaleString()\n                            : \"-\"}\n                        </div>\n                        <div>\n                          <span className=\"font-semibold\">Grand: </span>\n                          {p.grandTotal} &nbsp;|&nbsp;\n                          <span className=\"font-semibold\">Paid: </span>\n                          {p.paidNow} &nbsp;|&nbsp;\n                          <span className=\"font-semibold\">\n                            Remaining:{\" \"}\n                          </span>\n                          {p.pending}\n                        </div>\n                      </div>\n\n                      {/* Products table */}\n                      <table className=\"w-full text-[11px] border mt-1\">\n                        <thead className=\"bg-gray-100\">\n                          <tr>\n                            <th className=\"border px-1 py-0.5\">#</th>\n                            <th className=\"border px-1 py-0.5\">Product</th>\n                            <th className=\"border px-1 py-0.5\">Qty</th>\n                            <th className=\"border px-1 py-0.5\">Weight</th>\n                            <th className=\"border px-1 py-0.5\">Price</th>\n                            <th className=\"border px-1 py-0.5\">Line Total</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {items.map((it, idx) => (\n                            <tr key={idx}>\n                              <td className=\"border px-1 py-0.5\">\n                                {idx + 1}\n                              </td>\n                              <td className=\"border px-1 py-0.5\">\n                                {it.productName}\n                              </td>\n                              <td className=\"border px-1 py-0.5\">\n                                {it.qty || it.quantity}\n                              </td>\n                              <td className=\"border px-1 py-0.5\">\n                                {it.weight}\n                              </td>\n                              <td className=\"border px-1 py-0.5\">\n                                {it.pricePerKg || it.price}\n                              </td>\n                              <td className=\"border px-1 py-0.5\">\n                                {it.lineTotal}\n                              </td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n\n                      {/* Actions */}\n                      <div className=\"mt-2 flex justify-end gap-2\">\n                        <button\n                          onClick={() =>\n                            alert(\n                              \"Edit in form: we can wire this to Purchases later.\"\n                            )\n                          }\n                          className=\"px-2 py-1 bg-sky-600 text-white rounded\"\n                        >\n                          Edit in Form\n                        </button>\n                        <button\n                          onClick={() => handleDeletePurchase(p)}\n                          className=\"px-2 py-1 bg-red-600 text-white rounded\"\n                        >\n                          🗑 Delete\n                        </button>\n                      </div>\n                    </div>\n                  );\n                })}\n              </>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n/* Purchases */\nfunction Purchases({ t }) {\n  const [vendorName, setVendorName] = useState('');\n  \n  const [rows, setRows] = useState([\n    { productName: '', qty: 1, weight: 0, pricePerKg: 0 },\n  ]);\n  const [paidNow, setPaidNow] = useState(0);\n  const [mode, setMode] = useState('cash');\n  const [records, setRecords] = useState([]);\n  const [editingIndex, setEditingIndex] = useState(null);\n  const [editingId, setEditingId] = useState(null);\n  const [filterDate, setFilterDate] = useState(''); // <-- NEW: date filter\n  const [selectedVendorName, setSelectedVendorName] = useState('');\n\n \n\n// Build a map: vendorName -> aggregated info + list of their purchases\nconst vendorMap = new Map();\n\n(records || []).forEach((r) => {\n  const name = r.vendorName || 'Unknown';\n  if (!vendorMap.has(name)) {\n    vendorMap.set(name, {\n      vendorName: name,\n      totalGrand: 0,\n      totalPaid: 0,\n      totalPending: 0,\n      purchases: [],\n    });\n  }\n  const entry = vendorMap.get(name);\n  entry.totalGrand += Number(r.grandTotal || 0);\n  entry.totalPaid += Number(r.paidNow || 0);\n  entry.totalPending += Number(r.pending || 0);\n  entry.purchases.push(r);\n});\n\n// Sorted list of vendors (by pending desc)\nconst vendorsSummary = Array.from(vendorMap.values()).sort(\n  (a, b) => b.totalPending - a.totalPending\n);\n\nconst selectedVendorSummary =\n  vendorsSummary.find((v) => v.vendorName === selectedVendorName) || null;\n\n  // ===== Persistent storage of purchases in localStorage =====\n\n  // 🔹 1) Load from localStorage on mount\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem('erp_purchases');\n      if (!raw) return;\n      const parsed = JSON.parse(raw);\n      if (Array.isArray(parsed)) {\n        setRecords(parsed);\n      }\n    } catch (e) {\n      console.error('Failed to load purchases from localStorage', e);\n    }\n  }, []);\n\n  // 🔹 2) Save to localStorage whenever records change\n  useEffect(() => {\n    try {\n      localStorage.setItem('erp_purchases', JSON.stringify(records));\n    } catch (e) {\n      console.error('Failed to save purchases to localStorage', e);\n    }\n  }, [records]);\n\n  function addRow() {\n    setRows((prev) => [\n      ...prev,\n      { productName: '', qty: 1, weight: 0, pricePerKg: 0 },\n    ]);\n  }\n\n  function updateRow(i, key, value) {\n    const a = [...rows];\n    a[i][key] = value;\n    setRows(a);\n  }\n\n  const total = rows.reduce(\n    (s, r) =>\n      s +\n      Number(r.qty || 0) *\n\n        Number(r.pricePerKg || 0),\n    0\n  );\n  const remaining = +(total - Number(paidNow || 0)).toFixed(2);\n\n async function savePurchase() {\n  // normalize payload from form\n  const payloadProducts = rows.map(r => ({\n    productName: r.productName,\n    qty: Number(r.qty || 0),\n    weight: Number(r.weight || 0),\n    pricePerKg: Number(r.pricePerKg || 0),\n  }));\n\n  const payload = {\n    vendorName,\n    products: payloadProducts,\n    paidNow,\n    modeOfPayment: mode,\n  };\n\n  try {\n    let j;\n    if (editingIndex !== null && editingId) {\n      // UPDATE existing purchase\n      const res = await fetch(\n        `http://localhost:4000/api/purchases/${editingId}`,\n        {\n          method: 'PUT',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload),\n        }\n      );\n      j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to update purchase');\n        return;\n      }\n\n      const updated = j.record;\n      setRecords(prev =>\n        prev.map(p => (p.id === updated.id ? updated : p))\n      );\n      alert('Purchase updated');\n    } else {\n      // CREATE new purchase\n      const res = await fetch('http://localhost:4000/api/save-purchase', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n      j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to save purchase');\n        return;\n      }\n      setRecords(prev => [...prev, j.record]);\n      alert('Purchase saved');\n    }\n\n    // reset editing + form\n    setEditingIndex(null);\n    setEditingId(null);\n    setVendorName('');\n    setPaidNow(0);\n    setMode('cash');\n    setRows([{ productName: '', qty: 1, weight: 0, pricePerKg: 0 }]);\n  } catch (e) {\n    console.error(e);\n    alert('Error saving purchase');\n  }\n}\n\nfunction editPurchase(index) {\n  const r = records[index];\n  if (!r) return;\n\n  // Fill form with this purchase\n  setVendorName(r.vendorName || '');\n  setPaidNow(Number(r.paidNow || 0));\n  setMode(r.modeOfPayment || 'cash');\n\n  const restoredRows = (r.products || []).map((p) => ({\n    productName: p.productName,\n    qty: p.qty || p.quantity || 0,\n    weight: p.weight || 0,\n    pricePerKg: p.pricePerKg || p.price || 0,\n  }));\n\n  setRows(\n    restoredRows.length\n      ? restoredRows\n      : [{ productName: '', qty: 1, weight: 0, pricePerKg: 0 }]\n  );\n\n  // 🔹 these two lines are the important part:\n  setEditingIndex(index);\n  setEditingId(r.id);     \n}\n\n\n  async function deletePurchase(index) {\n  const r = records[index];\n  if (!r || !r.id) return;\n  if (!window.confirm('Delete this purchase?')) return;\n  try {\n    const res = await fetch(\n      `http://localhost:4000/api/purchases/${r.id}`,\n      { method: 'DELETE' }\n    );\n    const j = await res.json();\n    if (!j.ok) {\n      alert(j.message || 'Failed to delete purchase');\n      return;\n    }\n\n    setRecords(prev => prev.filter(x => x.id !== r.id));\n    alert('Purchase deleted');\n  } catch (e) {\n    console.error(e);\n    alert('Error deleting purchase');\n  }\n}\n\n\n  // --- Filtered records by date (yyyy-mm-dd) ---\n  const displayedRecords = filterDate\n    ? records.filter((r) => {\n        if (!r.date) return false;\n        // r.date usually ISO string: \"2025-11-15T10:30:00.000Z\"\n        return r.date.slice(0, 10) === filterDate;\n      })\n    : records;\n\n  return (\n    \n    <div>\n      <h2 className=\"text-2xl font-semibold mb-4\">{t('purchases')}</h2>\n      {/* Purchase form */}\n      <div className=\"bg-white p-4 rounded shadow mb-4\">\n        <input\n          placeholder={t('vendorName')}\n          value={vendorName}\n          onChange={(e) => setVendorName(e.target.value)}\n          className=\"border p-2 w-full mb-3\"\n        />\n        \n\n        {/* Items table */}\n        <table className=\"w-full\">\n          <thead className=\"bg-sky-100\">\n            <tr>\n              <th>#</th>\n              <th>Product</th>\n              <th>Qty</th>\n              <th>Weight</th>\n              <th>Price</th>\n              <th>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            {rows.map((r, i) => (\n              <tr key={i} className=\"border-t\">\n                <td className=\"p-2\">{i + 1}</td>\n                <td className=\"p-2\">\n                  <input\n                    className=\"border p-1\"\n                    value={r.productName}\n                    onChange={(e) =>\n                      updateRow(i, 'productName', e.target.value)\n                    }\n                  />\n                </td>\n                <td className=\"p-2\">\n                  <input\n                    className=\"border p-1 w-20\"\n                    type=\"number\"\n                    value={r.qty}\n                    onChange={(e) =>\n                      updateRow(i, 'qty', Number(e.target.value))\n                    }\n                  />\n                </td>\n                <td className=\"p-2\">\n                  <input\n                    className=\"border p-1 w-24\"\n                    type=\"number\"\n                    value={r.weight}\n                    onChange={(e) =>\n                      updateRow(i, 'weight', Number(e.target.value))\n                    }\n                  />\n                </td>\n                <td className=\"p-2\">\n                  <input\n                    className=\"border p-1 w-28\"\n                    type=\"number\"\n                    value={r.pricePerKg}\n                    onChange={(e) =>\n                      updateRow(i, 'pricePerKg', Number(e.target.value))\n                    }\n                  />\n                </td>\n                <td className=\"p-2\">\n                  {(\n                    Number(r.qty || 0) *\n                    \n                    Number(r.pricePerKg || 0)\n                  ).toFixed(2)}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n\n        {/* Controls */}\n        <div className=\"flex items-center gap-2 mt-4\">\n          <button\n            onClick={addRow}\n            className=\"px-3 py-1 border rounded hover:shadow transition\"\n          >\n            ➕ Add Item\n          </button>\n\n          <select\n            value={mode}\n            onChange={(e) => setMode(e.target.value)}\n            className=\"border p-1 rounded\"\n          >\n            <option value=\"cash\">{t('cash')}</option>\n            <option value=\"card\">{t('card')}</option>\n            <option value=\"cheque\">{t('cheque')}</option>\n            <option value=\"online\">{t('online')}</option>\n          </select>\n\n          <div className=\"ml-auto flex items-center gap-2\">\n            <label>Amount Paid</label>\n            <input\n              type=\"number\"\n              value={paidNow}\n              onChange={(e) => setPaidNow(Number(e.target.value))}\n              className=\"border p-1 w-28\"\n            />\n            <div className=\"px-3 py-2 bg-gray-50 rounded\">\n              Remaining:{' '}\n              <strong>{remaining.toFixed(2)}</strong>\n            </div>\n            <button\n              onClick={savePurchase}\n              className=\"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition\"\n            >\n              {editingIndex !== null ? 'Update Purchase' : 'Save Purchase'}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Vendor Purchase Management */}\n        <VendorPurchaseManagement t={t} />\n\n    </div>\n  );\n}\n\nasync function loadPurchases() {\n  try {\n    const res = await fetch('http://localhost:4000/api/purchases');\n    const j = await res.json();\n    if (!j.ok) {\n      console.error(j.message || 'Failed to load purchases');\n      return;\n    }\n    setRecords(j.purchases || []);\n  } catch (e) {\n    console.error('Error loading purchases', e);\n  }\n}\n\n/* Reports / Debits placeholders */\nfunction Reports({ t }) {\n  const [date, setDate] = useState(() => new Date().toISOString().slice(0, 10));\n  const [report, setReport] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState('');\n\n  async function loadReport(e) {\n    if (e && e.preventDefault) e.preventDefault();\n    if (!date) {\n      alert('Select a date');\n      return;\n    }\n    setLoading(true);\n    setErr('');\n    setReport(null);\n    try {\n      const res = await fetch(`http://localhost:4000/api/reports/day?date=${date}`);\n      const j = await res.json();\n      if (!j.ok) throw new Error(j.message || 'Failed to load report');\n      setReport(j);\n    } catch (e) {\n      console.error(e);\n      setErr('Failed to load report');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  // Optional: auto-load for today on first open\n  // useEffect(() => { loadReport(); }, []);\n\n  return (\n    <div>\n      <h2 className=\"text-2xl font-semibold mb-4\">Reports</h2>\n\n      {/* Date filter */}\n      <div className=\"bg-white p-4 rounded shadow mb-4\">\n        <form onSubmit={loadReport} className=\"flex flex-wrap items-end gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-1\">Select Date</label>\n            <input\n              type=\"date\"\n              value={date}\n              onChange={e => setDate(e.target.value)}\n              className=\"border p-2 rounded\"\n            />\n          </div>\n          <button\n            type=\"submit\"\n            className=\"px-4 py-2 bg-sky-600 text-white rounded hover:bg-sky-700 transition\"\n          >\n            {loading ? 'Loading…' : 'Load Report'}\n          </button>\n          {err && <span className=\"text-red-600 text-sm ml-2\">{err}</span>}\n        </form>\n      </div>\n\n      {/* If no report yet */}\n      {!report && !loading && !err && (\n        <p className=\"text-sm text-gray-600\">Select a date and click \"Load Report\" to view details.</p>\n      )}\n\n      {/* Summary + details once we have data */}\n      {report && (\n        <>\n          {/* Summary cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n            <div className=\"bg-white p-4 rounded shadow\">\n              <div className=\"text-sm text-gray-500\">Total Sales</div>\n              <div className=\"text-xl font-semibold\">\n                 {Number(report.totalSales || 0).toFixed(2)}\n              </div>\n            </div>\n            <div className=\"bg-white p-4 rounded shadow\">\n              <div className=\"text-sm text-gray-500\">Amount Received</div>\n              <div className=\"text-xl font-semibold\">\n                {Number(report.totalReceived || 0).toFixed(2)}\n              </div>\n            </div>\n            <div className=\"bg-white p-4 rounded shadow\">\n              <div className=\"text-sm text-gray-500\">Number of Bills</div>\n              <div className=\"text-xl font-semibold\">\n                {(report.invoices || []).length}\n              </div>\n            </div>\n          </div>\n\n          {/* Products sold summary */}\n          <div className=\"bg-white p-4 rounded shadow mb-4\">\n            <h3 className=\"font-semibold mb-2\">Products Sold on {report.date}</h3>\n            {(report.productsSummary || []).length === 0 ? (\n              <p className=\"text-sm text-gray-500\">No products sold on this date.</p>\n            ) : (\n              <table className=\"w-full text-sm border\">\n                <thead className=\"bg-gray-100\">\n                  <tr>\n                    <th className=\"border px-2 py-1 text-left\">Product</th>\n                    <th className=\"border px-2 py-1 text-right\">Total Qty</th>\n                    <th className=\"border px-2 py-1 text-right\">Total Weight</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {report.productsSummary.map((p, i) => (\n                    <tr key={i}>\n                      <td className=\"border px-2 py-1\">{p.productName}</td>\n                      <td className=\"border px-2 py-1 text-right\">{p.totalQty}</td>\n                      <td className=\"border px-2 py-1 text-right\">{p.totalWeight}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            )}\n          </div>\n\n          {/* All bills with full details */}\n          <div className=\"bg-white p-4 rounded shadow\">\n            <h3 className=\"font-semibold mb-2\">Bills / Invoices</h3>\n            {(report.invoices || []).length === 0 && (\n              <p className=\"text-sm text-gray-500\">No invoices on this date.</p>\n            )}\n            {(report.invoices || []).map(inv => (\n              <div key={inv.id} className=\"border rounded mb-4 p-3\">\n                <div className=\"flex flex-wrap justify-between text-sm mb-1\">\n                  <div>\n                    <span className=\"font-semibold\">Customer: </span>\n                    {inv.customerName}\n                  </div>\n                  <div>\n                    <span className=\"font-semibold\">Time: </span>\n                    {inv.date}\n                  </div>\n                </div>\n                <div className=\"flex flex-wrap gap-4 text-sm mb-2\">\n                  <div>Grand Total: {inv.grandTotal}</div>\n                  <div>Paid: {inv.paidNow}</div>\n                  <div>Pending:  {inv.pending}</div>\n                </div>\n                <table className=\"w-full text-xs border\">\n                  <thead className=\"bg-gray-100\">\n                    <tr>\n                      <th className=\"border px-1 py-0.5\">#</th>\n                      <th className=\"border px-1 py-0.5\">Product</th>\n                      <th className=\"border px-1 py-0.5\">Qty</th>\n                      <th className=\"border px-1 py-0.5\">Weight</th>\n                      <th className=\"border px-1 py-0.5\">Price</th>\n                      <th className=\"border px-1 py-0.5\">Line Total</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {(inv.products || inv.lines || []).map((p, idx) => (\n                      <tr key={idx}>\n                        <td className=\"border px-1 py-0.5\">{idx + 1}</td>\n                        <td className=\"border px-1 py-0.5\">{p.productName}</td>\n                        <td className=\"border px-1 py-0.5\">{p.quantity || p.qty}</td>\n                        <td className=\"border px-1 py-0.5\">{p.weight}</td>\n                        <td className=\"border px-1 py-0.5\">{p.pricePerKg || p.price}</td>\n                        <td className=\"border px-1 py-0.5\">{p.lineTotal}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            ))}\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n/*Debits*/\nfunction Debits({ t }) {\n  const [vendors, setVendors] = useState([]);\n  const [selectedVendorId, setSelectedVendorId] = useState('');\n\n  // Add / edit vendor form\n  const [vendorName, setVendorName] = useState('');\n  const [vendorPlace, setVendorPlace] = useState('');\n  const [vendorCompany, setVendorCompany] = useState('');\n  const [editingVendorId, setEditingVendorId] = useState(null);\n\n  // Ledger & transaction form\n  const [ledger, setLedger] = useState([]);\n  const [txType, setTxType] = useState('received'); // 'received' | 'paid' | 'goods'\n  const [txAmount, setTxAmount] = useState(0);\n  const [txMethod, setTxMethod] = useState('');\n  const [txBillRef, setTxBillRef] = useState('');\n  const [txDate, setTxDate] = useState('');\n  const [editingTxId, setEditingTxId] = useState(null);\n\n  // Purchases with pending (Purchased Vendor section)\n  const [purchaseDebits, setPurchaseDebits] = useState([]);\n  const [loadingPurchases, setLoadingPurchases] = useState(false);\n\n  useEffect(() => {\n    loadVendors();\n    loadPurchaseDebits();\n  }, []);\n\n  async function loadVendors() {\n    try {\n      const res = await fetch('http://localhost:4000/api/vendors');\n      const j = await res.json();\n      if (j.ok) setVendors(j.vendors || []);\n    } catch (e) {\n      console.error('Failed to load vendors', e);\n    }\n  }\n\n  async function loadLedger(vendorId) {\n    if (!vendorId) {\n      setLedger([]);\n      return;\n    }\n    try {\n      const res = await fetch(`http://localhost:4000/api/vendors/${vendorId}/ledger`);\n      const j = await res.json();\n      if (j.ok) {\n        setLedger(j.ledger || []);\n        // update vendors list with new remaining\n        setVendors(prev =>\n          prev.map(v => (v.id === vendorId ? j.vendor : v))\n        );\n      }\n    } catch (e) {\n      console.error('Failed to load ledger', e);\n    }\n  }\n\n  async function loadPurchaseDebits() {\n    try {\n      setLoadingPurchases(true);\n      const res = await fetch('http://localhost:4000/api/purchases-with-pending');\n      const j = await res.json();\n      if (j.ok) setPurchaseDebits(j.purchases || []);\n    } catch (e) {\n      console.error('Failed to load purchase debits', e);\n    } finally {\n      setLoadingPurchases(false);\n    }\n  }\n\n  function onSelectVendor(id) {\n    setSelectedVendorId(id);\n    setEditingTxId(null);\n    resetTxForm();\n    if (id) loadLedger(id);\n    else setLedger([]);\n  }\n\n  // --- Vendor form helpers ---\n  function startNewVendor() {\n    setVendorName('');\n    setVendorPlace('');\n    setVendorCompany('');\n    setEditingVendorId(null);\n  }\n\n  function startEditVendor(vendor) {\n    setVendorName(vendor.name || '');\n    setVendorPlace(vendor.place || '');\n    setVendorCompany(vendor.company || '');\n    setEditingVendorId(vendor.id);\n  }\n\n  async function saveVendor() {\n    if (!vendorName) {\n      alert('Vendor name is required');\n      return;\n    }\n\n    const payload = {\n      id: editingVendorId || undefined,\n      name: vendorName,\n      place: vendorPlace,\n      company: vendorCompany,\n    };\n\n    try {\n      const res = await fetch('http://localhost:4000/api/vendors', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to save vendor');\n        return;\n      }\n\n      const v = j.vendor;\n      setVendors(prev => {\n        const idx = prev.findIndex(x => x.id === v.id);\n        if (idx === -1) return [...prev, v];\n        const copy = [...prev];\n        copy[idx] = v;\n        return copy;\n      });\n\n      setVendorName('');\n      setVendorPlace('');\n      setVendorCompany('');\n      setEditingVendorId(null);\n    } catch (e) {\n      console.error(e);\n      alert('Error saving vendor');\n    }\n  }\n\n  async function deleteVendor(vendor) {\n    if (!window.confirm(`Delete vendor \"${vendor.name}\" and all its debits?`)) return;\n    try {\n      const res = await fetch(`http://localhost:4000/api/vendors/${vendor.id}`, {\n        method: 'DELETE',\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to delete vendor');\n        return;\n      }\n      setVendors(prev => prev.filter(v => v.id !== vendor.id));\n      if (selectedVendorId === vendor.id) {\n        setSelectedVendorId('');\n        setLedger([]);\n      }\n    } catch (e) {\n      console.error(e);\n      alert('Error deleting vendor');\n    }\n  }\nasync function deletePurchaseDebit(p) {\n  if (!p || !p.id) return;\n  if (!window.confirm('Delete this pending purchase?')) return;\n\n  try {\n    const res = await fetch(\n      `http://localhost:4000/api/purchases/${p.id}`,\n      { method: 'DELETE' }\n    );\n    const j = await res.json();\n    if (!j.ok) {\n      alert(j.message || 'Failed to delete purchase');\n      return;\n    }\n\n    // remove from local pending list\n    setPurchaseDebits(prev => prev.filter(x => x.id !== p.id));\n    alert('Purchase deleted');\n  } catch (e) {\n    console.error(e);\n    alert('Error deleting purchase');\n  }\n}\n\n  // --- Transaction form helpers ---\n  function resetTxForm() {\n    setTxType('received');\n    setTxAmount(0);\n    setTxMethod('');\n    setTxBillRef('');\n    setTxDate('');\n    setEditingTxId(null);\n  }\n\n  function startEditTx(tx) {\n    setTxType(tx.type);\n    setTxAmount(tx.amount);\n    setTxMethod(tx.method || '');\n    setTxBillRef(tx.billRef || '');\n    setTxDate(tx.date ? tx.date.slice(0, 10) : '');\n    setEditingTxId(tx.id);\n  }\n\n  async function saveTransaction() {\n    if (!selectedVendorId) {\n      alert('Select a vendor first');\n      return;\n    }\n    if (!txAmount || Number(txAmount) <= 0) {\n      alert('Amount must be greater than 0');\n      return;\n    }\n\n    const payload = {\n      type: txType,                            // 'received' | 'paid' | 'goods'\n      amount: Number(txAmount),\n      method: txMethod,\n      billRef: txBillRef,\n      date: txDate ? new Date(txDate).toISOString() : undefined,\n    };\n\n    try {\n      let url = `http://localhost:4000/api/vendors/${selectedVendorId}/transactions`;\n      let method = 'POST';\n\n      if (editingTxId) {\n        url += `/${editingTxId}`;\n        method = 'PUT';\n      }\n\n      const res = await fetch(url, {\n        method,\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to save transaction');\n        return;\n      }\n\n      setLedger(j.ledger || []);\n      setVendors(prev =>\n        prev.map(v => (v.id === selectedVendorId ? j.vendor : v))\n      );\n      resetTxForm();\n    } catch (e) {\n      console.error(e);\n      alert('Error saving transaction');\n    }\n  }\n\n  async function deleteTransaction(tx) {\n    if (!selectedVendorId) return;\n    if (!window.confirm('Delete this transaction?')) return;\n    try {\n      const res = await fetch(\n        `http://localhost:4000/api/vendors/${selectedVendorId}/transactions/${tx.id}`,\n        { method: 'DELETE' }\n      );\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to delete');\n        return;\n      }\n      setLedger(j.ledger || []);\n      setVendors(prev =>\n        prev.map(v => (v.id === selectedVendorId ? j.vendor : v))\n      );\n    } catch (e) {\n      console.error(e);\n      alert('Error deleting transaction');\n    }\n  }\n\n  // --- Edit/Delete purchase debits (Pending purchases) ---\n  async function editPurchaseDebit(p) {\n  if (!p || !p.id) return;\n\n  // Ask how much is paid now (or you can design a better UI later)\n  const newPaidStr = prompt(\n    'Enter new paid amount for this purchase:',\n    String(p.paidNow || 0)\n  );\n  if (newPaidStr === null) return; // cancelled\n  const newPaid = Number(newPaidStr);\n  if (isNaN(newPaid)) {\n    alert('Invalid amount');\n    return;\n  }\n\n  const payload = {\n    vendorName: p.vendorName,\n    products: p.products || [],\n    paidNow: newPaid,\n    modeOfPayment: p.modeOfPayment,\n  };\n\n  try {\n    const res = await fetch(\n      `http://localhost:4000/api/purchases/${p.id}`,\n      {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      }\n    );\n    const j = await res.json();\n    if (!j.ok) {\n      alert(j.message || 'Failed to update purchase');\n      return;\n    }\n\n    const updated = j.record;\n\n    // Update local pending list\n    setPurchaseDebits((prev) => {\n      const arr = prev\n        .map((x) => (x.id === updated.id ? updated : x))\n        // if pending <= 0, remove from \"pending\" list\n        .filter((x) => Number(x.pending || 0) > 0);\n      return arr;\n    });\n\n    alert('Purchase updated');\n\n  } catch (e) {\n    console.error(e);\n    alert('Error updating purchase');\n  }\n}\n\n\n  async function deletePurchase(index) {\n  const rec = records[index];\n  if (!rec) return;\n\n  if (!window.confirm('Delete this purchase?')) return;\n\n  try {\n    // tell backend to delete it\n    const res = await fetch(\n      `http://localhost:4000/api/purchases/${rec.id}`,\n      { method: 'DELETE' }\n    );\n    const j = await res.json();\n    if (!j.ok) {\n      alert(j.message || 'Failed to delete purchase');\n      return;\n    }\n\n    // remove from local list\n    setRecords(prev => prev.filter(r => r.id !== rec.id));\n\n    // if you’re editing this one, reset edit state\n    setEditingIndex(null);\n    alert('Purchase deleted');\n  } catch (e) {\n    console.error(e);\n    alert('Error deleting purchase');\n  }\n}\n\n\n  // --- Ledger summary ---\n  const totalReceived = ledger\n    .filter(tx => tx.type === 'received')\n    .reduce((s, tx) => s + Number(tx.amount || 0), 0);\n\n  const totalPaid = ledger\n    .filter(tx => tx.type === 'paid')\n    .reduce((s, tx) => s + Number(tx.amount || 0), 0);\n\n  const totalGoods = ledger\n    .filter(tx => tx.type === 'goods')\n    .reduce((s, tx) => s + Number(tx.amount || 0), 0);\n\n  const remaining =\n    (vendors.find(v => v.id === selectedVendorId)?.remaining ?? 0);\n\n  const selectedVendor = vendors.find(v => v.id === selectedVendorId) || null;\n\n  // Purchases filtered by selected vendor (if any)\n  const filteredPurchases = selectedVendor\n    ? purchaseDebits.filter(p =>\n        (p.vendorName || '').toLowerCase() ===\n        (selectedVendor.name || '').toLowerCase()\n      )\n    : purchaseDebits;\n\n  return (\n    <div>\n      <h2 className=\"text-2xl font-semibold mb-4\">Debits</h2>\n\n      {/* MAIN GRID: Vendor Debit Management */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6\">\n        {/* LEFT: Vendor Add/Edit + List */}\n        <div className=\"lg:col-span-1 space-y-4\">\n          <div className=\"bg-white p-4 rounded shadow\">\n            <h3 className=\"font-semibold mb-3\">Vendor Debit Management</h3>\n            <div className=\"space-y-2 text-sm\">\n              <input\n                className=\"border p-2 rounded w-full\"\n                placeholder=\"Vendor Name\"\n                value={vendorName}\n                onChange={e => setVendorName(e.target.value)}\n              />\n              <input\n                className=\"border p-2 rounded w-full\"\n                placeholder=\"Place / Location\"\n                value={vendorPlace}\n                onChange={e => setVendorPlace(e.target.value)}\n              />\n              <input\n                className=\"border p-2 rounded w-full\"\n                placeholder=\"Company Name\"\n                value={vendorCompany}\n                onChange={e => setVendorCompany(e.target.value)}\n              />\n              <div className=\"flex gap-2 mt-2\">\n                <button\n                  onClick={saveVendor}\n                  className=\"px-3 py-1 bg-teal-600 text-white rounded hover:bg-teal-700 text-sm\"\n                >\n                  {editingVendorId ? 'Update Vendor' : 'Save Vendor'}\n                </button>\n                <button\n                  onClick={startNewVendor}\n                  className=\"px-3 py-1 border rounded text-sm\"\n                >\n                  New\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white p-4 rounded shadow max-h-[400px] overflow-auto\">\n            <h3 className=\"font-semibold mb-3\">Vendors</h3>\n            {vendors.length === 0 ? (\n              <p className=\"text-xs text-gray-500\">No vendors yet.</p>\n            ) : (\n              <table className=\"w-full text-xs\">\n                <thead className=\"bg-gray-100\">\n                  <tr>\n                    <th className=\"p-2 text-left\">Name</th>\n                    <th className=\"p-2 text-right\">Remaining</th>\n                    <th className=\"p-2 text-center\">Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {vendors.map(v => (\n                    <tr\n                      key={v.id}\n                      className={\n                        'border-t ' +\n                        (v.id === selectedVendorId ? 'bg-sky-50' : '')\n                      }\n                    >\n                      <td className=\"p-2\">\n                        <button\n                          onClick={() => onSelectVendor(v.id)}\n                          className=\"text-left text-xs hover:underline\"\n                        >\n                          {v.name}\n                          {v.company ? ` (${v.company})` : ''}\n                        </button>\n                      </td>\n                      <td className=\"p-2 text-right\">\n                        {Number(v.remaining || 0).toFixed(2)}\n                      </td>\n                      <td className=\"p-2 text-center\">\n                        <button\n                          onClick={() => startEditVendor(v)}\n                          className=\"px-2 py-1 text-xs bg-sky-600 text-white rounded mr-1\"\n                        >\n                          Edit\n                        </button>\n                          <button\n                            onClick={() => deleteVendor(v)}\n                            className=\"px-2 py-1 text-xs bg-red-600 text-white rounded\"\n                          >\n                            🗑\n                          </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            )}\n          </div>\n        </div>\n\n        {/* RIGHT: Ledger & Transactions */}\n        <div className=\"lg:col-span-2 space-y-4\">\n          <div className=\"bg-white p-4 rounded shadow\">\n            <h3 className=\"font-semibold mb-3\">\n              {selectedVendorId ? 'Vendor Ledger' : 'Select a Vendor'}\n            </h3>\n\n            {selectedVendorId && (\n              <>\n                {/* Summary */}\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4 text-sm\">\n                  <div className=\"bg-sky-50 p-2 rounded\">\n                    <div className=\"text-xs text-gray-500\">Total Received</div>\n                    <div className=\"font-semibold\">\n                      {totalReceived.toFixed(2)}\n                    </div>\n                  </div>\n                  <div className=\"bg-sky-50 p-2 rounded\">\n                    <div className=\"text-xs text-gray-500\">Total Paid</div>\n                    <div className=\"font-semibold\">\n                      {totalPaid.toFixed(2)}\n                    </div>\n                  </div>\n                  <div className=\"bg-sky-50 p-2 rounded\">\n                    <div className=\"text-xs text-gray-500\">Goods Purchased</div>\n                    <div className=\"font-semibold\">\n                      {totalGoods.toFixed(2)}\n                    </div>\n                  </div>\n                  <div className=\"bg-sky-50 p-2 rounded\">\n                    <div className=\"text-xs text-gray-500\">Remaining</div>\n                    <div className=\"font-semibold\">\n                      {Number(remaining || 0).toFixed(2)}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Add/Edit Transaction */}\n                <div className=\"border rounded p-3 mb-4 text-sm\">\n                  <h4 className=\"font-semibold mb-2\">\n                    {editingTxId ? 'Edit Transaction' : 'Add Transaction'}\n                  </h4>\n                  <div className=\"grid grid-cols-1 md:grid-cols-5 gap-2\">\n                    <select\n                      className=\"border p-2 rounded\"\n                      value={txType}\n                      onChange={e => setTxType(e.target.value)}\n                    >\n                      <option value=\"received\">Received from Vendor</option>\n                      <option value=\"paid\">Paid to Vendor</option>\n                      <option value=\"goods\">\n                        Goods Purchased (vendor takes goods)\n                      </option>\n                    </select>\n                    <input\n                      type=\"number\"\n                      className=\"border p-2 rounded\"\n                      placeholder=\"Amount\"\n                      value={txAmount}\n                      onChange={e => setTxAmount(e.target.value)}\n                    />\n                    <input\n                      type=\"date\"\n                      className=\"border p-2 rounded\"\n                      value={txDate}\n                      onChange={e => setTxDate(e.target.value)}\n                    />\n                    <input\n                      className=\"border p-2 rounded\"\n                      placeholder=\"Payment Method\"\n                      value={txMethod}\n                      onChange={e => setTxMethod(e.target.value)}\n                    />\n                    <input\n                      className=\"border p-2 rounded\"\n                      placeholder=\"Remarks\"\n                      value={txBillRef}\n                      onChange={e => setTxBillRef(e.target.value)}\n                    />\n                  </div>\n                  <div className=\"flex gap-2 mt-3\">\n                    <button\n                      onClick={saveTransaction}\n                      className=\"px-3 py-1 bg-teal-600 text-white rounded text-sm\"\n                    >\n                      {editingTxId ? 'Update Transaction' : 'Save Transaction'}\n                    </button>\n                    <button\n                      onClick={resetTxForm}\n                      className=\"px-3 py-1 border rounded text-sm\"\n                    >\n                      Clear\n                    </button>\n                  </div>\n                </div>\n\n                {/* Ledger Table */}\n                <div className=\"max-h-[380px] overflow-auto text-xs\">\n                  <table className=\"w-full\">\n                    <thead className=\"bg-gray-100\">\n                      <tr>\n                        <th className=\"p-2 text-left\">Date</th>\n                        <th className=\"p-2 text-left\">Type</th>\n                        <th className=\"p-2 text-right\">Amount</th>\n                        <th className=\"p-2 text-left\">Method</th>\n                        <th className=\"p-2 text-left\">Remarks</th>\n                        <th className=\"p-2 text-right\">Balance After</th>\n                        <th className=\"p-2 text-center\">Actions</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {ledger.map(tx => (\n                        <tr key={tx.id} className=\"border-t\">\n                          <td className=\"p-2\">\n                            {tx.date\n                              ? new Date(tx.date).toLocaleDateString()\n                              : '-'}\n                          </td>\n                          <td className=\"p-2 capitalize\">{tx.type}</td>\n                          <td className=\"p-2 text-right\">\n                            {Number(tx.amount || 0).toFixed(2)}\n                          </td>\n                          <td className=\"p-2\">{tx.method}</td>\n                          <td className=\"p-2\">{tx.billRef}</td>\n                          <td className=\"p-2 text-right\">\n                            {Number(tx.balanceAfter || 0).toFixed(2)}\n                          </td>\n                          <td className=\"p-2 text-center\">\n                            <button\n                              onClick={() => startEditTx(tx)}\n                              className=\"px-2 py-1 text-xs bg-sky-600 text-white rounded mr-1\"\n                            >\n                              Edit\n                            </button>\n                            <button\n                              onClick={() => deleteTransaction(tx)}\n                              className=\"px-2 py-1 text-xs bg-red-600 text-white rounded\"\n                            >\n                              🗑\n                            </button>\n                          </td>\n                        </tr>\n                      ))}\n                      {ledger.length === 0 && (\n                        <tr>\n                          <td\n                            colSpan={7}\n                            className=\"p-2 text-center text-gray-500\"\n                          >\n                            No transactions yet.\n                          </td>\n                        </tr>\n                      )}\n                    </tbody>\n                  </table>\n                </div>\n              </>\n            )}\n\n            {!selectedVendorId && (\n              <p className=\"text-xs text-gray-500\">\n                Select a vendor on the left to view and manage their debits.\n              </p>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* SECOND SECTION: PURCHASED VENDOR (Pending purchases) */}\n      <div className=\"bg-white p-4 rounded shadow\">\n        <div className=\"flex items-center mb-3\">\n          <h3 className=\"font-semibold\">Purchased Vendor (Pending Purchases)</h3>\n          <button\n            onClick={loadPurchaseDebits}\n            className=\"ml-auto px-3 py-1 text-xs border rounded\"\n          >\n            {loadingPurchases ? 'Refreshing…' : 'Refresh'}\n          </button>\n        </div>\n        <p className=\"text-xs text-gray-500 mb-2\">\n          Showing all purchases where some amount is still pending.\n          {selectedVendor\n            ? ` (Filtered by vendor: ${selectedVendor.name})`\n            : ' (All vendors)'}\n        </p>\n<table className=\"w-full text-xs\">\n  <thead className=\"bg-gray-100\">\n    <tr>\n      <th className=\"p-2 text-left\">Vendor</th>\n      <th className=\"p-2 text-left\">Date</th>\n      <th className=\"p-2 text-left\">Product</th>\n      <th className=\"p-2 text-right\">Qty</th>\n      <th className=\"p-2 text-right\">Grand Total</th>\n      <th className=\"p-2 text-right\">Paid</th>\n      <th className=\"p-2 text-right\">Remaining</th>\n      <th className=\"p-2 text-left\">Mode</th>\n      <th className=\"p-2 text-center\">Actions</th>\n    </tr>\n  </thead>\n  <tbody>\n    {filteredPurchases.map(p => {\n      const productsList = (p.products || []).map(x => x.productName).join(', ');\n      const totalQty = (p.products || []).reduce(\n        (s, x) => s + Number(x.qty || x.quantity || 0),\n        0\n      );\n      return (\n        <tr key={p.id} className=\"border-t\">\n          <td className=\"p-2\">{p.vendorName}</td>\n          <td className=\"p-2\">\n            {p.date ? new Date(p.date).toLocaleDateString() : '-'}\n          </td>\n          <td className=\"p-2\">{productsList || '-'}</td>\n          <td className=\"p-2 text-right\">{totalQty}</td>\n          <td className=\"p-2 text-right\">\n            {Number(p.grandTotal || 0).toFixed(2)}\n          </td>\n          <td className=\"p-2 text-right\">\n            {Number(p.paidNow || 0).toFixed(2)}\n          </td>\n          <td className=\"p-2 text-right\">\n            {Number(p.pending || 0).toFixed(2)}\n          </td>\n          <td className=\"p-2\">{p.modeOfPayment}</td>\n          <td className=\"p-2 text-center\">\n            <button\n              onClick={() => editPurchaseDebit(p)}\n              className=\"px-2 py-1 text-xs bg-sky-600 text-white rounded mr-1\"\n            >\n              Edit\n            </button>\n            <button\n              onClick={() => deletePurchaseDebit(p)}\n              className=\"px-2 py-1 text-xs bg-red-600 text-white rounded\"\n            >\n              🗑\n            </button>\n          </td>\n        </tr>\n      );\n    })}\n    {filteredPurchases.length === 0 && (\n      <tr>\n        <td\n          className=\"p-2 text-center text-gray-500\"\n          colSpan={9}\n        >\n          No pending purchases found.\n        </td>\n      </tr>\n    )}\n  </tbody>\n</table>\n\n      </div>\n    </div>\n  );\n}\n\nfunction RecycleBin({ t }) {\n  const [activeType, setActiveType] = useState('sales'); // 'sales' | 'purchases' | 'vendors' | 'customers'\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState('');\n\n  async function loadItems(type = activeType) {\n    try {\n      setLoading(true);\n      setErr('');\n      const res = await fetch(`http://localhost:4000/api/recycle-bin/${type}`);\n      const j = await res.json();\n      if (!j.ok) throw new Error(j.message || 'Failed to load recycle bin');\n      setItems(j.items || []);\n    } catch (e) {\n      console.error(e);\n      setErr(e.message || 'Failed to load recycle bin');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    loadItems('sales');\n  }, []);\n\n  function changeType(type) {\n    setActiveType(type);\n    loadItems(type);\n  }\n\n  async function handleRestore(id) {\n    if (!window.confirm('Restore this record?')) return;\n    try {\n      const res = await fetch('http://localhost:4000/api/recycle-bin/restore', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ type: activeType, id }),\n      });\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to restore');\n        return;\n      }\n      await loadItems();\n      alert('Restored successfully');\n    } catch (e) {\n      console.error(e);\n      alert('Error restoring item');\n    }\n  }\n\n  async function handleDelete(id) {\n    if (!window.confirm('Permanently delete this item?')) return;\n    try {\n      const res = await fetch(\n        `http://localhost:4000/api/recycle-bin/${activeType}/${id}`,\n        { method: 'DELETE' }\n      );\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to delete from recycle bin');\n        return;\n      }\n      await loadItems();\n    } catch (e) {\n      console.error(e);\n      alert('Error deleting item');\n    }\n  }\n\n  async function handleDeleteAll() {\n    if (\n      !window.confirm(\n        `Permanently delete ALL ${activeType} items from recycle bin?`\n      )\n    )\n      return;\n    try {\n      const res = await fetch(\n        `http://localhost:4000/api/recycle-bin/${activeType}`,\n        { method: 'DELETE' }\n      );\n      const j = await res.json();\n      if (!j.ok) {\n        alert(j.message || 'Failed to delete all');\n        return;\n      }\n      await loadItems();\n    } catch (e) {\n      console.error(e);\n      alert('Error deleting all items');\n    }\n  }\n\n  // small helper to show a label per item\n  function renderMainLabel(item) {\n    if (activeType === 'sales') {\n      return `${item.customerName || 'Unknown'} — Grand: ${\n        item.grandTotal\n      } | Pending: ${item.pending}`;\n    }\n    if (activeType === 'purchases') {\n      return `${item.vendorName || 'Unknown'} — Grand: ${\n        item.grandTotal\n      } | Pending: ${item.pending}`;\n    }\n    if (activeType === 'vendors') {\n      return `${item.name || 'Vendor'} — Remaining: ${item.remaining || 0}`;\n    }\n    if (activeType === 'customers') {\n      return `${item.name || 'Customer'} — Pending: ${\n        item.previousPending || 0\n      }`;\n    }\n    return 'Item';\n  }\n\n  function formatDate(iso) {\n    if (!iso) return '';\n    try {\n      return new Date(iso).toLocaleString();\n    } catch {\n      return iso;\n    }\n  }\n\n  return (\n    <div>\n      <h2 className=\"text-2xl font-semibold mb-4\">Recycle Bin</h2>\n\n      {/* Type tabs */}\n      <div className=\"flex gap-2 mb-4\">\n        {['sales', 'purchases', 'vendors', 'customers'].map((type) => (\n          <button\n            key={type}\n            onClick={() => changeType(type)}\n            className={\n              'px-3 py-1 rounded text-sm ' +\n              (activeType === type\n                ? 'bg-sky-600 text-white'\n                : 'bg-white text-sky-700 border')\n            }\n          >\n            {type.charAt(0).toUpperCase() + type.slice(1)}\n          </button>\n        ))}\n\n        <button\n          onClick={() => loadItems()}\n          className=\"ml-auto px-3 py-1 text-xs bg-gray-100 border rounded hover:bg-gray-200\"\n        >\n          Refresh\n        </button>\n        <button\n          onClick={handleDeleteAll}\n          className=\"px-3 py-1 text-xs bg-red-100 text-red-700 border border-red-300 rounded hover:bg-red-200\"\n        >\n          Delete All Permanently\n        </button>\n      </div>\n\n      {loading && (\n        <p className=\"text-sm text-gray-500 mb-2\">Loading recycle bin…</p>\n      )}\n      {err && <p className=\"text-sm text-red-600 mb-2\">{err}</p>}\n\n      {items.length === 0 ? (\n        <p className=\"text-sm text-gray-500\">\n          No deleted {activeType} records in recycle bin.\n        </p>\n      ) : (\n        <div className=\"bg-white rounded shadow divide-y\">\n          {items.map((item) => (\n            <div\n              key={item.id}\n              className=\"p-3 flex flex-wrap justify-between items-center text-sm\"\n            >\n              <div className=\"space-y-0.5\">\n                <div className=\"font-medium\">{renderMainLabel(item)}</div>\n                <div className=\"text-xs text-gray-500\">\n                  ID: {item.id}{' '}\n                  {item.date && <>| Date: {formatDate(item.date)}</>}\n                  {item.deletedAt && (\n                    <>\n                      {' '}\n                      | Deleted:{' '}\n                      {formatDate(item.deletedAt)}\n                    </>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"flex gap-2 mt-1 sm:mt-0\">\n                <button\n                  onClick={() => handleRestore(item.id)}\n                  className=\"px-2 py-1 text-xs bg-emerald-600 text-white rounded\"\n                >\n                  Restore\n                </button>\n                <button\n                  onClick={() => handleDelete(item.id)}\n                  className=\"px-2 py-1 text-xs bg-red-600 text-white rounded\"\n                >\n                  Delete\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\n\n/* Settings */\nfunction Settings({ t, onLogoChange }){\n  const [logoData, setLogoData] = useState(localStorage.getItem('erp_logo')||'');\n  function upload(e){ const f = e.target.files[0]; if(!f) return; const reader = new FileReader(); reader.onload = ev => { setLogoData(ev.target.result); onLogoChange(ev.target.result); }; reader.readAsDataURL(f); }\n  return (\n    <div>\n      <h2 className=\"text-2xl font-semibold mb-4\">{t('settings')}</h2>\n      <div className=\"bg-white p-4 rounded shadow\">\n        <label>Upload Logo (PNG/JPG)</label>\n        <input type=\"file\" accept=\"image/*\" onChange={upload} className=\"mt-2\" />\n        {logoData && <div className=\"mt-4\"><img src={logoData} className=\"h-28\" alt=\"logo\" /></div>}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}